/*! For license information please see cloud-app.js.LICENSE.txt */
!function(){var e={620:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},i.prototype.listeners=function(e,t){var r=n?n+e:e,o=this._events[r];if(t)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,a=o.length,s=new Array(a);i<a;i++)s[i]=o[i].fn;return s},i.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,i),!0;case 6:return l.fn.call(l.context,t,r,o,i,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},i.prototype.on=function(e,t,r){var i=new o(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},i.prototype.once=function(e,t,r){var i=new o(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},i.prototype.removeListener=function(e,t,o,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||o&&s.context!==o||(0==--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||o&&s[c].context!==o)&&u.push(s[c]);u.length?this._events[a]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new r:delete this._events[a]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=n,i.EventEmitter=i,e.exports=i},86636:function(e,t,n){e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,r){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function d(e){1!==u.push(e)||r||n()}t.exports=d}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return i.reject(e,t)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=h(a);"error"===s.status&&r(s.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function y(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function v(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){function c(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(u,e))}))}}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)c(e[a]);return s;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=h(f,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=y,u.reject=m,u.all=v,u.race=g},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var u=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function f(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",y=void 0,m={},v=Object.prototype.toString,g="readonly",b="readwrite";function _(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function w(e){return new u((function(t){var n=e.transaction(h,b),r=c([""]);n.objectStore(h).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function T(e){return"boolean"==typeof y?u.resolve(y):w(e).then((function(e){return y=e}))}function E(e){var t=m[e.name],n={};n.promise=new u((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function S(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function I(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function C(e,t){return new u((function(n,r){if(m[e.name]=m[e.name]||R(),e.db){if(!t)return n(e.db);E(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),S(e)}}))}function O(e){return C(e,!1)}function k(e){return C(e,!0)}function P(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function D(e){return new u((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function x(e){return c([_(atob(e.data))],{type:e.type})}function A(e){return e&&e.__local_forage_encoded_blob}function j(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function L(e){E(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,O(e).then((function(t){return e.db=t,P(e)?k(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw I(e,t),t}))}function N(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),k(e)})).then((function(){return L(e).then((function(){N(e,t,n,r-1)}))})).catch(n);n(o)}}function R(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=m[n.name];o||(o=R(),m[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=j);var i=[];function a(){return u.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&i.push(c._initReady().catch(a))}var l=o.forages.slice(0);return u.all(i).then((function(){return n.db=o.db,O(n)})).then((function(e){return n.db=e,P(n,t._defaultConfig.version)?k(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function M(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){N(n._dbInfo,g,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),A(e)&&(e=x(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function U(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){N(n._dbInfo,g,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;A(r)&&(r=x(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function B(e,t,n){var r=this;e=f(e);var o=new u((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===v.call(t)?T(i.db).then((function(e){return e?t:D(t)})):t})).then((function(t){N(r._dbInfo,b,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return l(o,n),o}function W(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){N(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function J(e){var t=this,n=new u((function(e,n){t.ready().then((function(){N(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function z(e){var t=this,n=new u((function(e,n){t.ready().then((function(){N(t._dbInfo,g,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function Y(e,t){var n=this,r=new u((function(t,r){e<0?t(null):n.ready().then((function(){N(n._dbInfo,g,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function q(e){var t=this,n=new u((function(e,n){t.ready().then((function(){N(t._dbInfo,g,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function V(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):O(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;E(e);var r=m[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}var c=new u((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,S(n._dbInfo)}})).catch((function(t){throw(I(e,t)||u.resolve()).catch((function(){})),t}))}})):i.then((function(t){E(e);var n=m[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var i=new u((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<r.length;t++)S(r[t]._dbInfo)})).catch((function(t){throw(I(e,t)||u.resolve()).catch((function(){})),t}))}))}else r=u.reject("Invalid arguments");return l(r,t),r}var G={_driver:"asyncStorage",_initStorage:F,_support:s(),iterate:U,getItem:M,setItem:B,removeItem:W,clear:J,length:z,key:Y,keys:q,dropInstance:V};function H(){return"function"==typeof openDatabase}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Z=X.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",ce="ui32",ue="fl32",le="fl64",de=Z+ee.length,fe=Object.prototype.toString;function pe(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=$.indexOf(e[t]),r=$.indexOf(e[t+1]),o=$.indexOf(e[t+2]),i=$.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function he(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=$[n[t]>>2],r+=$[(3&n[t])<<4|n[t+1]>>4],r+=$[(15&n[t+1])<<2|n[t+2]>>6],r+=$[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ye(e,t){var n="";if(e&&(n=fe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===fe.call(e.buffer))){var r,o=X;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=se:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=ue:"[object Float64Array]"===n?o+=le:t(new Error("Failed to get type for BinaryArray"))),t(o+he(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=K+e.type+"~"+he(this.result);t(X+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,Z)!==X)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Z,de);if(r===te&&Q.test(n)){var o=n.match(Q);t=o[1],n=n.substring(o[0].length)}var i=pe(n);switch(r){case ee:return i;case te:return c([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case ce:return new Uint32Array(i);case ue:return new Float32Array(i);case le:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ve={serialize:ye,deserialize:me,stringToBuffer:pe,bufferToString:he};function ge(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function be(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new u((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(o){ge(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ve,o}function _e(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):ge(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function we(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){_e(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Te(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){_e(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ee(e,t,n,r){var o=this;e=f(e);var i=new u((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){_e(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ee.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return l(i,n),i}function Se(e,t,n){return Ee.apply(this,[e,t,n,1])}function Ie(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){_e(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ce(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){_e(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Oe(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){_e(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function ke(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){_e(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Pe(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){_e(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function De(e){return new u((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function xe(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return l(r=e.name?new u((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(De(r))})).then((function(e){return new u((function(t,n){e.db.transaction((function(r){function o(e){return new u((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));u.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):u.reject("Invalid arguments"),t),r}var Ae={_driver:"webSQLStorage",_initStorage:be,_support:H(),iterate:Te,getItem:we,setItem:Se,removeItem:Ie,clear:Ce,length:Oe,key:ke,keys:Pe,dropInstance:xe};function je(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Le(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ne(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Re(){return!Ne()||localStorage.length>0}function Fe(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Le(e,t._defaultConfig),Re()?(t._dbInfo=n,n.serializer=ve,u.resolve()):u.reject()}function Me(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return l(n,e),n}function Ue(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return l(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return l(r,t),r}function We(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return l(r,t),r}function Je(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return l(n,e),n}function ze(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function Ye(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return l(r,t),r}function qe(e,t,n){var r=this;e=f(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new u((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return l(o,n),o}function Ve(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new u((function(t){e.storeName?t(Le(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),l(r,t),r}var Ge={_driver:"localStorageWrapper",_initStorage:Fe,_support:je(),iterate:Be,getItem:Ue,setItem:qe,removeItem:Ye,clear:Me,length:ze,key:We,keys:Je,dropInstance:Ve},He=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},$e=function(e,t){for(var n=e.length,r=0;r<n;){if(He(e[r],t))return!0;r++}return!1},Ke=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},Xe={},Ze={INDEXEDDB:G,WEBSQL:Ae,LOCALSTORAGE:Ge},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ke(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],i=r._driver;this[n]=i,Qe[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var c=i[a];if((!$e(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return l(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var f=function(n){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,Xe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Qe[e]?u.resolve(Qe[e]):u.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(ve);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ke(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=u.reject(s),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)},33042:function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function a(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(e,t){a(e,t,(function(){throw new m("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var c="__immutable_invariants_hold";function u(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,c)))}function l(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var f=["setPrototypeOf"],p=f.concat(["push","pop","sort","splice","shift","unshift","reverse"]),h=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),y=f.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function m(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function v(e,t){for(var n in a(e,c,!0),t)t.hasOwnProperty(n)&&s(e,t[n]);return Object.freeze(e),e}function g(e,t){var n=e[t];a(e,t,(function(){return q(n.apply(e,arguments))}))}function b(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=q.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var o=C.call(this);return o[e]=q(t),T(o)}m.prototype=new Error,m.prototype.constructor=Error;var _=q([]);function w(e,t,n){var r=e[0];if(1===e.length)return b.call(this,r,t,n);var o,i=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=q.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?w.call(_,i,t):R.call(N,i,t)}if(r in this&&a===o)return this;var c=C.call(this);return c[r]=o,T(c)}function T(e){for(var t in h){if(h.hasOwnProperty(t))g(e,h[t])}o.use_static||(a(e,"flatMap",S),a(e,"asObject",O),a(e,"asMutable",C),a(e,"set",b),a(e,"setIn",w),a(e,"update",M),a(e,"updateIn",B),a(e,"getIn",W));for(var n=0,r=e.length;n<r;n++)e[n]=q(e[n]);return v(e,p)}function E(){return new Date(this.getTime())}function S(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return T(n)}function I(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return Y(n)}function C(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(k(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function O(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],a=o[1];n[i]=a}return Y(n)}function k(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,c)||e instanceof Date?e:q.asMutable(e,{deep:!0})}function P(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function D(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),a=t&&t.deep,s=t&&t.mode||"merge",c=t&&t.merger;function u(e,r,o){var s,u=q(r[o]),f=c&&c(e[o],u,t),p=e[o];void 0===n&&void 0===f&&e.hasOwnProperty(o)&&l(u,p)||(l(p,s=void 0!==f?f:a&&d(p)&&d(u)?q.merge(p,u,t):u)&&e.hasOwnProperty(o)||(void 0===n&&(n=P(e,i(e))),n[o]=s))}function f(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=P(e,i(e))),delete n[r])}if(o)for(var p=0,h=e.length;p<h;p++){var y=e[p];for(r in y)y.hasOwnProperty(r)&&u(void 0!==n?n:this,y,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&u(this,e,r);"replace"===s&&f(this,e)}return void 0===n?this:Y(n)}function x(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return q.merge(this,e,{deep:n,mode:"replace"})}var A,j,L,N=q({});function R(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return F.call(this,r,t,n);var o,a=e.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?q.setIn(s,a,t):R.call(N,a,t),this.hasOwnProperty(r)&&s===o)return this;var c=P(this,i(this));return c[r]=o,Y(c)}function F(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=q.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var o=P(this,i(this));return o[e]=q(t),Y(o)}function M(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return q.set(this,e,t.apply(r,[r].concat(n)))}function U(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function B(e,t){var n=Array.prototype.slice.call(arguments,2),r=U(this,e);return q.setIn(this,e,t.apply(r,[r].concat(n)))}function W(e,t){var n=U(this,e);return void 0===n?t:n}function J(e){var t,n=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=k(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function z(){return{}}function Y(e){return o.use_static||(a(e,"merge",D),a(e,"replace",x),a(e,"without",I),a(e,"asMutable",J),a(e,"set",F),a(e,"setIn",R),a(e,"update",M),a(e,"updateIn",B),a(e,"getIn",W)),v(e,f)}function q(e,t,n){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(q);if(Array.isArray(e))return T(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||a(i,"asMutable",E),v(i,y);var i,s=t&&t.prototype,c=(s&&s!==Object.prototype?function(){return Object.create(s)}:z)();if(null==n&&(n=64),n<=0)throw new m("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var l in n-=1,e)Object.getOwnPropertyDescriptor(e,l)&&(c[l]=q(e[l],void 0,n));return Y(c)}function V(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function G(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return q.from=q,q.isImmutable=u,q.ImmutableError=m,q.merge=V(D),q.replace=V(x),q.without=V(I),q.asMutable=(A=J,j=C,L=E,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?j.apply(t,e):t instanceof Date?L.apply(t,e):A.apply(t,e)}),q.set=G(F,b),q.setIn=G(R,w),q.update=V(M),q.updateIn=V(B),q.getIn=V(W),q.flatMap=V(S),q.asObject=V(O),o.use_static||(q.static=e({use_static:!0})),Object.freeze(q),q}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{CloudApp:function(){return nt},CloudAppContainer:function(){return ot},CloudAppSnippets:function(){return it},convertItem:function(){return Fe},createItem:function(){return Ue},duplicateItem:function(){return Be},effects:function(){return wt},exportItem:function(){return We},fetchCloudToken:function(){return Je},fetchLibraryData:function(){return st},fetchLibraryDataLog:function(){return ct},fetchLibraryItem:function(){return ut},getCloudFetchInProgressStatus:function(){return Et},getCloudFolders:function(){return St},getCloudTerms:function(){return It},getCloudToken:function(){return Ct},getFetchLibraryDataLog:function(){return Ot},getItem:function(){return ze},getLibraryData:function(){return kt},getLibraryItem:function(){return Pt},getLibraryTerms:function(){return Dt},getPreviewBlockStructure:function(){return Ye},getUseCloudModuleType:function(){return xt},isFetchingLibraryData:function(){return At},libraryItemPreview:function(){return qe},purgeLibraryData:function(){return lt},refreshByType:function(){return Ne},registerCloudAppStore:function(){return Lt},saveBulkCloudItems:function(){return Ge},setCloudFetchInProgressStatus:function(){return dt},setCloudFolders:function(){return ft},setCloudTerms:function(){return pt},setCloudToken:function(){return ht},setLibraryData:function(){return yt},setLibraryItem:function(){return mt},setLibraryTerms:function(){return vt},setUseCloudModuleType:function(){return gt},toggleItemLocation:function(){return He},updateLibraryItem:function(){return bt},updateLibraryTerms:function(){return _t},uploadLibraryImage:function(){return Me}});var e={};n.r(e),n.d(e,{fetchLibraryData:function(){return st},fetchLibraryDataLog:function(){return ct},fetchLibraryItem:function(){return ut},purgeLibraryData:function(){return lt},setCloudFetchInProgressStatus:function(){return dt},setCloudFolders:function(){return ft},setCloudTerms:function(){return pt},setCloudToken:function(){return ht},setLibraryData:function(){return yt},setLibraryItem:function(){return mt},setLibraryTerms:function(){return vt},setUseCloudModuleType:function(){return gt},updateLibraryItem:function(){return bt},updateLibraryTerms:function(){return _t}});var t={};n.r(t),n.d(t,{getCloudFetchInProgressStatus:function(){return Et},getCloudFolders:function(){return St},getCloudTerms:function(){return It},getCloudToken:function(){return Ct},getFetchLibraryDataLog:function(){return Ot},getLibraryData:function(){return kt},getLibraryItem:function(){return Pt},getLibraryTerms:function(){return Dt},getUseCloudModuleType:function(){return xt},isFetchingLibraryData:function(){return At}});var o=window.vendor.React,i=n.n(o),a=n(86636),s=n.n(a);function c(e){this.message=e}c.prototype=new Error,c.prototype.name="InvalidCharacterError";var u="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function l(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(u(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return u(t)}}function d(e){this.message=e}d.prototype=new Error,d.prototype.name="InvalidTokenError";var f=function(e,t){if("string"!=typeof e)throw new d("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(l(e.split(".")[n]))}catch(e){throw new d("Invalid token specified: "+e.message)}},p=window.lodash,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=function(){function e(t){v(this,e),this.type=t,"string"==typeof(arguments.length<=1?void 0:arguments[1])?(this.name=arguments.length<=1?void 0:arguments[1],this.items=arguments.length<=2?void 0:arguments[2]):(this.name=null,this.items=arguments.length<=1?void 0:arguments[1]),Array.isArray(this.items)||(this.items=[this.items])}return h(e,[{key:"toJSON",value:function(){return{name:this.name,_functionTreePrimitive:!0,type:this.type,items:this.items}}}]),e}(),b=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this,"sequence"].concat(r)))}return m(t,e),t}(g),_=function(e){function t(){var e;v(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this,"parallel"].concat(r)))}return m(t,e),t}(g),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(e){function t(e){T(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.message||e));return n.name="FunctionTreeError",n}return S(t,e),w(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),C=function(e){function t(e,n,r,o){T(this,t);var i=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));return i.name="FunctionTreeExecutionError",i.execution=e,i.funcDetails=n,i.payload=r,i}return S(t,e),w(t,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,execution:{name:this.execution.name},funcDetails:{name:this.funcDetails.name,functionIndex:this.funcDetails.functionIndex},payload:this.payload,stack:this.stack}}}]),t}(I),O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function k(e){if(e.displayName)return e.displayName;if(e.name)return e.name;var t=e.toString(),n=void 0;return 0===t.indexOf("async function")?n="async function ":0===t.indexOf("function")&&(n="function "),t=(t=t.substr(n?n.length:0)).substr(0,t.indexOf("("))}function P(e){return e&&!Array.isArray(e)&&"object"===(void 0===e?"undefined":O(e))&&!(e instanceof g)}function D(e,t,n,r){if(n instanceof g){var o=n.toJSON();return Object.assign(o,{items:D(e,t,o.items,n instanceof _).items})}if(Array.isArray(n))return new b(n.reduce((function(r,o,i){if(o instanceof g){var a=o.toJSON();return r.concat(Object.assign(a,{items:D(e,t,a.items,o instanceof _).items}))}if("function"==typeof o){var s={name:o.displayName||k(o),functionIndex:t.push(o)-1,function:o},c=n[i+1];return P(c)&&(s.outputs={},Object.keys(c).forEach((function(n){if(o.outputs&&!~o.outputs.indexOf(n))throw new I("Outputs object doesn't match list of possible outputs defined for function.");s.outputs[n]=D(e,t,"function"==typeof c[n]?[c[n]]:c[n])}))),r.concat(s)}if(P(o))return r;if(Array.isArray(o)){var u=D(e,t,o);return r.concat(u)}throw new I('Unexpected entry in "'+e+'". '+function(e,t){return"\n[\n"+e.map((function(e){return e===t?"  "+(void 0===t?"undefined":O(t))+", <-- PROBLEM":"function"==typeof e?"  "+k(e)+",":e instanceof g?"  [ "+e.type.toUpperCase()+" ],":Array.isArray(e)?"  [ SEQUENCE ],":"  { PATHS },"})).join("\n")+"\n]\n  "}(n,o))}),[])).toJSON();throw new I("Unexpected entry in tree")}var x=function(e,t){return D(e,[],"function"==typeof t?[t]:t)},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=t,this.payload=n}return A(e,[{key:"toJSON",value:function(){return{path:this.path,payload:this.payload,_functionTreePath:!0}}}]),e}(),L=j,N=n(620),R=n.n(N);function F(e,t){return e._functionTreePrimitive&&e.type===t}function M(e,t,n,r,o,i,a,s,c){!function t(c,u,l,d,f){n((function(){function n(e){t(c,u+1,e,l,f)}function p(n,o){return function(i){var a=Object.assign({},l,i?i.payload:{});if(i&&n.outputs){var s=Object.keys(n.outputs);if(!~s.indexOf(i.path))throw new C(e,n,l,"function "+n.name+" must use one of its possible outputs: "+s.join(", ")+".");r(n,i.path,a),t(n.outputs[i.path].items,0,a,l,o)}else o(a)}}var h=c[u];if(h)if(F(h,"sequence"))t(h.items,0,l,d,n);else if(F(h,"parallel")){var y=h.items.length,m=[];i(l,y),h.items.forEach((function(r,o){return r.function?e.runFunction(r,l,d,p(r,(function(e){m.push(e),m.length===y?(s(e,y),n(Object.assign.apply(Object,[{}].concat(m)))):a(e,y-m.length)}))):t(r.items,0,l,d,(function(e){m.push(e),m.length===y?(s(e,y),n(Object.assign.apply(Object,[{}].concat(m)))):a(e,y-m.length)})),m}))}else e.runFunction(h,l,d,p(h,n));else c!==e.staticTree&&o(l),f(l)}))}([e.staticTree],0,t,null,c)}var U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function B(e){return e&&(e instanceof Promise||"function"==typeof e.then&&"function"==typeof e.catch)}function W(e){return!(null!==e&&"object"===(void 0===e?"undefined":U(e))&&!Array.isArray(e)&&e.constructor!==Object)}var J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.wrap,o=void 0===r||r,i=n.ignoreDefinition,a=void 0!==i&&i;Y(this,e),this.definition=t,"function"!=typeof t&&(a||this.verifyDefinition(t),this.wrap=o,this.ProviderConstructor=function(e){this.context=e},this.ProviderConstructor.prototype=t,this.WrappedProviderConstructor=function(e,t){this.context=t,this.providerName=e},this.WrappedProviderConstructor.prototype=Object.keys(a?{}:t).reduce((function(e,n){var r=t[n];return e[n]=function(){for(var e=this,t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=r.apply(this,o);return B(a)?a.then((function(t){return e.context.debugger.send({type:"provider",datetime:Date.now(),method:e.providerName+"."+n,args:o,isPromise:!0,isRejected:!1,returnValue:W(t)?t:"[CAN_NOT_SERIALIZE]"}),t})).catch((function(t){throw e.context.debugger.send({method:e.providerName+"."+n,args:o,isPromise:!0,isRejected:!0}),t})):(this.context.debugger.send({type:"provider",datetime:Date.now(),method:this.providerName+"."+n,args:o,returnValue:W(a)?a:"[CAN_NOT_SERIALIZE]"}),a)},e}),{}))}return z(e,[{key:"verifyDefinition",value:function(e){if(!this.ignoreDefinition){if("object"!==(void 0===e?"undefined":J(e))||null===e)throw new Error("The definition passed as Provider is not valid");Object.keys(e).forEach((function(t){if("function"!=typeof e[t])throw new Error("The property "+t+" passed to Provider is not a method")}))}}},{key:"get",value:function(e){return"function"==typeof this.definition?this.definition(e):new this.ProviderConstructor(e)}},{key:"getWrapped",value:function(e,t){return"function"==typeof this.definition?this.definition(t):new this.WrappedProviderConstructor(e,t)}}]),e}(),V=q,G=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var $=function(){function e(){H(this,e)}return G(e,[{key:"getValue",value:function(){throw new Error('Extending ResolveValue requires you to add a "getValue" method')}}]),e}();!function(e){function t(e){H(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.cvalue=e,n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),G(t,[{key:"getValue",value:function(e){var t=e.resolve,n=this.cvalue;return t.isResolveValue(n)?t.value(n):Object.keys(n).reduce((function(e,r){return e[r]=t.value(n[r]),e}),{})}}])}($);var K=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Q=function(e){function t(e,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.type=e,i.getter=n,i.strings=r,i.values=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),K(t,[{key:"getTags",value:function(){return[this].concat(this.getNestedTags())}},{key:"getPath",value:function(e){var t=this;return this.strings.reduce((function(n,r,o){var i=t.values[o];return i instanceof $?n+r+i.getValue(e):n+r+(void 0!==i?i:"")}),"")}},{key:"getValue",value:function(e){return this.getter(this.getPath(e),e)}},{key:"getNestedTags",value:function(){var e=this;return this.strings.reduce((function(n,r,o){var i=e.values[o];return i instanceof t?n.concat(i):n}),[])}},{key:"toString",value:function(){return this.type+"`"+this.pathToString()+"`"}},{key:"pathToString",value:function(){var e=this;return this.strings.reduce((function(n,r,o){var i=e.values[o];return i instanceof t?n+r+"${"+i.toString()+"}":n+r+(void 0!==i?i:"")}),"")}}]),t}($);function X(e,t){return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(o.some((function(e){return void 0===e})))throw new Error("One of the values passed inside the tag interpolated to undefined. Please check.");return new Q(e,t,n,o)}}var Z=new V({isTag:function(e){if(!(e instanceof Q))return!1;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!n.length||n.reduce((function(t,n){return t||n===e.type}),!1)},isResolveValue:function(e){return e instanceof $},value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof $?e.getValue(t?Object.assign({},this.context,t):this.context):e},path:function(e){if(e instanceof Q)return e.getPath(this.context);throw new Error("You are extracting a path from an argument that is not a Tag.")}},{wrap:!1}),ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e){return!e||"object"===(void 0===e?"undefined":te(e))&&!Array.isArray(e)}function ie(e,t,n,r){var o=e;return o.execution=t,o.functionDetails=n,o.payload=Object.assign({},r,{_execution:{id:t.id,functionIndex:n.functionIndex},error:e.toJSON?e.toJSON():{name:e.name,message:e.message,stack:e.stack}}),o}var ae=function(){function e(t,n,r,o){re(this,e),this.id=Date.now()+"_"+Math.floor(1e4*Math.random()),this.name=t||n.name||this.id,this.staticTree=n,this.functionTree=r,this.datetime=Date.now(),this.errorCallback=o,this.hasThrown=!1,this.isAsync=!1,this.runFunction=this.runFunction.bind(this)}return ee(e,[{key:"runFunction",value:function(e,t,n,r){if(!this.hasThrown){var o=this.createContext(e,t,n),i=this.functionTree,a=this.errorCallback,s=this,c=void 0;i.emit("functionStart",s,e,t);try{c=e.function(o)}catch(u){return this.hasThrown=!0,a(ie(u,s,e,t),s,e,t)}if(B(c))i.emit("asyncFunction",s,e,t,c),this.isAsync=!0,c.then((function(n){if(n instanceof L)i.emit("functionEnd",s,e,t,n),r(n.toJSON());else{if(e.outputs)throw i.emit("functionEnd",s,e,t,n),new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));if(!oe(n))throw i.emit("functionEnd",s,e,t,n),new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" is not a valid result"));i.emit("functionEnd",s,e,t,n),r({payload:n})}})).catch((function(n){if(!s.hasThrown)if(n instanceof Error)s.hasThrown=!0,a(ie(n,s,e,t),s,e,t);else if(n instanceof L)i.emit("functionEnd",s,e,t,n),r(n.toJSON());else if(e.outputs){var o=new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));s.hasThrown=!0,a(ie(o,s,e,t),s,e,t)}else if(oe(n))i.emit("functionEnd",s,e,t,n),r({payload:n});else{var c=new C(s,e,t,new Error("The result "+JSON.stringify(n)+" from function "+e.name+" is not a valid result"));s.hasThrown=!0,a(ie(c,s,e,t),s,e,t)}}));else if(c instanceof L)i.emit("functionEnd",s,e,t,c),r(c.toJSON());else if(e.outputs){var u=new C(s,e,t,new Error("The result "+JSON.stringify(c)+" from function "+e.name+" needs to be a path of either "+Object.keys(e.outputs)));this.hasThrown=!0,a(ie(u,s,e,t),s,e,t)}else if(oe(c))i.emit("functionEnd",s,e,t,c),r({payload:c});else{var l=new C(s,e,t,new Error("The result "+JSON.stringify(c)+" from function "+e.name+" is not a valid result"));this.hasThrown=!0,a(ie(l,s,e,t),s,e,t)}}}},{key:"createContext",value:function(e,t,n){var r=this.functionTree.contextProviders,o={execution:this,props:t||{},functionDetails:e,path:e.outputs?Object.keys(e.outputs).reduce((function(e,t){return e[t]=function(e){return new L(t,e)},e}),{}):null},i=r.debugger&&r.debugger.get(o,e,t,n),a=Object.keys(r).reduce((function(o,i){var a=r[i];return o[i]=a instanceof V?a.get(o,e,t,n):a,o}),o);return i?Object.keys(a).reduce((function(t,n){var o=r[n];return o&&o instanceof V&&o.wrap?t[n]="function"==typeof o.wrap?o.wrap(a,e):o.getWrapped(n,a):t[n]=a[n],t}),{}):a}}]),e}();!function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};re(this,t);var r=ne(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.cachedTrees=[],r.cachedStaticTrees=[],r.executeBranchWrapper=n.executeBranchWrapper||function(e){e()},"object"!==(void 0===e?"undefined":te(e))||null===e||Array.isArray(e))throw new Error("You have to pass an object of context providers to FunctionTree");var o=Object.keys(e);if(o.indexOf("props")>=0||o.indexOf("path")>=0||o.indexOf("resolve")>=0||o.indexOf("execution")>=0||o.indexOf("debugger")>=0)throw new Error('You are trying to add a provider with protected key. "props", "path", "resolve", "execution" and "debugger" are protected');return r.contextProviders=Object.assign({},e,{resolve:Z}),r.run=r.run.bind(r),r}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,e),ee(t,[{key:"run",value:function(){var e=this,t=void 0,n=void 0,r=void 0,o=void 0,i=void 0,a=[].slice.call(arguments);if(a.forEach((function(e){"string"==typeof e?t=e:Array.isArray(e)||e instanceof g?n=e:n||"function"!=typeof e?"function"==typeof e?o=e:r=e:n=e})),!n)throw new Error("function-tree - You did not pass in a function tree");var s=function(o,a){var s=e.cachedTrees.indexOf(n);-1===s?(i=x(t,n),e.cachedTrees.push(n),e.cachedStaticTrees.push(i)):i=e.cachedStaticTrees[s];var c=new ae(t,i,e,(function(t,n,r,o){e.emit("error",t,n,r,o),a(t)}));e.emit("start",c,r),M(c,r,e.executeBranchWrapper,(function(t,n,r){e.emit("pathStart",n,c,t,r)}),(function(t){e.emit("pathEnd",c,t)}),(function(t,n){e.emit("parallelStart",c,t,n)}),(function(t,n){e.emit("parallelProgress",c,t,n)}),(function(t,n){e.emit("parallelEnd",c,t,n)}),(function(t){e.emit("end",c,t),o===a?o(null,t):o(t)}))};if(!o)return new Promise(s);s(o,o)}}])}(R());var se=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=e.nextWatchId++;this.id="Watch_"+n,this.rawId=n,this.name=null,this.type=t,this.executedCount=0,this.controller=null,this.modulePath="",this.dependencyMap=null}return se(e,[{key:"create",value:function(e,t,n){return this.name=n,this.controller=e,this.modulePath=t,this}},{key:"registerDependencies",value:function(){this.dependencyMap=this.createDependencyMap(),this.controller.dependencyStore.addEntity(this,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,this.dependencyMap),this.controller.devtools.sendWatchMap([],[],0,0))}},{key:"destroy",value:function(){this.dependencyMap&&(this.controller.dependencyStore.removeEntity(this,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,null,this.dependencyMap),this.controller.devtools.sendWatchMap([],[],0,0)))}},{key:"toJSON",value:function(){return{id:this.id,executedCount:this.executedCount,type:this.type,name:this.name}}}]),e}();ce.nextWatchId=0;var ue=ce,le=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var fe=function(){function e(t,n){de(this,e),this.computed=t,this.propsTags=t.propsTags,this.nestedPath=n}return le(e,[{key:"getValue",value:function(e){return this.nestedPath.reduce((function(e,t){return e&&e[t]}),this.computed.getValue(e))}},{key:"getDependencyMap",value:function(){return this.computed.getDependencyMap()}},{key:"clone",value:function(){return this.computed.clone()}},{key:"destroy",value:function(){return this.computed.destroy()}}]),e}(),pe=function(e){function t(e){de(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Compute"));return n.computedCallback=e,n.isDirty=!0,n.value=null,n.props=null,n.getters=null,n.stateTags=[],n.propsTags=[],n.onUpdate=n.onUpdate.bind(n),n.dynamicGetter=n.dynamicGetter.bind(n),n.dynamicGetter.path=n.dynamicPathGetter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),le(t,[{key:"createDependencyMap",value:function(){return this.controller.createDependencyMap(this.stateTags,this.props,this.modulePath)}},{key:"getDependencyMap",value:function(){return this.dependencyMap}},{key:"onUpdate",value:function(){this.isDirty=!0}},{key:"clone",value:function(){return new t(this.computedCallback).create(this.controller,this.modulePath,this.name+" (clone)")}},{key:"compute",value:function(){return this.executedCount++,this.computedCallback(this.getDynamicGetter())}},{key:"getDynamicGetter",value:function(){return this.stateTags=[],this.propsTags=[],this.dynamicGetter}},{key:"parseDependencies",value:function(e){var t=this;if(!(e instanceof Q))throw new Error('Cerebral - Only tags are allowed in the dynamic "get" of Compute');e.getTags().forEach((function(e){"props"===e.type?t.propsTags.push(e):t.stateTags.push(e)}))}},{key:"dynamicGetter",value:function(e){this.parseDependencies(e);var t=e.getValue(this.getters);return ve(t)?t.getValue(this.props):t}},{key:"dynamicPathGetter",value:function(e){return e.getPath(this.getters)}},{key:"hasChangedProps",value:function(e){var t=this,n=this.controller.createContext(e);return this.propsTags.reduce((function(e,r){return!!e||r.getValue(t.getters)!==r.getValue(n)}),!1)}},{key:"getValue",value:function(e){if(!this.controller)throw new Error("This Cerebral Compute has not been added to a module");if(!this.isDirty&&this.propsTags.length&&this.hasChangedProps(e)&&(this.isDirty=!0),this.isDirty){this.getters=this.controller.createContext(e),this.props=e,this.value=this.compute();var t=this.dependencyMap;this.dependencyMap=this.createDependencyMap(),this.controller.dependencyStore.updateEntity(this,t,this.dependencyMap),this.controller.devtools&&(this.controller.devtools.updateWatchMap(this,this.dependencyMap,t),this.controller.devtools.updateComputedState(this.name,this.value)),this.isDirty=!1}return this.value}},{key:"toString",value:function(){return this.getValue(this.props)}}]),t}(ue);"function"==typeof Symbol&&Symbol.iterator;var he=[];function ye(e,t){-1===he.indexOf(e)&&(he.push(e),console.warn(e+" is DEPRECATED - "+t))}function me(e,t){var n=t.execution.name.split(".");return n.splice(0,n.length-1).concat(e).join(".")}function ve(e){return e instanceof pe||e instanceof fe}X("string",(function(e){return e})),X("path",(function(e){return e})),X("signal",(function(e,t){return ye("tags.signal",'use the "sequences" tag instead'),t.controller.getSequence(e)})),X("signals",(function(e,t){return ye("tags.signals",'use the "sequences" tag instead'),t.controller.getSequences(e)})),X("sequences",(function(e,t){return t.controller.getSequence(e)||t.controller.getSequences(e)})),X("state",(function(e,t){return t.controller.getState(e)})),X("module",(function(e,t){return ye("tags.module",'use the "moduleState" tag instead'),t.controller.getState(me(e,t))})),X("moduleState",(function(e,t){return t.controller.getState(me(e,t))})),X("moduleSequences",(function(e,t){return t.controller.getSequence(me(e,t))||t.controller.getSequences(me(e,t))})),X("props",(function(e,t){return function(e,t){return t.split(".").reduce((function(e,n,r){if(r>0&&void 0===e)throw new Error('Cannot extract value at path "'+t+'" ("'+n+'" is not defined).');return e[n]}),e)}(t.props,e)}));const ge={tags:"tags",categories:"categories",packs:"packs",favoritePacks:"favorites",cloudStatus:"activate",layout:"layouts",section:"sections",row:"rows",module:"modules",tb_template:"templates",tb_set:"template-sets",code_css:"snippets-css",code_css_no_selector:"snippets-css-ns",code_html:"snippets"};function be(e){try{return f(e)}catch(e){return"invalid-token"}}const _e={cache:{},offlineCacheTable:"DiviCloud",offlineCacheVersion:"1.4",cacheKey:"",init(e,t){window.ETCloudCache=window.ETCloudCache||{},this.cacheKey=e,(0,p.has)(window.ETCloudCache,e)||(0,p.set)(window.ETCloudCache,e,{}),this.getOfflineCache("cloud-cache-version").then((e=>{if(this.offlineCacheVersion!==e){s().createInstance({name:this.offlineCacheTable}).clear().then((()=>{this.setOfflineCache("cloud-cache-version",this.offlineCacheVersion)}))}})),this.cache=window.ETCloudCache[e]},addData(e,t,n=!1,r=!1){if(n)(0,p.set)(window.ETCloudCache,e,t);else{const n=r?window.ETCloudCache[r]:this.cache;(0,p.set)(n,e,t)}},getData(e,t=[],n=!1){return n?(0,p.get)(window.ETCloudCache[n],e,t):(0,p.get)(this.cache,e,t)},clearData(){window.ETCloudCache={},(0,p.set)(window.ETCloudCache,this.cacheKey,{}),this.cache=window.ETCloudCache[this.cacheKey]},setOfflineCache(e,t,n=!1,r="items"){const o=s().createInstance({name:this.offlineCacheTable});return n?o.getItem(e).then((n=>{let i=t;return i="array"===r?(0,p.merge)(n,t):n?(0,p.concat)(n,t).filter((function({id:e,item_location:t},n){const r=t||"local";return!this.has(n=e+r)&&this.add(n)}),new Set):t,o.setItem(e,i)})):o.setItem(e,t)},getOfflineCache(e){return s().createInstance({name:this.offlineCacheTable}).getItem(e).then((e=>e))}};var we=window.jQuery,Te=n.n(we),Ee=n(33042),Se=n.n(Ee),Ie=window.vendor.wp.i18n,Ce=window.divi.conversion,Oe=window.divi.data,ke=window.divi.moduleUtils,Pe=window.divi.rest,De=window.divi.serializedPost,xe=window.divi.uiLibrary;function Ae(e,t,n={},r={},o=!1,i=0,a=""){if(0!==i)return Le({type:"post",resource:t,resourceId:i,accessToken:e,providedBaseUrl:a},n).then((e=>(o&&o(e),e)));const s=[];return(0,p.isEmpty)(r)||(0,p.forEach)(r,((t,n)=>{(0,p.isEmpty)(t)||(0,p.forEach)(t,(t=>{s.push(je(t,n,e,a))}))})),"fullwidth"===n.width&&s.push(je("fullwidth","module_width",e,a)),(0,p.isEmpty)(s)?Le({type:"post",resource:t,accessToken:e,providedBaseUrl:a},n).then((t=>(o&&o(t,e),t))):Promise.all(s).then((r=>{const i=(0,p.groupBy)(r,"taxonomy");return(0,p.forEach)(["categories","tags","module_width"],(e=>{const t=(0,p.get)(i,[e],[]);let r=[];(0,p.isEmpty)(t)||(r=(0,p.map)((0,p.keys)((0,p.keyBy)(t,"id")),p.toInteger)),n[e]=r})),Le({type:"post",resource:t,accessToken:e,providedBaseUrl:a},n).then((t=>(o&&o(t,e),t)))}))}function je(e,t,n,r=""){return new Promise((o=>{if((0,p.isUndefined)(e)||""===e)return o({});return Le({type:"post",resource:t,accessToken:n,providedBaseUrl:r},{name:e}).then((e=>{if(e.error&&"term_exists"!==e.error)return o({});const n="term_exists"===(0,p.get)(e,"code","")?e.data.term_id:e.id;o({taxonomy:t,id:n})}))}))}function Le(e={},t={}){const{type:n,resource:r,resourceId:o,source:i,queryString:a,providedUrl:s,providedBaseUrl:c,etAccount:u,accessToken:l,includeHeaders:d}=e;let f=s||"";const h="predefined"===i&&"cloudStatus"!==r?`${(0,p.get)(u,"username","")}:${(0,p.get)(u,"apiKey","")}`:l,y=("predefined"!==i||"favoritePacks"===r||"layout"===r||"cloudStatus"===r)&&!s;if(!f){const e=c&&""!==c?c:function(e="user",t=""){if("predefined"===e)return et_cloud_data.predefined_items_url;const n=be(t);return`${"invalid-token"===n?"":(0,p.get)(n,["aud",[1]],"")}/wp-json/cloud/v1`}(i,h),t=function(e){return(0,p.get)(ge,e,e)}(r);f=`${e}/${t}`,o&&(f=`${f}/${o}`),a&&(f=`${f}?${a}`)}const m={method:n,mode:"cors"};(0,p.isEmpty)(t)||(m.body=JSON.stringify(t));const v=s?{"Content-Type":"application/x-www-form-urlencoded"}:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json"};if(y){if(!h)return new Promise((e=>e({code:"missing_token",error:"Your Divi Cloud session has ended. Please try logging in again. If you continue to experience authorization failures, try closing Library modal and opening it again so that your authorization token can be regenerated."})));v.Authorization=`Bearer ${h}`,m.credentials="same-origin"}return m.headers=v,function(e,t,n=!1){const r="post"===t.method?300:15;return t.signal=(e=>{const t=new AbortController;return setTimeout((()=>t.abort()),1e3*e),t})(r).signal,fetch(e,t).then((e=>{if(503===e.status)throw new Error(`${e.status} - ${e.statusText}`);return e.json().then((t=>({totalPages:e.headers.get("x-wp-totalpages"),totalItems:e.headers.get("x-wp-total"),totalCloudItems:e.headers.get("X-ET-API-CLOUD-ITEM-COUNT"),body:t})))})).then((e=>(0,p.get)(e,"body.code")?{error:e.body.code,...e.body}:n?e:e.body)).catch((t=>(console.log("CLOUD API REQUEST ERROR:",e,t),{error:t})))}(f,m,d)}const Ne=async e=>(_e.addData([e,"modules_library","localItemsCached"],!1,!0),_e.addData([e,"modules_library"],{},!0),(0,Oe.dispatch)("divi/cloud-app").fetchLibraryData([e]),new Promise((e=>{setTimeout(e,1e3)}))),Re={convert_module_to_row:{title:(0,Ie.__)("Convert Module To Row","et_builder"),description:(0,Ie.__)("Conversion completed. Item moved to the Rows library.","et_builder")},convert_module_to_section:{title:(0,Ie.__)("Convert Module To Section","et_builder"),description:(0,Ie.__)("Conversion completed. Item moved to the Sections library.","et_builder")},convert_row_to_section:{title:(0,Ie.__)("Convert Row To Section","et_builder"),description:(0,Ie.__)("Conversion completed. Item moved to the Sections library.","et_builder")}},Fe=async(e,t,n)=>{const{action:r,content:o,item:i}=e;if(o&&!Object.keys(o).length)throw new Error((0,Ie.__)("The item you are trying to convert is empty."));const a=(0,Oe.select)("divi/cloud-app").getCloudToken();let s="",c="",u="",l="";switch(r){case"convert_module_to_row":s=Re.convert_module_to_row.title,c=Re.convert_module_to_row.description,u="module",l="row";break;case"convert_module_to_section":s=Re.convert_module_to_section.title,c=Re.convert_module_to_section.description,u="module",l="section";break;case"convert_row_to_section":s=Re.convert_row_to_section.title,c=Re.convert_row_to_section.description,u="row",l="section"}const d=(e,r,o)=>{const i={isShow:!0,title:e,description:r};t(o),n(i)},f=async()=>{await Ne(u),await Ne(l),d(s,c,null)},p={action:r,...o?{content:(0,ke.maybeUnwrapPlaceholderBlock)(Object.values(o.data)[0])}:{id:i.id}};return(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/convert-item",data:p}).then((async e=>{t(70),o?await(async e=>{const t={title:i.name,content:JSON.stringify(e),categories:i.category_ids,tags:i.tag_ids,width:i.width,status:"publish",meta:{}};i.subtype&&(t.meta={_et_pb_module_type:i.subtype}),i.row_layout&&(t.meta={...t.meta,_et_pb_row_layout:i.row_layout}),i.is_favorite&&(t.meta={...t.meta,"et-api-cloud-favorite":i.is_favorite}),window.ETCloudApp.emitSignal({signal:"finishDownload",data:{}}),await Ae(a,l,t,{},(async e=>{if(e){const e={clickedItem:i,isCloudItem:!0,itemPayload:{content:o,updateType:"delete_permanently"}};window.ETCloudApp.emitSignal({signal:"updateItem",data:e}),await f()}}))})(e):await f()})).catch((e=>{console.log(e),d("Error","An error occurred. Please try again.",null)}))},Me=(e,t)=>new Promise((n=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/upload-image",data:{postId:e,imageURL:t}}).then((()=>{n()})).catch((e=>{console.log(e)}))})),Ue=({payload:e,layoutType:t,setDownloadProgress:n})=>{const r=e?.clickedItem?.id??0,o=e.itemPayload,i=e?.clickedItem?.thumbnail??"",a=String((0,p.first)(Object.values(o.content.data))),s=new FormData;s.append("module_width",String(o.moduleWidth)),s.append("layout_name",o.itemName),s.append("post_type",(0,Oe.select)("divi/settings").getSetting(["post","type"])),s.append("layout_type",t),s.append("layout_content",String(a)),s.append("layout_new_cat",String(o.newCategoryName)),s.append("layout_new_tag",String(o.newTagName)),s.append("layout_selected_cats",String(o.itemCategories)),s.append("layout_selected_tags",String(o.itemTags)),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/create-item",data:s},!0).then((e=>{const t={updatedItem:r,newId:e.layoutData.post_id,categories:e.updatedTerms.layout_category,tags:e.updatedTerms.layout_tag,updateType:o.updateType};i&&Me(String(t.newId),i).catch((e=>{console.log(e)})),window.ETCloudApp.emitSignal({signal:"receiveItemUpdate",data:{data:t}}),n(null)})).catch((e=>{console.log(e)}))},Be=({payload:e,getCloudTab:t,getCloudContext:n,setDownloadProgress:r,triggerLocalItemsUpdate:o,setDuplicateInProgress:i})=>{const a=e?.clickedItem?.id??0,s=e.itemPayload,c=e?.clickedItem?.thumbnail??"",u="modules_all"===t(),l=n();i(!0);const d=String((0,p.first)(Object.values(s.content.data))),f=new FormData;f.append("module_width",String(s.moduleWidth)),f.append("layout_name",s.itemName),f.append("post_type",(0,Oe.select)("divi/settings").getSetting(["post","type"])),f.append("layout_type",l),f.append("layout_content",String(d)),f.append("layout_new_cat",String(s.newCategoryName)),f.append("layout_new_tag",String(s.newTagName)),f.append("layout_selected_cats",String(s.itemCategories)),f.append("layout_selected_tags",String(s.itemTags)),setTimeout((()=>r(80)),500),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/create-item",data:f},!0).then((e=>{const t={updatedItem:a,newId:e.layoutData.post_id,newItem:e.layoutData.post_id,categories:e.updatedTerms.layout_category,tags:e.updatedTerms.layout_tag,updateType:s.updateType};c?Me(t.newId.toString(),c).then((()=>{u&&o()})).catch((e=>{console.log(e)})):u&&o(),window.ETCloudApp.emitSignal({signal:"receiveItemUpdate",data:{data:t}}),i(!1),u||(0,Oe.dispatch)("divi/cloud-app").fetchLibraryData([l])})).catch((e=>{console.log(e)}))},We=(e,t)=>{(0,Oe.dispatch)("divi/modal-library").open({name:"divi/portability",attributes:{isCloudAppAction:!0,showTabs:!1,layoutContent:t?String((0,p.first)(Object.values(t.data))):"",layoutId:e.id,itemName:e.name,afterPortabilityClose:()=>{(0,Oe.dispatch)("divi/modal-library").close({name:"divi/portability"}),(0,Oe.dispatch)("divi/modal-library").setAttributes({name:"divi/portability",attributes:{layoutContent:null,layoutGlobalColors:"",layoutId:null,showTabs:!0,isCloudAppAction:!1,itemName:""}}),window.ETCloudApp.emitSignal({signal:"finishDownload",data:{}})}}})},Je=e=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/cloud-token",data:{}},!0).then((t=>{t?.cloudToken&&(0,Oe.dispatch)("divi/cloud-app").setCloudToken(t.cloudToken),e?.success&&e?.success(Se()(t))})).catch((e=>{console.log(e)}))},ze=(e,t,n,r,o)=>new Promise((i=>{(0,Oe.dispatch)("divi/cloud-app").fetchLibraryItem(n,e,t,{progress:e=>{r((t=>e>t?e>99?99:e:t))},success:e=>{e.page&&e.totalPages?i(e):setTimeout((()=>{r(99),i(e)}),350)}},o)})),Ye=(e,t,n)=>{let r;switch(t){case"module":r="fullwidth"===n?`\x3c!-- wp:divi/section {"module":{"advanced":{"type":{"desktop":{"value":"fullwidth"}}}}} --\x3e${e}\x3c!-- /wp:divi/section --\x3e`:`\x3c!-- wp:divi/section --\x3e\x3c!-- wp:divi/row {"module":{"advanced":{"columnStructure":{"desktop":{"value":"4_4"}}}}} --\x3e\x3c!-- wp:divi/column {"module":{"advanced":{"type":{"desktop":{"value":"4_4"}}}}} --\x3e${e}\x3c!-- /wp:divi/column --\x3e\x3c!-- /wp:divi/row --\x3e\x3c!-- /wp:divi/section --\x3e`;break;case"row":r=`\x3c!-- wp:divi/section --\x3e${e}\x3c!-- /wp:divi/section --\x3e`;break;default:r=e}return(0,Ce.maybeConvertContent)(r)},qe=e=>{(0,Oe.dispatch)("divi/modal-library").open({name:"divi/library-item-preview",offset:{top:0,left:0},dimension:{width:null,height:null},attributes:{data:e,libraryItemProgress:{isProgress:!0,progress:20}}})},Ve=e=>new Promise((t=>{const n={tags:[],categories:[]},r=(0,Oe.select)("divi/cloud-app").getCloudToken(),o=[];e.forEach((e=>{(0,p.isEmpty)(e.terms)&&t(n),(0,p.forEach)(e.terms,(e=>{let t;switch(e.taxonomy){case"layout_tag":t={taxonomy:"tags",name:e.name},(0,p.find)(o,t)||o.push(t);break;case"layout_category":t={taxonomy:"categories",name:e.name},(0,p.find)(o,t)||o.push(t)}}))})),(0,p.isEmpty)(o)&&t(n);const i=[];let a=0;if((0,p.forEach)(o,(e=>{(0,p.get)(i,a)?(0,p.size)(i[a])>5&&(i[++a]=[]):i[a]=[],i[a].push(e)})),(0,p.isEmpty)(i))t(n);else{const e=[];(0,p.forEach)(i,(o=>{e.push((()=>{const e=[];(0,p.forEach)(o,(({name:t,taxonomy:o})=>{e.push(new Promise((e=>{e(je(t,o,r).then((e=>{(0,p.isEmpty)(e)||(({id:e,name:t,taxonomy:r})=>{n[r].push({id:e,name:t})})({name:t,...e})})))})))})),Promise.all(e).then((()=>{t(n)})).catch((e=>{console.log("error",e)}))}))})),e.reduce(((e,t)=>e.then(t).catch((e=>console.log("err",e)))),Promise.resolve()).catch((e=>{console.log("error",e)}))}})),Ge=async(e,t)=>{const{tags:n,categories:r}=await Ve(e.data),o=[];let i=0;const a=(0,Oe.select)("divi/cloud-app").getCloudToken(),s=(0,p.size)(e.data),c=_e.getData(["totalCloudItems"],0),u=be(a),l=(0,p.get)(u,"dcst","");let d=0;const f=()=>{window.ETCloudApp.emitSignal({signal:"showLimitExceededError",data:{}})};if("free"===l){if(50-c<s)return void f()}let h="";switch(t){case"split_layout":case"section":h="section";break;case"split_section":case"row":h="row";break;case"split_row":case"module":h="module"}if(e.data.forEach((t=>{let a=h,s=!1;const c=[],u=[],l={context:"et_builder",data:{1:t.post_content},presets:e.data.presets,global_colors:e.data.global_colors,images:e.data.images};if((0,p.isEmpty)(t.terms)||(0,p.forEach)(t.terms,(e=>{switch(e.taxonomy){case"layout_type":a=e.name;break;case"layout_category":{const t=(0,p.find)(r,["name",e.name]);(0,p.isUndefined)(t)||u.push(t.id)}break;case"layout_tag":{const t=(0,p.find)(n,["name",e.name]);(0,p.isUndefined)(t)||c.push(t.id)}break;case"module_width":s="fullwidth"===e.name}})),(0,p.size)(e.data)>1){const n={};(0,p.isEmpty)(e.images)||(0,p.forEach)(e.images,((e,r)=>{-1!==t.post_content.indexOf(r.toString())&&(n[r]=e)})),l.images=n}const d={title:t.post_title,content:JSON.stringify(l),categories:u,tags:c,meta:{},status:"publish",width:s?"fullwidth":""};(0,p.has)(t,"post_meta._et_pb_module_type")&&(d.meta._et_pb_module_type=t.post_meta._et_pb_module_type[0]),(0,p.has)(t,"post_meta._et_pb_row_layout")&&(d.meta._et_pb_row_layout=t.post_meta._et_pb_row_layout[0]),(0,p.get)(o,i)?(0,p.size)(o[i])>5&&(i++,o[i]=[]):o[i]=[],o[i].push({itemType:a,newCloudItem:d})})),!(0,p.isEmpty)(o)){const e=[];return o.forEach((n=>{e.push((()=>{const e=[];return n.forEach((n=>{const{itemType:r,newCloudItem:o}=n;e.push(new Promise((e=>{e(Ae(a,r,o,{}).then((e=>{(e=>{d++;const n=e.error&&"max_free_items"===e.error;(s===d||n)&&(n&&f(),t&&window.ETCloudApp.emitSignal({signal:"receiveItemUpdate",data:{data:{updateType:t}}}))})(e)})))})))})),Promise.all(e)}))})),e.reduce(((e,t)=>e.then(t).catch((e=>{console.log("err",e)}))),Promise.resolve())}},He=(e,t)=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/item-location",data:{id:e}},!0).then((e=>{t?.success&&t?.success(e)})).catch((e=>{console.log(e)}))};var $e=window.divi.fieldLibrary,Ke=window.divi.modal;const Qe=({username:e,apiKey:t,setUsername:n,setApiKey:r,retryAuthentication:o})=>i().createElement("div",{className:"et-vb-account-status-error__wrapper"},i().createElement("div",{className:"et-vb-account-status-error__content"},i().createElement("h2",null,(0,Ie.__)("Authentication Required","et_builder")),i().createElement("p",null,(0,Ie.__)("Before you can download Premade Layouts from the Divi Library you must authenticate your Elegant Themes subscription.","et_builder")),i().createElement("form",{onSubmit:e=>o(e)},i().createElement("div",{className:"et-vb-divi-library-authentication__username"},i().createElement(Ke.FieldWrapper,{label:"Username",description:"This is the username that you use to access the Members Area on elegantthemes.com."},i().createElement($e.Text,{value:e,name:"username",onChange:e=>n(e.inputValue)}))),i().createElement("div",{className:"et-vb-divi-library-authentication__api-key"},i().createElement(Ke.FieldWrapper,{label:"API Key",description:(0,Ie.__)('You can find your API Key <a href="https://www.elegantthemes.com/members-area/api/" target="_blank" rel="noreferrer">here</a>.',"et_builder")},i().createElement($e.Text,{value:t,name:"apikey",onChange:e=>r(e.inputValue)}))),i().createElement("div",{className:"et-common-divi-library-authentication__submit"},i().createElement(xe.Button,{type:"submit",isInverse:!0},(0,Ie.__)("Submit","et_builder")))))),Xe=()=>{const[e,t]=i().useState(""),[n,r]=i().useState("");return i().createElement(Qe,{username:e,apiKey:n,setUsername:t,setApiKey:r,retryAuthentication:t=>{t.preventDefault(),(0,Oe.dispatch)("divi/rest").setInProgress("update-account",!0),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/update-account",data:{username:e,apiKey:n,status:"active"}},!0).then((()=>(0,Oe.dispatch)("divi/rest").setInProgress("update-account",!1))).catch((e=>{console.log(e)})),window.ETCloudApp.retryUseLayout({et_username:e,et_api_key:n})}})};var Ze=window.divi.errorBoundary;const et=({pageTitle:e,onImportClick:t,onImportPresetsModalClose:n})=>{const[r,a]=(0,o.useState)(!0);return i().createElement(Ze.ErrorBoundary,{componentName:"et-vb-divi-modal--import-presets"},i().createElement(Ke.WrapperContainer,{modalName:"divi/import-presets-modal"},i().createElement("div",{className:"et-vb-import-presets-confirmation"},i().createElement(Ke.Header,{name:e,onClickCloseButton:n}),i().createElement("div",{className:"et-vb-modal-body"},i().createElement("div",{className:"et-vb-modal-body-wrap"},i().createElement("div",{className:"et-vb-modal-panel"},i().createElement("div",{className:"et-vb-modal-import-preset-content"},i().createElement("p",null,(0,Ie.__)("This layout contains global design presets. Check the box below to import these styles as presets, or leave it unchecked to bring them in as static styles.","et_builder"))),i().createElement("div",{className:"et-vb-modal-import-preset-checkbox"},i().createElement($e.Checkboxes,{name:"import-options-include-global-presets",options:[{label:(0,Ie.__)("Import Presets","et_builder"),value:"includeGlobalPresets"}],value:r?["includeGlobalPresets"]:[],onChange:({inputValue:e})=>a(e.length>0)}))))),i().createElement(Ke.Footer,{buttons:[{name:"import-preset",showIcon:!1,showLabel:!0,showTooltip:!1,label:(0,Ie.__)("Import","et_builder"),onClick:()=>{a(!r),t(r?"on":"off")}}]}))))},tt=((0,Ie.__)("Import Design Presets?","et_builder"),({title:e,description:t,onClose:n})=>i().createElement("div",{className:"et-prompt-box-wrapper"},i().createElement("div",{className:"et-prompt-box-container"},i().createElement(Ke.Header,{name:e,onClickCloseButton:n}),i().createElement(Ke.BodyContainer,null,t)))),nt=({appWindow:e,backButton:t,cloudToken:n,context:r,editPostImportContent:a,fetchLibraryItem:s,homeUrl:c,isFetchingLibraryData:u,isPageContentEmpty:l,isProductTour:d,libraryData:f,libraryDataTypeToFetch:h,libraryItem:y,modalLibraryClose:m,onCloudPageChanged:v,onCloudUseItem:g,onHelpClick:b,permanentFilter:_,purgeLibraryData:w,restSetInProgress:T,topWindow:E,updateLibraryTerms:S,updateLibraryItem:I,customPreferences:C={}})=>{const[O,k]=(0,o.useState)(!1),[P,D]=(0,o.useState)(!1),[x,A]=(0,o.useState)(!1),[j,L]=(0,o.useState)(null),[N,R]=(0,o.useState)(!1),[F,M]=(0,o.useState)(!1),[U,B]=(0,o.useState)("off"),[W,J]=(0,o.useState)(""),[z,Y]=(0,o.useState)(!1),[q,V]=(0,o.useState)({isShow:!1,title:"",description:""}),G=(0,o.useRef)(),H=(0,o.useRef)(!1),$=(0,o.useRef)(),K=()=>{switch(r){case"premade":return"modules_all";case"page":return"existing_pages";default:return"modules_library"}},Q=()=>{switch(r){case"module":case"row":case"section":return r;default:return"layout"}},X=()=>{switch(r){case"module":case"row":case"section":return!0;default:return!1}},Z=async(e,t)=>ze(e,"exported",Q(),L,t).then((t=>{const{content:n,page:r,totalPages:o,timestamp:i}=t;if(r&&o){return Z(e,{page:+r+1,timestamp:i,file:null})}return n})),ee=(e,t,n)=>{ze(e,"exported",Q(),L,n).then((n=>{const{content:r,page:o,totalPages:i,timestamp:a}=n;if(o&&i){return void ee(e,t,{page:+o+1,timestamp:a,file:null})}const s=(0,p.assign)(t,{content:r,updatedItem:e});window.ETCloudApp.emitSignal({signal:"receiveItemUpdate",data:{data:s}})})).catch((e=>{console.log(e)}))},te=()=>{D(!1),L(null),_e.addData([Q(),"modules_library","localItemsCached"],!1,!0),(0,Oe.dispatch)("divi/cloud-app").fetchLibraryData([Q()])},ne=e=>{window.ETCloudApp.emitSignal({signal:"receiveNewFilter",data:e});const t=e.data.localLibraryTerms;Object.keys(t).forEach((e=>{(0,Oe.dispatch)("divi/cloud-app").setLibraryTerms(e,t[e])}))},re=(e,t,n)=>{v&&v(t,n)},oe=(e,t,n)=>{const r=new FormData;r.append("post",window.DiviSettingsData.post.id),r.append("layout",e),r.append("file",""),r.append("context","et_builder"),r.append("include_global_presets","on"),r.append("replace",t);const o={replaceLayout:t,importBackUp:"off",importToCloud:"off",includeGlobalPresets:"off"},i=e=>{T("portability/import",!0),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/portability/import",data:e},!0).then((r=>{if(void 0!==r.page&&void 0!==r.totalPages){const t=e;t.append("page",String(Number(r.page)+1)),t.append("timestamp",r.timestamp),t.append("file",null);const n=Math.ceil(100*parseInt(r.page)/parseInt(r.totalPages));L(n),i(t)}else{if(!r.postContent)return;if(L(99),"on"===o?.replaceLayout&&m({name:"divi/module"}),r.globalColors){const e=(0,ke.extractGlobalColorIdsUsedInPresets)(r.presets),t=(0,De.extractGlobalColorIds)(r.postContent).concat(e);(0,Oe.dispatch)("divi/global-data").importGlobalColors((0,p.uniq)(t),r.globalColors)}let e={},i={};(0,Ce.maybeConvertPresetsData)(r.presets).then((t=>{if(r.presets&&"on"===n){const n=(0,ke.processPresets)(t);e=n.newIds,(0,Oe.dispatch)("divi/global-data").importPresets((0,ke.removeEmptyObjectRecursive)(n.presets,!0))}r.presets&&"on"!==o.includeGlobalPresets&&(i=(0,ke.getDefaultPresetAttrs)(t))})).catch((e=>{throw e})),g?g(Se()({content:(0,Ce.maybeConvertContent)(r?.postContent)}),"on"===t,"modules_all"===K()):a({content:(0,Ce.maybeConvertContent)(r?.postContent),importOptionsValues:o,presetIdsToReplace:e,defaultPresetAttrs:i}),L(100),setTimeout((()=>{m({name:"divi/load-layout"}),m({name:"divi/add-module"})}),1e3)}})).then((()=>T("portability/import",!1))).catch((e=>{console.log(e)}))};i(r)},ie=(e,t)=>{D(!0);const{item:n,replace_content:o}=(()=>{if((0,p.isObject)(t))return t;try{return JSON.parse(t)}catch(e){return{}}})(),i="on"===o&&!["module","row","section"].includes(r);if((0,p.isNumber)(n)){if("premade"!==r){const e=y.getIn([n]);e?(L(99),$.current=setTimeout((()=>{g&&g(e,i)}),1e3)):s(r,n,"processed",{progress:e=>{L((t=>e>t?e>99?99:e:t))},success:e=>{$.current=setTimeout((()=>{g&&g(e,i)}),1e3)}})}}else(0,p.isString)(n)&&((e,t)=>{B(t),J(e),(0,p.isEmpty)(JSON.parse(e)?.presets)?oe(e,t,"off"):M(!0)})(n,o)},ae=(e,t)=>{D(!0),Y(!0),L((e=>{if(null===e)return t;const n=Math.floor(t/2);return n>e?n:e})),200===t&&D(!1)},se=()=>{D(!1),k(!0)},ce=(e,t)=>{const{action:n,content:r,item:o}=t;if(n)switch(n){case"export":We(o,r);break;case"edit":(e=>{const{item:t,content:n,layoutType:r,userCloudId:o}=e,i=t.id;if(0===i)return;if(!n)return void E.open(`${c}?post_type=et_pb_layout&p=${i}&et_fb=1&PageSpeed=off`);const a=JSON.stringify(n),s=new FormData,u=new File([a],"layout.json",{type:"application/json"});s.append("file",u),s.append("context","et_builder"),s.append("include_global_presets","on"),L(25);const l=e=>{const t=s.get("post");L(75),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/portability/import",data:e},!0).then((n=>{if(void 0!==n.page&&void 0!==n.totalPages){const t=e;t.append("page",String(Number(n.page)+1)),t.append("timestamp",n.timestamp),t.append("file",null);const r=Math.ceil(100*parseInt(n.page)/parseInt(n.totalPages));L(r),l(t)}else{if(!n.postContent)return;const e=(0,Ce.maybeConvertContent)(n?.postContent),r={post_id:t,content:{post_content:e,header:null,body:null,footer:null},syncType:"publish"};L(95),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/sync-to-server",data:r},!0).then((()=>{E.open(`${c}?post_type=et_pb_layout&p=${t}&et_fb=1&PageSpeed=off&cloudItem=${i}&userCloudId=${o}`),D(!1),L(null),window.ETCloudApp.emitSignal({signal:"finishDownload",data:{}})})).catch((e=>console.log(e)))}})).catch((e=>{console.log(e)}))},d=new FormData;d.append("layout_name",`Edit Cloud Item: ${t.name}`),d.append("post_type","et_pb_layout"),d.append("layout_type",r),d.append("layout_content",a),L(50),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/create-item",data:d},!0).then((e=>{const{post_id:t}=e.layoutData,n=t;s.append("post",n),l(s)})).catch((e=>{D(!1),L(null),console.log(e)}))})(t);break;case"preview":qe(t);break;case"split_layout":case"split_section":case"split_row":(e=>{const{action:t,content:n,item:r}=e,o={clickedItem:r,isCloudItem:!0,itemPayload:{content:n,updateType:t}};setTimeout((()=>{L(null),D(!1),window.ETCloudApp.emitSignal({signal:"finishDownload",data:{}}),window.ETCloudApp.emitSignal({signal:"updateItem",data:o})}),999)})(t);break;case"convert_row_to_section":case"convert_module_to_row":case"convert_module_to_section":(e=>{D(!0),L(30),Fe(e,L,V).catch((({message:e})=>{D(!1),L(null),window.ETCloudApp.emitSignal({signal:"finishDownload",data:{}}),V({isShow:!0,title:(0,Ie.__)("Conversion Failed","et_builder"),description:e}),console.error("error",e)}))})(t)}},ue=(e,t)=>{S(t,{success:e=>{H.current=!0,window.ETCloudApp.emitSignal({signal:"receiveNewFilter",data:{data:e,success:!0}})}})},le=(e,t)=>{const n=t?.clickedItem?.id??0,r=t.itemPayload,o=r?.updateType,i="on"===r?.cloud;if("duplicate_premade_item"===o&&i)return void te();if(["duplicate","duplicate_premade_item","duplicate_and_delete"].includes(o)&&r.content){if("duplicate_premade_item"===o&&i)return;const e={payload:t,getCloudTab:K,getCloudContext:Q,setDownloadProgress:L,triggerLocalItemsUpdate:te,setDuplicateInProgress:R};return N?void setTimeout((()=>{Be(e)}),1e3):void Be(e)}if((0,p.includes)(["duplicate","duplicate_and_delete","split_layout","split_section","split_row"],o)&&r?.content){Ue({payload:t,layoutType:(e=>{switch(e){case"split_layout":return"section";case"split_section":return"row";case"split_row":return"module";default:return e}})(o),setDownloadProgress:L})}else if("save_existing_page"!==o)if("toggle_cloud"===o||"duplicate"===o&&"on"===r?.cloud||(0,p.includes)(["move_to","copy_to"],o))"toggle_cloud"===o?ee(n,r):console.log(`${o} action to be implemented here.`);else{if("toggle_fav"===o){const e=t.clickedItem?.is_favorite?"off":"on";(0,p.set)(t,"itemPayload.favoriteStatus",e)}I(t,{success:e=>{window.ETCloudApp.emitSignal({signal:"receiveItemUpdate",data:{data:e}})}})}else Z(n).then((e=>{const o={...t},a=t.clickedItem?.name;o.itemPayload.content=e,o.itemPayload.itemName=a;const s={payload:o,getCloudTab:K,getCloudContext:Q,setDownloadProgress:L,triggerLocalItemsUpdate:te,setDuplicateInProgress:R};if(i){const t=(0,p.assign)(r,{content:e,title:a,updatedItem:n});window.ETCloudApp.emitSignal({signal:"receiveItemUpdate",data:{data:t}})}else Be(s)})).catch((e=>console.log(e)))},de=(e,t)=>{He(t.id,{success:e=>{const t=e.localLibraryTerms??{layout_category:[],layout_tag:[]};if(!(0,p.isEmpty)(t)){const e={data:{filterType:"categories",localLibraryTerms:t,newFilters:t.layout_category}};ne(e);const n={data:{filterType:"tags",localLibraryTerms:t,newFilters:t.layout_tag}};ne(n)}}})},fe=()=>{Je({success:()=>{window.et_cloud_data.initialCloudStatus="on"}})},pe=()=>{(0,Oe.dispatch)("divi/cloud-app").setCloudToken(""),window.et_cloud_data.initialCloudStatus="off"},he=()=>{A(!0),n&&(window.ETCloudApp.setCloudToken(n),window.ETCloudApp.setSharedFolders())},ye=()=>{console.log("onHandleCloudAppConclude","@todo: To be developed")},me=()=>{console.log("onHandleCloudItemInProgress","@todo: To be developed")},ve=(e,t)=>{const{response:n,updateType:r}=t,o={context:"et_builder_layouts",data:n};let i="";switch(t.updateType){case"split_layout":i="section";break;case"split_section":i="row";break;case"split_row":i="module"}Ge(o,r).then((()=>{Ne(i)}))},ge=(e,t)=>{let n="";switch(t.updateType){case"split_layout":n="section";break;case"split_section":n="row";break;case"split_row":n="module"}Ne(n)},be=(e,t)=>{window.ETCloudApp.productTourSkipStep(t,Te()(E.document))};(0,o.useEffect)((()=>{const e=()=>{window.ETCloudApp.goTo("back")},n=G.current;return n&&n.forEach((t=>{t.removeEventListener("click",e)})),G.current=t,G.current?G.current.forEach((t=>{t.addEventListener("click",e)})):n&&e(),()=>{G.current&&G.current.forEach((t=>{t.removeEventListener("click",e)}))}}),[t]),(0,o.useEffect)((()=>{x&&"premade"===r&&window.ETCloudApp.toggleTab({tab:K(),items:{},itemsLabel:"",forceUpdateLocal:!1})}),[x,r]),(0,o.useEffect)((()=>{if(x&&"premade"!==r){let e;if(f){const t=f.getIn([r]);t&&(e={...t.asMutable({deep:!0})})}window.ETCloudApp.toggleTab({tab:K(),items:e,itemsLabel:"page"===r?(0,Ie.__)("Page","et_builder"):"",forceUpdateLocal:!1})}}),[x,r,JSON.stringify(f)]),(0,o.useEffect)((()=>(Te()(window).on("et_cloud_use_item",ie),()=>{Te()(window).off("et_cloud_use_item",ie)})),[r]),(0,o.useEffect)((()=>(Te()(window).on("et_cloud_page_changed",re),Te()(window).on("et_cloud_download_progress",ae),Te()(window).on("et_cloud_account_status_error",se),Te()(window).on("et_cloud_item_action",ce),Te()(window).on("et_cloud_filter_update",ue),Te()(window).on("et_cloud_update_item",le),Te()(window).on("et_cloud_item_toggle_location",de),Te()(window).on("et_cloud_token_ready",fe),Te()(window).on("et_cloud_token_removed",pe),Te()(window).on("et_cloud_app_ready",he),Te()(window).on("et_cloud_app_conclude",ye),Te()(window).on("et_cloud_item_in_progress",me),Te()(window).on("et_cloud_help",b),Te()(window).on("et_cloud_split_item_to_cloud",ve),Te()(window).on("et_cloud_library_refresh_after_split",ge),Te()(e).on("et-fb-product-tour-skip",be),(()=>{const e={animation:!1,context:Q(),initialTab:K(),globalSupport:X(),showLoadOptions:!(l||d||["module","row","section"].includes(r)),existingPagesTab:"existing_pages",editableTabs:["modules_library","existing_pages"],cloudTab:"modules_library",predefinedTab:"modules_all",isProductTour:d,permanentFilter:_,...C};Te()(window).trigger("et_cloud_container_ready",[e,E?.document])})(),()=>{!0===H.current&&w(),$.current&&clearTimeout($.current),Te()(window).off("et_cloud_page_changed",re),Te()(window).off("et_cloud_download_progress",ae),Te()(window).off("et_cloud_account_status_error",se),Te()(window).off("et_cloud_item_action",ce),Te()(window).off("et_cloud_filter_update",ue),Te()(window).off("et_cloud_update_item",le),Te()(window).off("et_cloud_item_toggle_location",de),Te()(window).off("et_cloud_token_ready",fe),Te()(window).off("et_cloud_token_removed",pe),Te()(window).off("et_cloud_app_ready",he),Te()(window).off("et_cloud_app_conclude",ye),Te()(window).off("et_cloud_item_in_progress",me),Te()(window).off("et_cloud_split_item_to_cloud",ve),Te()(window).off("et_cloud_library_refresh_after_split",ge),Te()(e).off("et-fb-product-tour-skip",be),Y(!1)})),[]);return i().createElement("div",{className:"et-vb-cloud-app-wrapper"},i().createElement("div",{id:"et-cloud-app",className:"et-vb-cloud-app-canvas"}),O&&!P&&i().createElement(Xe,null),P&&!F&&(z&&null!==j?i().createElement("div",{className:"et-vb-cloud-app-progress-bar"},i().createElement(xe.ProgressBar,{progress:j})):null),"premade"===r?null:h&&h.includes(r)&&u?i().createElement("div",{className:"et-vb-cloud-app-preload"},i().createElement(xe.Loading,null)):null,F&&i().createElement(et,{pageTitle:(0,Ie.__)("Import Design Presets?","et_builder"),onImportClick:e=>((e,t,n)=>{oe(t,n,e),M(!1)})(e,W,U),onImportPresetsModalClose:()=>{M(!1),Y(!1),L(null),D(!1),window.ETCloudApp.emitSignal({signal:"finishDownload",data:{}})}}),q.isShow&&i().createElement(tt,{title:q.title,description:q.description,onClose:()=>V({isShow:!1,title:"",description:""})}))};var rt=window.divi.window;const ot=e=>{const{backButton:t,context:n,libraryDataTypeToFetch:r,onCloudPageChanged:i,onCloudUseItem:a,permanentFilter:s,customPreferences:c}=e;let u=!1;const{fetchingData:l,isPageContentEmpty:d,cloudToken:f,libraryData:p,libraryItem:h,urls:y}=(0,Oe.useSelect)((e=>({fetchingData:r.filter((t=>e("divi/cloud-app").isFetchingLibraryData(t))),isPageContentEmpty:e("divi/edit-post").isContentEmpty(),cloudToken:e("divi/cloud-app").getCloudToken(),libraryData:e("divi/cloud-app").getLibraryData(),libraryItem:e("divi/cloud-app").getLibraryItem(),urls:e("divi/settings").getSetting("urls")}))),{homeUrl:m}=y,{fetchLibraryData:v,fetchLibraryItem:g,purgeLibraryData:b,updateLibraryTerms:_,updateLibraryItem:w}=(0,Oe.useDispatch)("divi/cloud-app"),{importContent:T}=(0,Oe.useDispatch)("divi/edit-post"),{close:E,open:S}=(0,Oe.useDispatch)("divi/modal-library"),{setInProgress:I}=(0,Oe.useDispatch)("divi/rest"),{setCurrentListName:C,setCurrentVideo:O}=(0,Oe.useDispatch)("divi/help");return(0,o.useEffect)((()=>{if(r){const e=r.filter((e=>!p||!p.getIn([e])));if(1>e.length)return;_e.addData([e,"modules_library","localItemsCached"],!1,!0),v(e)}}),[JSON.stringify(r),JSON.stringify(p)]),r&&0<l.length&&(u=!0),(0,o.createElement)(nt,{...e,backButton:t,context:n,libraryDataTypeToFetch:r,onCloudPageChanged:i,onCloudUseItem:a,permanentFilter:s,customPreferences:c,onHelpClick:()=>{C("divi/load-layout"),O(0),S({name:"divi/help"})},appWindow:(0,rt.getWindow)("app"),editPostImportContent:T,fetchLibraryData:v,fetchLibraryItem:g,isFetchingLibraryData:u,isPageContentEmpty:d,isProductTour:!1,cloudToken:f,libraryData:p,libraryItem:h,homeUrl:m,modalLibraryClose:E,purgeLibraryData:b,restSetInProgress:I,topWindow:(0,rt.getWindow)("top"),updateLibraryTerms:_,updateLibraryItem:w})},it=({context:e,onCloudUseItem:t})=>{const n=(0,rt.getWindow)("top");return(0,o.useEffect)((()=>{(()=>{const r="code_html"===e?(0,Ie.__)("HTML/JS Snippet","et_builder"):(0,Ie.__)("CSS Snippet","et_builder"),o="code_html"===e?(0,Ie.__)("Code Snippet","et_builder"):(0,Ie.__)("CSS Snippet","et_builder"),i={cloudTab:"modules_library",downloadItemInDetailsPage:!0,editorLabel:(0,Ie.__)("Edit Snippet","et_builder"),initialTab:"modules_library",showCodeSnippetPreview:!0,showHelpButton:!1,showLiveDemoBtn:!1,showLoadOptions:!0,shortLabel:(0,Ie.__)("Code Snippet","et_builder"),containerId:"et-cloud-app-snippets",modalType:"add",insertCodeCallback:t,itemsLabel:r,context:e,sidebarLabel:o};jQuery(window).trigger("et_code_snippets_container_ready",[{...i},n?.document])})()}),[]),i().createElement("div",{className:"et-vb-cloud-app-wrapper"},i().createElement("div",{id:"et-cloud-app-snippets",className:"et-vb-cloud-app-canvas et-vb-code-snippets-modal"}))};var at=window.divi.middleware;const st=e=>({type:"FETCH_LIBRARY_DATA",context:e}),ct=(e,t)=>({type:"FETCH_LIBRARY_DATA_LOG",context:e,inProgress:t}),ut=(e,t,n,r,o)=>({type:"FETCH_LIBRARY_ITEM",context:e,id:t,contentType:n,callbacks:r,additionalData:o}),lt=()=>({type:"PURGE_LIBRARY_DATA"}),dt=(e,t)=>({type:"SET_CLOUD_FETCH_IN_PROGRESS_STATUS",context:e,inProgress:t}),ft=e=>({type:"SET_CLOUD_FOLDERS",cloudFolders:e}),pt=(e,t)=>({type:"SET_CLOUD_TERMS",termsType:e,termsData:t}),ht=e=>({type:"SET_CLOUD_TOKEN",cloudToken:e}),yt=(e,t)=>({type:"SET_LIBRARY_DATA",context:e,data:t}),mt=(e,t)=>({type:"SET_LIBRARY_ITEM",id:e,data:t}),vt=(e,t)=>({type:"SET_LIBRARY_TERMS",termsType:e,termsData:t}),gt=e=>({type:"SET_USE_CLOUD_MODULE_TYPE",params:e}),bt=(e,t)=>({type:"UPDATE_LIBRARY_ITEM",data:e,callbacks:t}),_t=(e,t)=>({type:"UPDATE_LIBRARY_TERMS",data:e,callbacks:t}),wt={FETCH_LIBRARY_DATA:e=>{const t=e.context.filter((e=>!(0,Oe.select)("divi/cloud-app").isFetchingLibraryData(e)));0<t.length&&(t.forEach((e=>{(0,Oe.dispatch)("divi/cloud-app").fetchLibraryDataLog(e,!0)})),(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library",data:{type:t.join(","),exclude:(0,Oe.select)("divi/settings").getSetting(["post","id"])}},!0).then((e=>{t.forEach((t=>{t in e&&(0,Oe.dispatch)("divi/cloud-app").setLibraryData(t,e[t])}))})).catch((e=>{console.log(e)})).finally((()=>{t.forEach((e=>{(0,Oe.dispatch)("divi/cloud-app").fetchLibraryDataLog(e,!1)}))})))},FETCH_LIBRARY_ITEM:e=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/item",data:{id:e.id,libraryType:e.context,contentType:e.contentType,builtFor:(0,Oe.select)("divi/settings").getSetting(["post","type"]),...e.additionalData},onDownloadProgress:t=>{e?.callbacks?.progress&&e?.callbacks?.progress(t)}},!0).then((t=>{(0,Oe.dispatch)("divi/cloud-app").setLibraryItem(e.id,t),e?.callbacks?.success&&e?.callbacks?.success(Se()(t))})).catch((e=>{console.log(e)}))},UPDATE_LIBRARY_TERMS:e=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/update-terms",data:{data:e.data}},!0).then((t=>{if(t?.localLibraryTerms){Object.keys(t.localLibraryTerms).forEach((e=>{(0,Oe.dispatch)("divi/cloud-app").setLibraryTerms(e,t.localLibraryTerms[e])}))}e?.callbacks?.success&&e?.callbacks?.success(t)})).catch((e=>{console.log(e)}))},UPDATE_LIBRARY_ITEM:e=>{(0,Pe.loggedFetch)({method:"POST",restRoute:"/divi/v1/divi-library/update-item",data:{data:e.data}},!0).then((t=>{const n={categories:"layout_category",tags:"layout_tag"};if(t?.updatedTerms){Object.keys(t.updatedTerms).forEach((e=>{(0,Oe.dispatch)("divi/cloud-app").setLibraryTerms(n[e],t.updatedTerms[e])}))}e?.callbacks?.success&&e?.callbacks?.success(t)})).catch((e=>{console.log(e)}))}},Tt=(e,t)=>{switch(t.type){case"FETCH_LIBRARY_DATA_LOG":return e.setIn(["fetchLog",t.context],t.inProgress);case"PURGE_LIBRARY_DATA":return e.setIn(["libraryData"],{});case"SET_CLOUD_TOKEN":return e.setIn(["cloudToken"],t.cloudToken);case"SET_LIBRARY_DATA":return e.setIn(["libraryData",t.context],t.data);case"SET_LIBRARY_ITEM":return e.setIn(["libraryItem",t.id],t.data);case"SET_LIBRARY_TERMS":return e.setIn(["libraryTerms",t.termsType],t.termsData);case"SET_CLOUD_FOLDERS":return e.setIn(["cloudFolders"],t.cloudFolders);case"SET_CLOUD_TERMS":return e.setIn(["cloudTerms",t.termsType],t.termsData);case"SET_CLOUD_FETCH_IN_PROGRESS_STATUS":return e.setIn(["cloudFetchInProgressStatus",t.context],t.inProgress);case"SET_USE_CLOUD_MODULE_TYPE":return e.setIn(["useCloudModuleType"],t.params);default:return e}},Et=e=>e.getIn(["cloudFetchInProgressStatus"]),St=e=>e.getIn(["cloudFolders"]),It=e=>e.getIn(["cloudTerms"]),Ct=e=>e.getIn(["cloudToken"]),Ot=e=>e.getIn(["fetchLog"]),kt=e=>e.getIn(["libraryData"]),Pt=e=>e.getIn(["libraryItem"]),Dt=e=>e.getIn(["libraryTerms"]),xt=e=>e.getIn(["useCloudModuleType"]),At=(e,t)=>!!e.getIn(["fetchLog",t]),jt=Se()({libraryData:{},libraryItem:{},libraryTerms:{},fetchLog:{}}),Lt=()=>{if((0,Oe.select)("divi/cloud-app"))return;const n=(0,Oe.registerStore)("divi/cloud-app",{actions:e,reducer:Tt,selectors:t,initialState:jt});(0,at.applyEffects)(n,wt)}}(),(window.divi=window.divi||{}).cloudApp=r}();
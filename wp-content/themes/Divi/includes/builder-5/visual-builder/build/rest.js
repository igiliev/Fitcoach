!function(){var e={33042:function(e,t,r){var n;!function(){"use strict";var s=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),s={use_static:!1};function o(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function i(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}function a(e,t){i(e,t,(function(){throw new y("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(s.use_static=Boolean(t.use_static));var c="__immutable_invariants_hold";function u(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,c)))}function l(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],h=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),f=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),g=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function y(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function v(e,t){for(var r in i(e,c,!0),t)t.hasOwnProperty(r)&&a(e,t[r]);return Object.freeze(e),e}function m(e,t){var r=e[t];i(e,t,(function(){return H(r.apply(e,arguments))}))}function b(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&d(t)&&d(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var s=P.call(this);return s[e]=H(t),S(s)}y.prototype=new Error,y.prototype.constructor=Error;var w=H([]);function _(e,t,r){var n=e[0];if(1===e.length)return b.call(this,n,t,r);var s,o=e.slice(1),i=this[n];if("object"==typeof i&&null!==i)s=H.setIn(i,o,t);else{var a=o[0];s=""!==a&&isFinite(a)?_.call(w,o,t):F.call(C,o,t)}if(n in this&&i===s)return this;var c=P.call(this);return c[n]=s,S(c)}function S(e){for(var t in f){if(f.hasOwnProperty(t))m(e,f[t])}s.use_static||(i(e,"flatMap",O),i(e,"asObject",I),i(e,"asMutable",P),i(e,"set",b),i(e,"setIn",_),i(e,"update",N),i(e,"updateIn",B),i(e,"getIn",U));for(var r=0,n=e.length;r<n;r++)e[r]=H(e[r]);return v(e,h)}function T(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var s=e(this[t],t,this);Array.isArray(s)?r.push.apply(r,s):r.push(s)}return S(r)}function E(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=o(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return J(r)}function P(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(A(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function I(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var s=e(this[t],t,this),o=s[0],i=s[1];r[o]=i}return J(r)}function A(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,c)||e instanceof Date?e:H.asMutable(e,{deep:!0})}function L(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function j(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,s=Array.isArray(e),i=t&&t.deep,a=t&&t.mode||"merge",c=t&&t.merger;function u(e,n,s){var a,u=H(n[s]),p=c&&c(e[s],u,t),h=e[s];void 0===r&&void 0===p&&e.hasOwnProperty(s)&&l(u,h)||(l(h,a=void 0!==p?p:i&&d(h)&&d(u)?H.merge(h,u,t):u)&&e.hasOwnProperty(s)||(void 0===r&&(r=L(e,o(e))),r[s]=a))}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=L(e,o(e))),delete r[n])}if(s)for(var h=0,f=e.length;h<f;h++){var g=e[h];for(n in g)g.hasOwnProperty(n)&&u(void 0!==r?r:this,g,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&u(this,e,n);"replace"===a&&p(this,e)}return void 0===r?this:J(r)}function R(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return H.merge(this,e,{deep:r,mode:"replace"})}var D,x,k,C=H({});function F(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return $.call(this,n,t,r);var s,i=e.slice(1),a=this[n];if(s=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?H.setIn(a,i,t):F.call(C,i,t),this.hasOwnProperty(n)&&a===s)return this;var c=L(this,o(this));return c[n]=s,J(c)}function $(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&d(t)&&d(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var s=L(this,o(this));return s[e]=H(t),J(s)}function N(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return H.set(this,e,t.apply(n,[n].concat(r)))}function M(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function B(e,t){var r=Array.prototype.slice.call(arguments,2),n=M(this,e);return H.setIn(this,e,t.apply(n,[n].concat(r)))}function U(e,t){var r=M(this,e);return void 0===r?t:r}function G(e){var t,r=o(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=A(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function q(){return{}}function J(e){return s.use_static||(i(e,"merge",j),i(e,"replace",R),i(e,"without",E),i(e,"asMutable",G),i(e,"set",$),i(e,"setIn",F),i(e,"update",N),i(e,"updateIn",B),i(e,"getIn",U)),v(e,p)}function H(e,t,r){if(u(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(H);if(Array.isArray(e))return S(e.slice());if(e instanceof Date)return o=new Date(e.getTime()),s.use_static||i(o,"asMutable",T),v(o,g);var o,a=t&&t.prototype,c=(a&&a!==Object.prototype?function(){return Object.create(a)}:q)();if(null==r&&(r=64),r<=0)throw new y("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var l in r-=1,e)Object.getOwnPropertyDescriptor(e,l)&&(c[l]=H(e[l],void 0,r));return J(c)}function z(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function W(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return H.from=H,H.isImmutable=u,H.ImmutableError=y,H.merge=z(j),H.replace=z(R),H.without=z(E),H.asMutable=(D=G,x=P,k=T,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?x.apply(t,e):t instanceof Date?k.apply(t,e):D.apply(t,e)}),H.set=W($,b),H.setIn=W(F,_),H.update=z(N),H.updateIn=z(B),H.getIn=z(U),H.flatMap=z(O),H.asObject=z(I),s.use_static||(H.static=e({use_static:!0})),Object.freeze(H),H}();void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{abort:function(){return a},batchFetch:function(){return G},fail:function(){return i},fetch:function(){return A},getRestSeparator:function(){return ae},inProgress:function(){return s},loggedFetch:function(){return H},normalizeFormData:function(){return J},registerAjaxStore:function(){return ie},setBatchFetchDelay:function(){return q},success:function(){return o},useFetch:function(){return ce}});var e={};r.r(e),r.d(e,{addLog:function(){return p},resetState:function(){return h},setBatchLog:function(){return f},setInProgress:function(){return g},setLog:function(){return y},syncToServer:function(){return v},updateBatchLog:function(){return m},updateLog:function(){return b}});var t={};r.r(t),r.d(t,{getLastLog:function(){return re},getLog:function(){return ee},getLogs:function(){return ne},getUrl:function(){return te},isInProgress:function(){return Z}});const s="In Progress",o="Success",i="Fail",a="Abort";var c=r(33042),u=r.n(c),l=window.divi.data,d=window.divi.middleware;const p=(e,t,r)=>({type:"ADD_LOG",ajaxAction:e,requestData:t,responseData:r}),h=()=>({type:"RESET_STATE"}),f=(e,t,r,n)=>({type:"SET_BATCH_LOG",id:e,route:t,data:r,status:n}),g=(e,t)=>({type:"SET_ON_PROGRESS",ajaxAction:e,isInProgress:t}),y=(e,t,r,n,s)=>({type:"SET_LOG",route:e,data:t,response:r,status:n,batchId:s}),v=({syncType:e,signal:t})=>({type:"SYNC_TO_SERVER",syncType:e,signal:t}),m=(e,t,r,n)=>({type:"UPDATE_BATCH_LOG",id:e,route:t,data:r,status:n}),b=(e,t,r,n,s)=>({type:"UPDATE_LOG",route:e,data:t,response:r,status:n,batchId:s});var w=window.vendor.React,_=window.vendor.wp.hooks,S=window.vendor.wp.i18n,T=window.lodash;const O=(e,t)=>{-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e=(0,T.trimEnd)(e,"/");const r=(0,T.keys)((0,l.select)("divi/settings").getSetting(["nonces"])).find((t=>{t=(0,T.trimEnd)(t,"/");const r=e===t,n=t.includes("?P<")&&new RegExp(`^${t}$`).test(e);return r||n}));return r?(0,l.select)("divi/settings").getSetting(["nonces",r,t]):null},E=(e,t,r,n)=>{const s=Boolean(t),o=n&&n instanceof FormData,i=n&&"object"==typeof n,a=(0,T.flow)((e=>s?(e=>({...e,Accept:"application/json, */*;q=0.1"}))(e):e),(e=>!o&&i?(e=>({...e,"Content-Type":"application/json"}))(e):e),(e=>s?((e,t,r)=>(0,T.keys)(e).find((e=>"x-et-nonce"===e.toLowerCase()))?e:{...e,"X-ET-Nonce":O(t,r),"X-WP-Nonce":(0,l.select)("divi/settings").getSetting(["nonces","wp_rest","ALL"],"")})(e,t,r):e))(e);return a},P=()=>{const{restRootUrl:e}=(0,l.select)("divi/settings").getSetting("urls");if(!e)throw new Error("REST API endpoint not found.");return(0,T.trimEnd)(e,"/")},I=async(e,t,r,n)=>{const s=n&&"object"==typeof n,o=Boolean(t),i=await(0,T.cond)([[(0,T.constant)(o&&s&&"GET"===r),async()=>{const e=P(),r=((e,t,r)=>{const n=(0,T.mapValues)(e,(e=>(0,T.toString)(e))),s=`${t}?${new URLSearchParams(n).toString()}`;return-1!==r.indexOf("?")?s.replace("?","&"):s})(n,t,e);return new URL(`${e}${r}`)}],[(0,T.constant)(o),async()=>{const e=P();return new URL(`${e}${t}`)}],[(0,T.constant)(!o),async()=>new URL(e)]])();return i.href},A=async e=>{const{url:t,restRoute:r,parseResponse:n=!0,data:s,body:o,headers:i,method:a,timeout:c,responseType:u="json",signal:l,onDownloadProgress:d,...p}=e,h=new AbortController,f=h.signal;l&&l.addEventListener("abort",(()=>{h.abort()}),{once:!0});const g=c?window.setTimeout((()=>{h.abort()}),c):0,y=E(i,r,a,s),v=((e,t,r)=>t&&t instanceof FormData?t:"GET"!==r&&"HEAD"!==r&&t&&"object"==typeof t?JSON.stringify(t):e)(o,s,a),m=await I(t,r,a,s);return window.fetch(m,{...p,method:a,headers:y,body:v,signal:f}).then((e=>(g&&window.clearTimeout(g),e.ok?"stream"===u?new Response(((e,t,r)=>{const n=e.body.getReader();let s=0;const o=+e.headers.get("Content-Length");return new ReadableStream({start:e=>{const t=()=>{n.read().then((({done:n,value:i})=>{n?e.close():(s+=i.byteLength,r&&r(s/o*100),e.enqueue(i),t())})).catch((t=>{e.error(t)}))};t()},cancel:()=>t.abort()})})(e,h,d),{headers:e.headers}):e:Promise.reject(e)))).then((e=>n?e.json?e.json():Promise.reject(e):e))};let L=1e3;const j={},R={},D={},x={},k={},C={},F={},$={},N=e=>{const t=F[e]?.length??0;if(!t)return!1;return(k[e]?.length??0)+(C[e]?.length??0)+(x[e]?.length??0)===t},M=e=>{const t=j[e],r=R[e],n=x[e]?.length??0,s=F[e]?.length??0,o=n&&s&&n===s;delete j[e],delete R[e],delete D[e],delete x[e],delete F[e],delete $[e],delete k[e],o&&(r&&clearTimeout(r),t instanceof AbortController&&t.abort())},B=e=>{R[e]&&clearTimeout(R[e]),R[e]=setTimeout((()=>{(e=>{D[e]=!0,j[e]=new AbortController,A({restRoute:`${e}/batch`,method:"POST",data:{data:$[e]},signal:j[e].signal}).then((t=>{if(!Array.isArray(t))throw new Error("Response is not an array");if(t.length!==$[e].length)throw new Error("Response length does not match the request length");window.dispatchEvent(new CustomEvent(`divi:batchFetch:success:${e}`,{detail:t}))})).catch((t=>{("AbortError"!==t?.name||D[e])&&window.dispatchEvent(new CustomEvent(`divi:batchFetch:error:${e}`,{detail:t}))})).finally((()=>{window.dispatchEvent(new CustomEvent(`divi:batchFetch:complete:${e}`))}))})(e)}),L)},U=(e,t)=>{const r=((e,t)=>{(0,T.has)(F,e)||(F[e]=[]);const r=F[e].length;return F[e].push(t),r})(e,t),n=((e,t)=>((0,T.has)($,e)||($[e]=[]),$[e].find((e=>(0,T.isEqual)(e,t)))||$[e].push(t),$[e].findIndex((e=>(0,T.isEqual)(e,t)))))(e,t);return B(e),{requestIndex:r,responseIndex:n}},G=e=>{const{restRoute:t,data:r,signal:n}=e;if(D[t])return A(e);const{requestIndex:s,responseIndex:o}=U(t,r);return new Promise(((e,r)=>{const i=r=>{((e,t)=>{(0,T.has)(F,[e,t])&&((0,T.has)(k,e)||(k[e]=[]),k[e].push(t))})(t,s),N(t)&&M(t),e(r.detail[o])},a=e=>{((e,t)=>{(0,T.has)(F,[e,t])&&((0,T.has)(C,e)||(C[e]=[]),C[e].push(t))})(t,s),N(t)&&M(t),r(e.detail)},c=()=>{window.removeEventListener(`divi:batchFetch:success:${t}`,i),window.removeEventListener(`divi:batchFetch:error:${t}`,a),window.removeEventListener(`divi:batchFetch:complete:${t}`,c)},u=()=>{c(),((e,t)=>{(0,T.has)(F,[e,t])&&((0,T.has)(x,e)||(x[e]=[]),x[e].push(t))})(t,s),N(t)&&M(t);try{n.throwIfAborted()}catch(e){r(e)}};window.addEventListener(`divi:batchFetch:success:${t}`,i,{once:!0}),window.addEventListener(`divi:batchFetch:error:${t}`,a,{once:!0}),window.addEventListener(`divi:batchFetch:complete:${t}`,c,{once:!0}),n&&n.addEventListener("abort",u,{once:!0})}))},q=e=>{L=e},J=e=>{if(e instanceof FormData){const t={};return e.forEach(((e,r)=>{t[r]=e})),t}return e},H=async(e,t,r)=>{const n=J(e.data),a=(0,l.select)("divi/rest").getLastLog(e.restRoute,n);if(!t&&a&&s!==a.status)return a.response;(0,l.dispatch)("divi/rest").setLog(e.restRoute,n,Promise.resolve(),s);return(r?G({...e,data:n}):A(e)).then((t=>((0,l.dispatch)("divi/rest").updateLog(e.restRoute,n,t,o),t))).catch((t=>((0,l.dispatch)("divi/rest").updateLog(e.restRoute,n,t,i),t)))};let z;const W=()=>{const e=(0,l.select)("divi/modal-library").getActiveModals({returnedProperties:["name","dimension","dimensionMinimum","offset","toggleTimestamp","canBeSavedOnWorkspace"]}),t=(0,l.select)("divi/app-ui").extractWorkspace({activeModals:e});return{id:"last-use",label:(0,S.__)("Last Used","et_builder"),window:t.window,appFramePseudoWrapper:t.appFramePseudoWrapper,elements:t.elements,sidebarRows:t.sidebarRows,view:t.view,breakpoint:t.breakpoint,attributeState:t.attributeState,interactionLayers:t.interactionLayers,activeFloatingModals:t.activeFloatingModals}},Y={SYNC_TO_SERVER:[e=>{if((0,l.select)("divi/rest").isInProgress(`sync-to-server--${e.syncType}`))return;const t=(0,l.select)("divi/settings").getSetting(["post","id"]),r=(0,l.select)("divi/settings").getSetting(["conditionalTags"]),n=(0,l.select)("divi/settings").getSetting(["layout","type"]),s=(0,l.select)("divi/page-settings").getSettings(),o=(0,l.select)("divi/settings").getSetting(["version"]),i=(0,l.select)("divi/app-preferences").getAll(),a=(0,l.select)("divi/app-ui").getWindow("width","top"),c=(0,l.select)("divi/app-ui").getWindow("height","top"),u=(0,l.select)("divi/app-ui").getElementProperty({elementName:"adminBar",propertyGroup:"dimension",propertyName:"height"}),d=(0,l.select)("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),p=(0,l.select)("divi/app-ui").getElementProperty({elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),h=(0,l.select)("divi/app-ui").getElementProperty({elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),f=(0,_.hasAction)("et.builder.content.change"),g=(e=>{switch(e.syncType){case"draft":return{postStatus:"draft",postType:e.postType};case"preview":return{postStatus:e.postStatus,postType:"revision"};default:return{postStatus:"publish",postType:e.postType}}})({syncType:e.syncType,postType:(0,l.select)("divi/settings").getSetting(["post","type"]),postStatus:(0,l.select)("divi/settings").getSetting(["post","status"])});let y=(0,l.select)("divi/serialized-post").getState(["postContent","content"]);"et_pb_layout"===g.postType&&(y=((e,t)=>{const r=(e,t)=>{const r=e.exec(t);return r?r[2].trim():t},n=e=>new RegExp(`\x3c!-- wp:divi\\/${e}(.*?)--\x3e([\\s\\S]*?)\x3c!-- \\/wp:divi\\/${e} --\x3e`,"gs"),s=n("section"),o=n("placeholder");switch(t){case"section":e=r(o,e);break;case"row":e=r(s,e);break;case"module":{let t=r(n("column"),e);if(t===e){const n=r(s,e);n&&(t=n)}e=t;break}}return e})(y,n));const v={post_id:t,post_status:g.postStatus,layout_type:n,et_post_type:g.postType,return_to_default_editor:!1,options:{status:g.postStatus,conditional_tags:r,post_type:g.postType,return_rendered_content:f},unsyncedGlobalSettings:"none",et_builder_mode:"vb",et_builder_version:o,ab_testing:{is_clear_stats:!1},preferences:i,pageSettings:s,content:{post_content:y,header:(0,l.select)("divi/serialized-post").getState(["header","content"]),body:(0,l.select)("divi/serialized-post").getState(["body","content"]),footer:(0,l.select)("divi/serialized-post").getState(["footer","content"])},syncType:e.syncType,workspace:{"last-used":W()}},m=()=>{const t=(0,S.__)("Your Save Has Failed","et_builder"),r=[(0,w.createElement)("p",{key:"p1"},(0,S.__)("An error has occurred while saving your page. Various problems can cause a save to fail, such as a lack of server resources, firewall blockages, plugin conflicts or server misconfiguration. You can try saving again by clicking Try Again, or you can download a backup of your unsaved page by clicking Download Backup. Backups can be restored using the portability system while next editing your page.","et_builder")),(0,w.createElement)("p",{key:"p2"},(0,S.__)("Contacting your host and asking them to increase the following PHP variables may help: memory_limit, max_execution_time, upload_max_filesize, post_max_size, max_input_time, max_input_vars. In addition, auditing your firewall error log (such as ModSecurity) may reveal false positives that are preventing saves from completing.","et_builder")),(0,w.createElement)("p",{key:"p3"},(0,S.__)("Lastly, it is recommended that you temporarily disable all WordPress plugins and browser extensions and try to save again to determine if something is causing a conflict.","et_builder"))];(0,l.dispatch)("divi/modal-library").open({name:"divi/alert",offset:{top:(c-u-d-400)/2,left:(a-h-p-320)/2},dimension:{width:320,height:400},attributes:{title:t,content:r,footerButtons:[{name:"try-again",buttonColor:"primary",label:(0,S.__)("Try Again","et_builder"),onClick:t=>{t.preventDefault(),(0,l.dispatch)("divi/modal-library").close({name:"divi/alert"}),(0,l.dispatch)("divi/rest").syncToServer({syncType:e.syncType})}},{name:"backup",label:(0,S.__)("Download Backup","et_builder"),onClick:e=>{e.preventDefault(),alert("@todo: Create backup functionality along with Portability feature.")}}]}})};(0,l.dispatch)("divi/rest").setInProgress("sync-to-server",!0),(0,l.dispatch)("divi/rest").setInProgress(`sync-to-server--${e.syncType}`,!0),H({method:"POST",restRoute:"/divi/v1/sync-to-server",data:v,signal:e.signal},!0).then((({save_verification:e,post_status:r,syncType:n,previewUrl:s})=>{if(s=(0,_.applyFilters)("divi.rest.syncToServer.previewUrl",s),"preview"===n&&s&&(!z||z?.closed?z=window.open(s,`divi-preview-${t}`):z.location.href=s,z?.focus()),e){if(r){const e=(0,l.select)("divi/settings").getSetting(["post"]);(0,l.dispatch)("divi/settings").add("post",e.setIn(["status"],r))}(0,l.dispatch)("divi/history").setSavedState({content:v.content.post_content,settings:v.pageSettings})}else m()})).then((()=>{(0,l.dispatch)("divi/rest").setInProgress("sync-to-server",!1),(0,l.dispatch)("divi/rest").setInProgress(`sync-to-server--${e.syncType}`,!1)})).catch((t=>{t instanceof Error&&"AbortError"===t.name||m(),(0,l.dispatch)("divi/rest").setInProgress("sync-to-server",!1),(0,l.dispatch)("divi/rest").setInProgress(`sync-to-server--${e.syncType}`,!1)}))}]};var V=window.moment,X=r.n(V);const K={log:[],logs:[],batchLogs:[],inProgress:{}},Q=(e,t)=>{switch(t.type){case"SET_ON_PROGRESS":return e.setIn(["inProgress",t.ajaxAction],t.isInProgress);case"ADD_LOG":return e.setIn(["log"],(e=>e.push({ajaxAction:t.ajaxAction,requestData:t.requestData,responseData:t.responseData,timestamp:X()().unix()})));case"RESET_STATE":return e.merge(K);case"SET_LOG":return e.setIn(["logs",e.getIn(["logs"]).length],{route:t.route,data:t.data,response:t.response,status:t.status,batchId:t.batchId,timestamp:X()().valueOf()});case"UPDATE_LOG":{const r=(0,T.findLastIndex)(e.getIn(["logs"]),(e=>t.route===e.route&&JSON.stringify(t.data)===JSON.stringify(e.data)));return e.setIn(["logs",r],{route:t.route,data:t.data,response:t.response,status:t.status,batchId:t.batchId,timestamp:X()().valueOf()})}case"SET_BATCH_LOG":return e.setIn(["batchLogs",e.getIn(["batchLogs"]).length],{id:t.id,route:t.route,data:t.data,status:t.status,timestamp:X()().valueOf()});case"UPDATE_BATCH_LOG":{const r=(0,T.findLastIndex)(e.getIn(["batchLogs"]),(e=>t.route===e.route&&JSON.stringify(t.data)===JSON.stringify(e.data)));return e.setIn(["batchLogs",r],{id:t.id,route:t.route,data:t.data,status:t.status,timestamp:X()().valueOf()})}default:return e}},Z=(e,t)=>t?(0,T.isArray)(t)?(0,T.some)(t,(t=>e.getIn(["inProgress",t],!1))):e.getIn(["inProgress",t],!1):(0,T.some)((0,T.values)(e.getIn(["inProgress"])),(e=>e)),ee=(e,t)=>e.getIn(["log"]).filter((e=>!t||e.ajaxAction===t)),te=e=>e.getIn(["url"]),re=(e,t,r,n,s)=>(0,T.findLast)(e.getIn(["logs"]),(e=>(!t||t===e.route)&&((!r||JSON.stringify(r)===JSON.stringify(e.data))&&((!n||n===e.status)&&(!s||s===e.batchId))))),ne=(e,t,r,n,s)=>e.getIn(["logs"]).filter((e=>(!t||t===e.route)&&((!r||JSON.stringify(r)===JSON.stringify(e.data))&&((!n||n===e.status)&&(!s||s===e.batchId))))),se=(e,t)=>t?.path&&!(0,T.isEmpty)(t.path)?e.getIn(t?.path):e,oe={};window?.DiviRestData?.debug?.storeStateModal&&(oe.debugState=se);const ie=()=>{if((0,l.select)("divi/rest"))return;const r=u()({url:(0,l.select)("divi/settings").getSetting(["urls","ajax"]),...K}),n=(0,l.registerStore)("divi/rest",{actions:e,reducer:Q,selectors:{...t,...oe},initialState:r});(0,d.applyEffects)(n,Y)},ae=()=>""+(P().includes("?rest_route=")?"&":"?"),ce=(e=null,t=!1)=>{const[r,n]=(0,w.useState)(e),[s,o]=(0,w.useState)(t),i=new AbortController,{signal:a}=i,c=()=>{i.abort()};(0,w.useEffect)((()=>()=>{c()}),[]);return{fetch:async e=>{const{url:t,restRoute:r,parseResponse:s,data:i,body:c,headers:u,method:l,timeout:d,responseType:p,onDownloadProgress:h,forceRequest:f=!1,batchRequest:g=!1,...y}=e;return o(!0),H({url:t,restRoute:r,parseResponse:s,data:i,body:c,headers:u,method:l,timeout:d,responseType:p,onDownloadProgress:h,signal:a,...y},f,g).then((e=>(a.aborted||(o(!1),n(e)),e))).catch((e=>(o(!1),e.name,Promise.reject(e))))},response:r,abort:c,isLoading:s}}}(),(window.divi=window.divi||{}).rest=n}();
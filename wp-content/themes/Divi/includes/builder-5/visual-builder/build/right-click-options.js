/*! For license information please see right-click-options.js.LICENSE.txt */
!function(){var t={33042:function(t,e,r){var i;!function(){"use strict";var o=function t(e){var r,i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function s(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function a(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function n(t,e){a(t,e,(function(){throw new h("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var l="__immutable_invariants_hold";function d(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,l)))}function p(t,e){return t===e||t!=t&&e!=e}function u(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var c=["setPrototypeOf"],g=c.concat(["push","pop","sort","splice","shift","unshift","reverse"]),b=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),m=c.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function h(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function y(t,e){for(var r in a(t,l,!0),e)e.hasOwnProperty(r)&&n(t,e[r]);return Object.freeze(t),t}function f(t,e){var r=t[e];a(t,e,(function(){return H(r.apply(t,arguments))}))}function v(t,e,r){var i=r&&r.deep;if(t in this&&(i&&this[t]!==e&&u(e)&&u(this[t])&&(e=H.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var o=w.call(this);return o[t]=H(e),_(o)}h.prototype=new Error,h.prototype.constructor=Error;var M=H([]);function A(t,e,r){var i=t[0];if(1===t.length)return v.call(this,i,e,r);var o,s=t.slice(1),a=this[i];if("object"==typeof a&&null!==a)o=H.setIn(a,s,e);else{var n=s[0];o=""!==n&&isFinite(n)?A.call(M,s,e):L.call(x,s,e)}if(i in this&&a===o)return this;var l=w.call(this);return l[i]=o,_(l)}function _(t){for(var e in b){if(b.hasOwnProperty(e))f(t,b[e])}o.use_static||(a(t,"flatMap",I),a(t,"asObject",P),a(t,"asMutable",w),a(t,"set",v),a(t,"setIn",A),a(t,"update",R),a(t,"updateIn",$),a(t,"getIn",W));for(var r=0,i=t.length;r<i;r++)t[r]=H(t[r]);return y(t,g)}function C(){return new Date(this.getTime())}function I(t){if(0===arguments.length)return this;var e,r=[],i=this.length;for(e=0;e<i;e++){var o=t(this[e],e,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return _(r)}function k(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=s(this);for(var i in this)this.hasOwnProperty(i)&&!1===t(this[i],i)&&(r[i]=this[i]);return z(r)}function w(t){var e,r,i=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)i.push(O(this[e]));else for(e=0,r=this.length;e<r;e++)i.push(this[e]);return i}function P(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},i=this.length;for(e=0;e<i;e++){var o=t(this[e],e,this),s=o[0],a=o[1];r[s]=a}return z(r)}function O(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,l)||t instanceof Date?t:H.asMutable(t,{deep:!0})}function N(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function T(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,i,o=Array.isArray(t),a=e&&e.deep,n=e&&e.mode||"merge",l=e&&e.merger;function d(t,i,o){var n,d=H(i[o]),c=l&&l(t[o],d,e),g=t[o];void 0===r&&void 0===c&&t.hasOwnProperty(o)&&p(d,g)||(p(g,n=void 0!==c?c:a&&u(g)&&u(d)?H.merge(g,d,e):d)&&t.hasOwnProperty(o)||(void 0===r&&(r=N(t,s(t))),r[o]=n))}function c(t,e){for(var i in t)e.hasOwnProperty(i)||(void 0===r&&(r=N(t,s(t))),delete r[i])}if(o)for(var g=0,b=t.length;g<b;g++){var m=t[g];for(i in m)m.hasOwnProperty(i)&&d(void 0!==r?r:this,m,i)}else{for(i in t)Object.getOwnPropertyDescriptor(t,i)&&d(this,t,i);"replace"===n&&c(this,t)}return void 0===r?this:z(r)}function E(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return H.merge(this,t,{deep:r,mode:"replace"})}var S,j,G,x=H({});function L(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var i=t[0];if(1===t.length)return F.call(this,i,e,r);var o,a=t.slice(1),n=this[i];if(o=this.hasOwnProperty(i)&&"object"==typeof n&&null!==n?H.setIn(n,a,e):L.call(x,a,e),this.hasOwnProperty(i)&&n===o)return this;var l=N(this,s(this));return l[i]=o,z(l)}function F(t,e,r){var i=r&&r.deep;if(this.hasOwnProperty(t)&&(i&&this[t]!==e&&u(e)&&u(this[t])&&(e=H.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var o=N(this,s(this));return o[t]=H(e),z(o)}function R(t,e){var r=Array.prototype.slice.call(arguments,2),i=this[t];return H.set(this,t,e.apply(i,[i].concat(r)))}function D(t,e){for(var r=0,i=e.length;null!=t&&r<i;r++)t=t[e[r]];return r&&r==i?t:void 0}function $(t,e){var r=Array.prototype.slice.call(arguments,2),i=D(this,t);return H.setIn(this,t,e.apply(i,[i].concat(r)))}function W(t,e){var r=D(this,t);return void 0===r?e:r}function B(t){var e,r=s(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=O(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function V(){return{}}function z(t){return o.use_static||(a(t,"merge",T),a(t,"replace",E),a(t,"without",k),a(t,"asMutable",B),a(t,"set",F),a(t,"setIn",L),a(t,"update",R),a(t,"updateIn",$),a(t,"getIn",W)),y(t,c)}function H(t,e,r){if(d(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===i)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(H);if(Array.isArray(t))return _(t.slice());if(t instanceof Date)return s=new Date(t.getTime()),o.use_static||a(s,"asMutable",C),y(s,m);var s,n=e&&e.prototype,l=(n&&n!==Object.prototype?function(){return Object.create(n)}:V)();if(null==r&&(r=64),r<=0)throw new h("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var p in r-=1,t)Object.getOwnPropertyDescriptor(t,p)&&(l[p]=H(t[p],void 0,r));return z(l)}function U(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function K(t,e){return function(){var r=[].slice.call(arguments),i=r.shift();return Array.isArray(i)?e.apply(i,r):t.apply(i,r)}}return H.from=H,H.isImmutable=d,H.ImmutableError=h,H.merge=U(T),H.replace=U(E),H.without=U(k),H.asMutable=(S=B,j=w,G=C,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?j.apply(e,t):e instanceof Date?G.apply(e,t):S.apply(e,t)}),H.set=K(F,v),H.setIn=K(L,A),H.update=U(R),H.updateIn=U($),H.getIn=U(W),H.flatMap=U(I),H.asObject=U(P),o.use_static||(H.static=t({use_static:!0})),Object.freeze(H),H}();void 0===(i=function(){return o}.call(e,r,e,t))||(t.exports=i)}()},93967:function(t,e){var r;!function(){"use strict";var i={}.hasOwnProperty;function o(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];r&&(t=a(t,s(r)))}return t}function s(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return o.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var r in t)i.call(t,r)&&t[r]&&(e=a(e,r));return e}function a(t,e){return e?t?t+" "+e:t+e:t}t.exports?(o.default=o,t.exports=o):void 0===(r=function(){return o}.apply(e,[]))||(t.exports=r)}()}},e={};function r(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};!function(){"use strict";r.r(i),r.d(i,{RightClickOptions:function(){return Z},RightClickOptionsContainer:function(){return jt},filterAttributesByType:function(){return q},getAttributesByCategory:function(){return A},getBaseMenuItem:function(){return V},getColorPickerOptions:function(){return Rt},getExtendGroupOptions:function(){return U},getGradientStopOptions:function(){return $t},getMenuItemContent:function(){return $},getModalDraggableChildModuleListOptions:function(){return Wt},getModalFieldOptions:function(){return Vt},getModalGroupOptions:function(){return Ht},getModalGroupTabOptions:function(){return Kt},getModalTabOptions:function(){return Xt},getModifiedOptionGroups:function(){return N},getModuleLabelById:function(){return p},getModuleOptions:function(){return Jt},getOptionOnClickPath:function(){return u},getParentMenu:function(){return E},getPasteFieldAttrName:function(){return c},getPasteGroupOptions:function(){return R},getPasteModuleOptionNoun:function(){return g},getPastePosition:function(){return m},getResetGroupOptions:function(){return S},getRightClickOptions:function(){return Qt},getTargetModuleAttrsMaps:function(){return K},getUniqSelectedModuleIds:function(){return h},hasAttributesToReset:function(){return C},hasCopyModuleOption:function(){return y},hasPasteFieldOption:function(){return f},hasPasteFieldToGroupOption:function(){return v},hasPasteGroupToGroupOption:function(){return M},hasRelevantAttributesToPaste:function(){return _},isModuleTypesMatch:function(){return D},normalizeCategorizationKey:function(){return O},normalizePresetGroupName:function(){return P},onClickCloneModule:function(){return tt},onClickCopyField:function(){return et},onClickCopyGroup:function(){return rt},onClickCopyGroupTab:function(){return it},onClickCopyModule:function(){return ot},onClickCopyModuleAttributes:function(){return st},onClickCopyModuleStyle:function(){return at},onClickDeleteColumn:function(){return lt},onClickDeleteModule:function(){return nt},onClickDisableGlobal:function(){return pt},onClickEditModule:function(){return ct},onClickExpandAndActivateLayerModules:function(){return ut},onClickExtendAttributes:function(){return yt},onClickPasteAttributes:function(){return Mt},onClickPasteAttrsToAttrs:function(){return mt},onClickPasteFieldAttrToAttr:function(){return ft},onClickPasteFieldAttrToFlexibleAttr:function(){return vt},onClickPasteGroupAttrsToFlexibleGroupAttrs:function(){return At},onClickPasteModule:function(){return _t},onClickRemoveModule:function(){return It},onClickResetAttributes:function(){return kt},onClickSaveToLibrary:function(){return Ct},onClickUndoRedoOptions:function(){return St},onCloseRightClickOptions:function(){return wt},onMount:function(){return Nt},onOptionMouseEnter:function(){return Tt},onUnmount:function(){return Et},registerGroupPreset:function(){return k},registerRightClickOptionsStore:function(){return Ce},resetOptionGroup:function(){return T},selectChild:function(){return te},selectNext:function(){return ee},selectParent:function(){return re},selectPrev:function(){return ie},set:function(){return oe},setOwnerData:function(){return se},setSelected:function(){return ae},unset:function(){return ne},updateGroupPreset:function(){return w}});var t={};r.r(t),r.d(t,{selectChild:function(){return te},selectNext:function(){return ee},selectParent:function(){return re},selectPrev:function(){return ie},set:function(){return oe},setOwnerData:function(){return se},setSelected:function(){return ae},unset:function(){return ne}});var e={};r.r(e),r.d(e,{getState:function(){return pe},isActive:function(){return de},isModuleRightClicked:function(){return Me},isRightClickMenuActiveForField:function(){return Ae}});var o=window.vendor.React,s=r.n(o),a=window.lodash,n=window.vendor.wp.i18n,l=window.divi.window,d=window.divi.data;const p=(t,e="")=>{const r=(0,d.select)("divi/edit-post").getModuleName(t)||e,i=(0,d.select)("divi/module-library").getModule(r);let o=(0,a.get)(i,"title",""),s=(0,a.get)(i,"titles","");if("divi/shortcode-module"===r){const e=(0,d.select)("divi/edit-post").getModule(t),r=(0,d.select)("divi/settings").getSetting(["shortcodeModuleDefinitions",e?.props?.attrs.shortcodeName]);o=r?.name??"",s=r?.plural??""}return{structure:o?"structure"===(0,a.get)(i,"category")?o:(0,n.__)("Module","et_builder"):"",structures:s?"structure"===(0,a.get)(i,"category")?s:(0,n.__)("Modules","et_builder"):"",name:o}},u=(t,e)=>{if((0,a.isEqual)([0],t))return["options",String(e),"onClick"];const r=[].concat(t).splice(1).join("-children-").split("-");return["options"].concat(r).concat(["children",String(e),"onClick"])},c=({attrName:t,subName:e,attrsMaps:r,groupName:i})=>{const o=e?t.split(".").concat(e.split(".")):[t];return(0,a.has)(r,["attrsStructureMap"].concat(o))?t:(0,a.get)(r,["attrsGroupNameMap",i,e,0])},g=({clipboardType:t,moduleId:e,moduleIds:r,moduleName:i})=>"module"===t?(0,a.get)(p(e,i),"structure"):(0,a.get)(p(r[0],i),"structures");var b=window.divi.moduleUtils;const m=({ownerParentModuleType:t,ownerModuleType:e,clipboardModuleType:r})=>(0,b.isValidChild)(t,r)?"after":!!(0,b.isValidChild)(e,r)&&"inside",h=({moduleId:t,selectedModuleIds:e})=>(0,a.isArray)(e)?(0,a.uniq)(e.concat([t])):[t],y=t=>{const{isCloneable:e,selectedModuleIds:r}=t;if(!e)return!1;if(1===r.length)return!0;const i=(0,d.select)("divi/edit-post").getModulesByIds(r);return 1===(0,b.extractModuleTypes)(i,{"fullwidth-section":"section","specialty-section":"section"}).length},f=({fieldName:t,clipboardItemFieldName:e,fieldOptions:r,clipboardItemFieldOptions:i})=>!!t&&(!!e&&(t===e&&(0,a.isEqual)(r,i))),v=({clipboardItem:t,attrsMaps:e})=>{if((0,a.isObject)(t)&&"moduleFieldAttribute"===t.clipboardType){const r=(0,a.get)(t,["payload"]),i=(0,a.get)(r,["attrName"]),o=(0,a.get)(r,["subName"]),s=(0,a.get)(r,["groupName"]),n=o?i.split(".").concat([o]):[i],l=(0,a.has)(e,["attrs"].concat(n)),d=!(0,a.isEmpty)((0,a.get)(e,["attrsGroupNameMap",s,o]));return l||d}return!1},M=t=>{const{modalName:e,modalTab:r,groupId:i,groupName:o,clipboardItem:s}=t;if((0,a.isObject)(s)&&"moduleGroupAttributes"===s.clipboardType){const{payload:t}=s,a=e===t.modalName,n=r===t.modalTab,l=i===t.groupId,d=o===(t.groupName||t.groupId),p=a&&d&&l;return a&&n&&l||p}return!1},A=t=>{const e={},r={},i={};return Object.entries(t).forEach((([t,o])=>{if("groupPreset"===t)i.groupPreset=o;else if("modulePreset"===t)i.modulePreset=o;else if("object"==typeof o&&null!==o){if("module"===t){const i=o,s={},a={};return Object.entries(i).forEach((([t,e])=>{if("meta"===t)s[t]=e;else if("advanced"===t&&"object"==typeof e&&null!==e){const r=e;"link"in r&&(s[t]={link:r.link});const i={...r};delete i.link,Object.keys(i).length>0&&(a[t]=i)}else a[t]=e})),Object.keys(s).length>0&&Object.assign(e,{[t]:s}),void(Object.keys(a).length>0&&Object.assign(r,{[t]:a}))}const i={},s={};Object.entries(o).forEach((([t,e])=>{"innerContent"===t?i[t]=e:s[t]=e})),Object.keys(i).length>0&&Object.assign(e,{[t]:i}),Object.keys(s).length>0&&Object.assign(r,{[t]:s})}else Object.assign(r,{[t]:o})})),{contentAttrs:e,styleAttrs:r,presetAttrs:i}},_=(t,e,r,i)=>{const o=i.attrs?.asMutable?.({deep:!0})||{},s=i.attributeType;let a=!1,n=!1,l=!1;if((0,b.isNonEmptyObject)(o)){const{contentAttrs:t,styleAttrs:e}=A(o);a=(0,b.isNonEmptyObject)(e),n=(0,b.isNonEmptyObject)(t),l="groupPreset"in o||"modulePreset"in o}else"fieldAttr"in i&&("content"===s?n=!0:"style"===s&&(a=!0));switch(r){case"content":return n;case"style":return a;case"preset":return l;case"design":return a||l;case"all":return a||n||l;default:return!1}},C=(t,e,r)=>{const i=(0,d.select)("divi/edit-post").getModuleAttrs(t);if(!i)return!1;const o=r?.attrsMaps;if(!o)return!1;if(e.includes("preset")){const t=i.modulePreset&&i.modulePreset.length>0,e=i.groupPreset&&Object.values(i.groupPreset).some((t=>t?.getIn(["presetId"])));if(t||e)return!0}if(e.includes("style")){const t=o.attrsCategoryMap?.style;if(t){if(Object.entries(t).some((([t])=>!t.includes("innerContent")&&(0,b.isNonEmptyObject)(i.getIn(t.split("."))))))return!0}}if(e.includes("content")){const t=o.attrsCategoryMap?.content;if(t){if(Object.entries(t).some((([t])=>(0,b.isNonEmptyObject)(i.getIn(t.split("."))))))return!0}}return!1};var I=window.divi.clipboard;const k=t=>{const{payload:e}=t.clipboardItem,{groupId:r}=e;if(!r)return!1;const i=(e.groupPreset||e.attrs?.groupPreset)?.[r];if(!i)return!1;(0,d.dispatch)("divi/edit-post").editGroupPresetAttr({id:t.targetModuleId,attrName:r,value:{presetId:i.presetId??null,groupName:i.groupName}});const o=(0,d.select)("divi/edit-post").getContent()?.asMutable({deep:!0}),s=(0,b.populateUsedGroupPresets)(o);return(0,d.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:s}),!0},w=({moduleId:t,presetPath:e,presetValue:r})=>{let i=(0,d.select)("divi/edit-post").getModuleAttrs(t);i=i.setIn(["groupPreset",e],r);const{groupPreset:o}=i;let s=null;if(o){const e=(0,I.convertGroupPreset)({clipboardItem:{payload:{groupPreset:o}},targetModuleId:t});e&&"object"==typeof e&&"groupPreset"in e&&(s={groupPreset:e.groupPreset})}const a=s?i.set("groupPreset",s.groupPreset):i;(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(t,a,"user",!0),s?.groupPreset&&Object.entries(s.groupPreset).forEach((([e])=>{k({clipboardItem:{payload:{attrs:i,groupPreset:s.groupPreset,groupId:e}},targetModuleId:t,attributeType:"preset"})}))},P=t=>{let e=(0,b.getAttributeCategorizationKey)(t);return e=(0,b.camelCaseToLabel)(e),e=e.replace(/Content/g,"Body").replace(/Font/g,"Body").replace(/Html/g,"HTML").replace(/Css/g,"CSS").replace(/Attributes/g,"").replace(/^(Design|Advanced|Content|Module)\s?/,""),e},O=t=>{const e=(0,b.getAttributeCategorizationKey)(t).replace(/^(design|advanced|content)/i,"");return e.charAt(0).toLowerCase()+e.slice(1)},N=(t,e="all")=>{const r=A(t.asMutable?.({deep:!0})??{}),{contentAttrs:i,styleAttrs:o,presetAttrs:s}=r,a={},n=t=>{t&&"object"==typeof t&&Object.entries(t).forEach((([t,e])=>{if(e&&"object"==typeof e){if("module"===t)return void Object.entries(e).forEach((([,t])=>{t&&"object"==typeof t&&Object.keys(t).forEach((t=>{const e=(0,b.getAttributeCategorizationKey)(t);e&&(a[e]={hasPreset:!1,hasModifiedValues:!0})}))}));const r=(0,b.getAttributeCategorizationKey)(t);r&&(a[r]={hasPreset:!1,hasModifiedValues:!0})}}))},l=()=>{s.groupPreset&&Object.entries(s.groupPreset).forEach((([t,e])=>{if(!e||"object"!=typeof e||!("presetId"in e)||null===e.presetId)return;const r=(0,b.getAttributeCategorizationKey)(t);r&&(a[r]?a[r].hasPreset=!0:a[r]={hasPreset:!0,hasModifiedValues:!1})}))};switch(e){case"design":n(o),l();break;case"style":n(o);break;case"content":n(i);break;case"preset":l();break;case"all":n(o),n(i),l()}return Object.entries(a).map((([t,{hasPreset:e,hasModifiedValues:r}])=>({path:t,hasPreset:e,hasModifiedValues:r})))},T=({moduleId:t,groupPath:e,attrsMaps:r,resetPreset:i=!1,type:o="style"})=>{const s=(0,d.select)("divi/edit-post").getModule(t);if(!s)return;const a=s.props?.attrs;if(!a)return;let n=a;if(("preset"===o||i)&&a.groupPreset){const t={},r=a.groupPreset;Object.keys(r).forEach((i=>{(i.startsWith("module.")?i.endsWith(e):i.startsWith(e))||(t[i]=r[i])})),n=n.set("groupPreset",t)}if("preset"!==o&&r?.attrsCategoryMap?.all){const t={},i=r.attrsCategoryMap.all;Object.entries(i).forEach((([r,i])=>{(r.startsWith("module.")?r.endsWith(e):r.startsWith(e))&&(t[r]=i)})),n=(0,I.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:t,targetAttrsMap:t,targetAttrs:n})}(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(t,n,"user",!0),(0,d.dispatch)("divi/right-click-options").unset()},E=(t,e,r,i)=>({name:t,label:e,onClick:()=>{(0,d.dispatch)("divi/right-click-options").unset()},enable:r,...i&&i.length>0?{children:i}:{}}),S=({moduleId:t,moduleAttrs:e,attrsMaps:r,type:i,resetPreset:o,label:s})=>{const a=N(e,i),l=[];return a.forEach((({path:e,hasPreset:s})=>{if("preset"===i&&!s)return;const a="preset"===i?P(e):(0,b.normalizeOptionGroupName)(e);l.push(((t,e,r,i,o,s)=>({name:`reset-${t}-group-${e.replace(/\./g,"-")}`,label:(0,n.sprintf)((0,n.__)("Reset %1$s %2$s","et_builder"),r,"preset"===t?(0,n.__)("Preset","et_builder"):(0,n.__)("Attributes","et_builder")),onClick:()=>T({moduleId:i,groupPath:e,attrsMaps:o,resetPreset:"preset"===t||"design"===t||s,type:t})}))(i,e,a,t,r,o))})),E(`reset-select-${i}-groups`,s,l.length>0,l.length>0?l:[])};var j=r(33042),G=r.n(j);const x=(t,e)=>{Object.values(t).forEach((t=>{(0,b.isPlainObject)(t)&&Object.keys(t).forEach((t=>{const r=(0,b.getAttributeCategorizationKey)(t);e(r)}))}))},L=(t,e,r,i)=>({name:`paste-${t}-${e.toLowerCase()}`,label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),r),onClick:i});let F=()=>{};const R=({owner:t,clipboardPayload:e,attributeType:r,label:i})=>{const o=[],s=e&&"function"==typeof e.getIn?e.getIn(["attrs"]):e?.attrs,a=s?A(s.asMutable?.({deep:!0})??s):null,{contentAttrs:l,styleAttrs:p,presetAttrs:u}=a??{contentAttrs:{},styleAttrs:{},presetAttrs:{}},c=e&&"function"==typeof e.getIn?e.getIn(["attrsMap"])||{}:e?.attrsMap||{},g=t?.attrsMaps?.attrsCategoryMap?.all||{};if("preset"===r)return u.groupPreset&&Object.keys(u.groupPreset).length>0&&Object.entries(u.groupPreset).forEach((([e,r])=>{if(!r||null===r.presetId)return;const i=P(e);o.push({name:`paste-preset-${i}`,label:(0,n.sprintf)((0,n.__)("Paste %1$s Preset","et_builder"),i),onClick:()=>{w({moduleId:t.id,presetPath:e,presetValue:r}),(0,d.dispatch)("divi/right-click-options").unset()}})})),E(`paste-select-${r}-attributes`,i,o.length>0,o);if("design"===r){const e=new Set;return Object.entries(p).forEach((([t,r])=>{if((0,b.isPlainObject)(r)&&Object.keys(r).length>0)if("module"===t)x(r,(t=>e.add(t)));else{const r=(0,b.getAttributeCategorizationKey)(t);e.add(r)}})),u.groupPreset&&Object.keys(u.groupPreset).forEach((t=>{const r=(0,b.getAttributeCategorizationKey)(t);r&&e.add(r)})),e.forEach((e=>{const i=P(e);o.push(L("design",e,i,(()=>{if(F(t,r,{sourceAttrsMap:c,sourceAttrs:G()(p),targetModuleId:t.id,targetAttrsMap:g,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(t.id),styleGroup:e}),u.groupPreset){const r=Object.keys(u.groupPreset).find((t=>(0,b.getAttributeCategorizationKey)(t)===e));if(r){const e=u.groupPreset[r];w({moduleId:t.id,presetPath:r,presetValue:e})}}(0,d.dispatch)("divi/right-click-options").unset()})))})),E(`paste-select-${r}-attributes`,i,o.length>0,o)}const m=new Set,h="style"===r?p:l;return Object.entries(h).forEach((([e,i])=>{if((0,b.isPlainObject)(i)&&Object.keys(i).length>0)if("module"===e)x(i,(e=>{if(!m.has(e)){m.add(e);const i=(0,b.normalizeOptionGroupName)(e);o.push(L(r,e,i,(()=>{F(t,r,{sourceAttrsMap:c,sourceAttrs:G()(h),targetModuleId:t.id,targetAttrsMap:g,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(t.id),styleGroup:e}),(0,d.dispatch)("divi/right-click-options").unset()})))}}));else{const i=(0,b.getAttributeCategorizationKey)(e);if(!m.has(i)){m.add(i);const e=(0,b.normalizeOptionGroupName)(i);o.push(L(r,i,e,(()=>{F(t,r,{sourceAttrsMap:c,sourceAttrs:G()(h),targetModuleId:t.id,targetAttrsMap:g,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(t.id),styleGroup:i}),(0,d.dispatch)("divi/right-click-options").unset()})))}}})),E(`paste-select-${r}-attributes`,i,o.length>0,o)},D=(t,e)=>{const r=(0,d.select)("divi/edit-post").getModule(t)?.name,i=e?.name;return r===i},$=t=>s().createElement(s().Fragment,null,t.label,t.shortcut&&s().createElement("span",{className:"et-vb-right-click-option-shortcut"},t.shortcut.join(" ")));var W=r(93967),B=r.n(W);const V=({option:t,parent:e,optionIndex:r,selected:i,selectedParent:n,onOptionMouseEnter:d,onOptionClick:p,showChildren:u,children:c=null})=>{const g=r===i&&(0,a.isEqual)(e,n),b=!(t?.enable??1),m=(0,a.has)(t,"children");return s().createElement(o.Fragment,{key:`right-click-option-${t.name}`},t.topSeparator&&s().createElement("span",{className:"et-vb-right-click-option-separator"}),s().createElement("span",{className:B()({"et-vb-right-click-option-wrap":!0,"et-vb-right-click-option-wrap--active":g,"et-vb-right-click-option-wrap--disabled":b,"et-vb-right-click-option-wrap--has-children":m})},s().createElement("button",{type:"button",className:"et-vb-right-click-option",onClick:l.handleOnClickFallback,value:t.name,onMouseEnter:d,onMouseDown:p,"aria-label":t.label},$(t)),u&&c),t.bottomSeparator&&s().createElement("span",{className:"et-vb-right-click-option-separator"}))},z=(t,e)=>{Object.values(t).forEach((t=>{(0,b.isPlainObject)(t)&&Object.keys(t).forEach((t=>{const r=(0,b.getAttributeCategorizationKey)(t);e(r)}))}))},H=(t,e,r,i)=>({name:`extend-${t}-${e.toLowerCase()}`,label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),r),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:i,attributes:{defaultOptionGroup:e,defaultAttributeType:t},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()}}),U=({owner:t,attributeType:e,label:r})=>{const i=[],o=(0,d.select)("divi/edit-post").getModuleAttrs(t.id),s=o?A(o.asMutable?.({deep:!0})??{}):null,{contentAttrs:a,styleAttrs:l,presetAttrs:p}=s??{contentAttrs:{},styleAttrs:{},presetAttrs:{}};if("preset"===e)return p.groupPreset&&Object.keys(p.groupPreset).length>0&&Object.entries(p.groupPreset).forEach((([e,r])=>{if(!r||null===r.presetId)return;const o=(0,b.getAttributeCategorizationKey)(e),s=P(e);i.push({name:`extend-preset-${s}`,label:(0,n.sprintf)((0,n.__)("Extend %1$s Preset","et_builder"),s),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:t.id,attributes:{defaultOptionGroup:o,defaultAttributeType:"preset"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()}})})),E(`extend-select-${e}-attributes`,r,i.length>0,i);if("design"===e){const o=new Set;return Object.entries(l).forEach((([t,e])=>{if((0,b.isPlainObject)(e)&&Object.keys(e).length>0)if("module"===t)z(e,(t=>o.add(t)));else{const e=(0,b.getAttributeCategorizationKey)(t);o.add(e)}})),p.groupPreset&&Object.keys(p.groupPreset).forEach((t=>{const e=(0,b.getAttributeCategorizationKey)(t);e&&o.add(e)})),o.forEach((e=>{const r=P(e);i.push(H("design",e,r,t.id))})),E(`extend-select-${e}-attributes`,r,i.length>0,i)}const u=new Set,c="style"===e?l:a;return Object.entries(c).forEach((([r,o])=>{if((0,b.isPlainObject)(o)&&Object.keys(o).length>0)if("module"===r)z(o,(r=>{if(!u.has(r)){u.add(r);const o=(0,b.normalizeOptionGroupName)(r);i.push(H(e,r,o,t.id))}}));else{const o=(0,b.getAttributeCategorizationKey)(r);if(!u.has(o)){u.add(o);const r=(0,b.normalizeOptionGroupName)(o);i.push(H(e,o,r,t.id))}}})),E(`extend-select-${e}-attributes`,r,i.length>0,i)},K=t=>{const e=(0,d.select)("divi/edit-post").getModule(t),r=(0,d.select)("divi/edit-post").getModuleAttrs(t);if(!e||!r)return null;const i=(0,d.select)("divi/edit-post").getModuleName(t),o=(0,I.getComponentAttrsMapsId)({attrsMapsType:"module",moduleName:i}),s=(0,d.select)("divi/clipboard").getComponentAttrsMaps(o)?.getIn(["attrsMaps"]),a=s?.asMutable({deep:!0})||null;return{targetModule:e,targetAttrs:r,targetModuleName:i,targetAttrsMaps:a,targetAttrsMapForNormalization:a?.attrsCategoryMap?.all||{}}},q=(t,e)=>{if(!t||"object"!=typeof t)return{};let r;r=(0,b.isImmutableObject)(t)?t.asMutable({deep:!0}):t;const i=A(r),{contentAttrs:o,styleAttrs:s,presetAttrs:a}=i;let n;switch(e){case"content":n=o;break;case"style":n=s;break;case"design":n={...s,...a};break;case"preset":n=a;break;default:n={...a};new Set([...Object.keys(o),...Object.keys(s)]).forEach((t=>{const e=o[t],r=s[t];e&&r&&"object"==typeof e&&"object"==typeof r?n[t]={...e,...r}:e?n[t]=e:r&&(n[t]=r)}));break}return n},X=s().memo((({options:t,parent:e,selected:r,selectedParent:i,parentElement:a,windowHeight:n,renderOption:l})=>{const d=(0,o.useRef)(null),[p,u]=(0,o.useState)(0),c=i.concat([r]).join("-"),g=e.join("-"),b=c.startsWith(g);return(0,o.useEffect)((()=>{if(d.current&&a){const t=a.getBoundingClientRect(),e=d.current.offsetHeight,r=t.top+e,i=Math.max(0,r-n);u(i>0?-i:0)}}),[a,n]),s().createElement("div",{ref:d,className:"et-vb-right-click-option-children",style:{top:p,visibility:b?"visible":"hidden",pointerEvents:b?"auto":"none"}},t.map(((t,e)=>l(t,e))))})),Y=s().memo((({option:t,parent:e,optionIndex:r,selected:i,selectedParent:n,onOptionMouseEnter:l,windowHeight:d})=>{const p=(0,o.useRef)(null),u=(0,a.isArray)(t.children),c=(0,o.useCallback)((()=>{l(e,r)}),[l,e,r]);return s().createElement("span",{ref:p},V({option:t,parent:e,optionIndex:r,selected:i,selectedParent:n,onOptionMouseEnter:c,onOptionClick:t?.enable??1?t.onClick:a.noop,showChildren:u,children:u&&p.current?s().createElement(X,{options:t.children,parent:e.concat([r]),selected:i,selectedParent:n,parentElement:p.current,windowHeight:d,renderOption:(t,o)=>s().createElement(Y,{key:t.name,option:t,parent:e.concat([r]),optionIndex:o,selected:i,selectedParent:n,onOptionMouseEnter:l,windowHeight:d})}):null}))})),J=s().memo((({option:t,parent:e,optionIndex:r,selected:i,selectedParent:n,onOptionMouseEnter:l,windowHeight:d})=>{const p=(0,o.useRef)(null),u=(0,a.isArray)(t.children),c=(0,o.useCallback)((()=>{l(e,r)}),[l,e,r]);return s().createElement("span",{ref:p},V({option:t,parent:e,optionIndex:r,selected:i,selectedParent:n,onOptionMouseEnter:c,onOptionClick:t?.enable??1?t.onClick:a.noop,showChildren:u,children:u&&p.current?s().createElement(X,{options:t.children,parent:e.concat([r]),selected:i,selectedParent:n,parentElement:p.current,windowHeight:d,renderOption:(t,o)=>s().createElement(Y,{key:t.name,option:t,parent:e.concat([r]),optionIndex:o,selected:i,selectedParent:n,onOptionMouseEnter:l,windowHeight:d})}):null}))})),Z=({cursorPosition:t,windowHeight:e,windowWidth:r,options:i,selected:d,selectedParent:p,appWindowOffset:u,onMount:c=a.noop,onUnmount:g=a.noop,onOptionsContextMenu:b=a.noop,onOverlayClick:m=a.noop,onOverlayContextMenu:h=a.noop,adminBarHeight:y,builderBarWidth:f,pageBarHeight:v,sidebarLeftWidth:M,windowLocation:A="top",zoomScale:_,onOptionMouseEnter:C=a.noop})=>{const I=(0,o.useRef)(null),[k,w]=(0,o.useState)(0),[P,O]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(0,a.isFunction)(c)&&c();const t=new ResizeObserver((t=>{t.forEach((t=>{const e=t.contentRect.width;e!==k&&(w(e),O(!0))}))}));return I.current&&t.observe(I.current),()=>{(0,a.isFunction)(g)&&g(),t.disconnect()}}),[c,g,k]);const N=(({appWindowOffsetLeft:t,cursorX:e,windowWidth:r,builderBarWidth:i,sidebarLeftWidth:o,windowLocation:s,zoomScale:a,menuWidth:n})=>{const l=e-(e>r-n?n:0);return{property:"left",value:"app"===s?l*a+i+o+t:l}})({cursorX:t.x,appWindowOffsetLeft:u.left,windowWidth:r,builderBarWidth:f,sidebarLeftWidth:M,windowLocation:A,zoomScale:_,menuWidth:k}),T=(({cursorY:t,windowHeight:e,appWindowOffsetTop:r,adminBarHeight:i,pageBarHeight:o,windowLocation:s,zoomScale:a})=>{const n="app"===s?t*a:t,l=n>e/2?"bottom":"top",d="app"===s?i+o:0;return{property:l,value:"top"===l?n+d:e-n-r-d}})({cursorY:t.y,windowHeight:e,appWindowOffsetTop:u.top,adminBarHeight:y,pageBarHeight:v,windowLocation:A,zoomScale:_}),E=r-t.x<2*k?"left":"right";return s().createElement(s().Fragment,null,s().createElement("div",{ref:I,className:`et-vb-right-click-options et-vb-right-click-options--${T.property} et-vb-right-click-options-children-direction--${E}`,style:{[N.property]:N.value,[T.property]:T.value,opacity:P?1:0},onContextMenu:b},i.map(((t,r)=>((t,e,r,i,o,a,n)=>{const l=s().createElement(J,{option:t,parent:e,optionIndex:r,selected:i,selectedParent:o,onOptionMouseEnter:a,windowHeight:n});return t?.url?s().createElement("a",{href:t.url,key:t.name},l):s().createElement("span",{key:t.name},l)})(t,[0],r,d,p,C,e)))),s().createElement("div",{className:"et-vb-right-click-overlay",role:"button",tabIndex:0,"aria-label":(0,n.__)("Right Click Options Overlay","et_builder"),onKeyDown:a.noop,onClick:l.handleOnClickFallback,onContextMenu:h,onMouseDown:m}))};var Q=window.divi.uiLibrary;const tt=(t,e,r)=>{const i={id:t,moduleAppearanceSettings:(0,d.select)("divi/module-library").getModuleAppearanceSettings(),themeBuilderLayout:(0,d.select)("divi/settings").getSetting(["themeBuilder","layout"]),moduleCount:(0,d.select)("divi/module").getModuleCount()};r?(0,d.dispatch)("divi/edit-post").cloneColumn(i):(0,d.dispatch)("divi/edit-post").cloneModule(i,e),(0,d.dispatch)("divi/right-click-options").unset()},et=({attrName:t,subName:e,moduleId:r,modalName:i,modalTab:o,fieldName:s,fieldOptions:a,fieldLabel:n,groupName:l,moduleObject:p})=>{const u=(0,b.getModuleAttributeValue)(t,p),c=u?(0,b.extractFieldAttrValue)(u,e):{};(0,d.dispatch)("divi/clipboard").addItem({origin:r,clipboardType:"moduleFieldAttribute",payload:{attrName:t,subName:e,moduleId:r,modalName:i,modalTab:o,fieldName:s,fieldOptions:a,fieldLabel:n,groupName:l,fieldAttr:c,attributeType:(0,I.getCopyType)(o,l)}}),(0,d.dispatch)("divi/right-click-options").unset()},rt=({origin:t,moduleId:e,modalName:r,modalTab:i,groupId:o,groupLabel:s,groupName:a,attrsGroupNameMap:n,attrsMap:l,attrs:p})=>{const u=(0,d.select)("divi/edit-post").getModuleAttrs(e),c=(0,j.asMutable)(u,{deep:!0})?.groupPreset,g=(0,I.getCopyType)(i,a),b=c?.[o],m={moduleId:e,modalName:r,modalTab:i,groupId:o,groupLabel:s,groupName:a,attrsGroupNameMap:n,attrsMap:l,attrs:{...p,...b?{groupPreset:{[o]:b}}:{}},attributeType:g};(0,d.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"moduleGroupAttributes",payload:m}),(0,d.dispatch)("divi/right-click-options").unset()},it=({origin:t,moduleId:e,modalName:r,groupId:i,groupTabLabel:o,groupTabName:s,attrsMap:a,attrsGroupNameMap:n,attrs:l})=>{(0,d.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"moduleGroupTabAttributes",payload:{moduleId:e,modalName:r,groupId:i,groupTabLabel:o,groupTabName:s,attrsMap:a,attrsGroupNameMap:n,attrs:l}}),(0,d.dispatch)("divi/right-click-options").unset()},ot=({moduleId:t})=>{(0,I.copyModuleToClipboard)(t),(0,d.dispatch)("divi/right-click-options").unset()},st=t=>{const{id:e,attrsMaps:r}=t,i=(0,d.select)("divi/edit-post").getModuleAttrs(e).asMutable({deep:!0}),o=(0,b.removeEmptyObjectRecursive)(i),s=(0,a.get)(r,["attrsCategoryMap","all"]),n=(0,a.get)(r,["fieldLabelsMap"],{});(0,d.dispatch)("divi/clipboard").addItem({origin:e,clipboardType:"moduleAttributes",payload:{moduleId:e,moduleLabel:(0,a.get)(p(e),["name"]),attrsMap:s,attrs:o,attributeType:"all",fieldLabelsMap:n}}),(0,d.dispatch)("divi/right-click-options").unset()},at=({moduleId:t,moduleLabel:e,attrsMap:r,attrs:i})=>{const o=(0,d.select)("divi/edit-post").getModuleName(t),s=(0,I.buildFieldLabelsMap)({name:o});(0,d.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"moduleAttributes",payload:{moduleId:t,moduleLabel:e,attrsMap:r,attrs:i,attributeType:"style",fieldLabelsMap:s}}),(0,d.dispatch)("divi/right-click-options").unset()},nt=t=>{(0,d.dispatch)("divi/edit-post").removeModule(t),(0,d.dispatch)("divi/right-click-options").unset()},lt=t=>{(0,d.dispatch)("divi/edit-post").removeColumn(t),(0,d.dispatch)("divi/right-click-options").unset()};function dt(t){const{globalModule:e}=(0,d.select)("divi/edit-post").getModuleAttrs(t);if(e)return t;const r=(0,d.select)("divi/edit-post").getModule(t);return r.parent?dt(r.parent):null}const pt=({moduleId:t})=>{const e=dt(t);(0,d.dispatch)("divi/edit-post").disableGlobalModule(e),(0,d.dispatch)("divi/right-click-options").unset()},ut=t=>{(0,d.select)("divi/edit-post").getAncestorModules(t).forEach((t=>{(0,d.dispatch)("divi/modal-library").setLayersViewModule({moduleId:t?.id,data:{expand:!0,active:!1}})})),(0,d.dispatch)("divi/modal-library").setLayersViewActiveModuleId(t)},ct=(t,e)=>{const r="divi/shortcode-module"===e?"divi/module-shortcode":"divi/module";(0,d.dispatch)("divi/modal-library").open({owner:t,name:r}),(0,d.dispatch)("divi/right-click-options").unset(),ut(t)},gt=(t,e,r,i)=>{let o=q(t,e);return"all"!==r&&(o=(0,b.filterAttributeMaps)(o,r)),"all-modified"!==i&&(o=((t,e)=>{const r=(0,a.get)(t,e);return void 0===r?{}:(0,b.createImmutableAttrs)({attr:r,propertyPath:e.split(".")}).asMutable({deep:!0})})(o,i)),o};function bt({sourceAttrs:t,targetAttrsMap:e}){const r=t.getIn(["title","innerContent"]),i=e["title.innerContent"];function o(t){return!!t&&"object"==typeof t&&"value"in t}const s=r&&Object.values(r).every((t=>o(t)&&"string"==typeof t.value)),a=r&&Object.values(r).every((t=>o(t)&&"object"==typeof t.value&&"text"in t.value)),n=""===i||void 0===i;if(s&&(i&&"object"==typeof i&&"text"in i)){const e=Object.fromEntries(Object.entries(r).map((([t,e])=>[t,{value:{text:e.value}}])));return t.setIn(["title","innerContent"],e)}if(a&&n){const e=Object.fromEntries(Object.entries(r).map((([t,e])=>[t,{value:e.value.text}])));return t.setIn(["title","innerContent"],e)}return t}const mt=({targetModuleId:t,sourceAttrsMap:e,sourceAttrs:r,targetAttrsMap:i,targetAttrs:o})=>{const{groupPreset:s,...a}=r.asMutable({deep:!0}),n="groupPreset"in r||"modulePreset"in r;let l=null;if(n&&s){const e=(0,I.convertGroupPreset)({clipboardItem:{payload:{groupPreset:s}},targetModuleId:t});e&&"object"==typeof e&&"groupPreset"in e&&(l={groupPreset:e.groupPreset})}const p=bt({sourceAttrs:n&&l?G()({...a,groupPreset:l.groupPreset}):n?r:G()(a),targetAttrsMap:i}),u=(0,I.mergeAttrsIntoAttrs)({sourceAttrs:p,targetAttrsMap:i,targetAttrs:o});(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(t,u),n&&l?.groupPreset&&Object.entries(l.groupPreset).forEach((([r])=>{k({clipboardItem:{payload:{attrs:G()(a),attrsMap:e,groupPreset:l.groupPreset,groupId:r}},targetModuleId:t,attributeType:"preset"})})),(0,d.dispatch)("divi/right-click-options").unset()},ht=(t,e,r,i,o)=>{const s=K(t);if(!s)return;const{targetAttrs:a,targetAttrsMapForNormalization:n}=s,l=bt({sourceAttrs:G()(r),targetAttrsMap:n});mt({sourceAttrsMap:e,sourceAttrs:l,targetModuleId:t,targetAttrsMap:n,targetAttrs:a}),((t,e,r,i,o)=>{if("all-modified"!==r||!["design","preset","all"].includes(t))return;const{presetAttrs:s}=A(i);if(s.groupPreset)if("all"===e&&["design","preset"].includes(t))Object.entries(s.groupPreset).forEach((([t,e])=>{e&&"object"==typeof e&&w({moduleId:o,presetPath:t,presetValue:e})}));else if("all"!==e){const t=Object.keys(s.groupPreset).find((t=>(0,b.getAttributeCategorizationKey)(t)===e));t&&s.groupPreset[t]&&w({moduleId:o,presetPath:t,presetValue:s.groupPreset[t]})}})(o.attributeType,o.optionGroup,o.modifiedFields,i,t)},yt=({sourceModuleId:t,targetModuleIds:e,scope:r,attributeType:i="all",moduleTypes:o="all",optionGroup:s="all",modifiedFields:a="all-modified"})=>{const l=(0,d.select)("divi/edit-post").getModule(t);if(!l)return;const p=(0,d.select)("divi/edit-post").getModuleAttrs(t),u=l.getIn(["name"]);if(!p||!u)return;const c=(0,b.getSettingsComponent)(u),g=(0,I.getComponentAttrsMapsId)({attrsMapsType:"module",moduleName:u});(0,d.dispatch)("divi/history").disableHistoryTracking(),(0,I.waitUntilAttrsMapsReady)({id:g,attrsMapsType:"module",name:u,component:c,callback:l=>{const u=l?.attrsCategoryMap?.all;if(!u)return void(0,d.dispatch)("divi/history").enableHistoryTracking();const c=p.asMutable({deep:!0}),g=gt(c,i,s,a),m=(0,b.getModulesInScope)(t,r,e,o);let h=0;const y={attributeType:i,optionGroup:s,modifiedFields:a};(0,I.getOrWaitForAttrsMaps)({moduleIds:m,processModule:t=>{ht(t,u,g,c,y),h++}}).then((()=>{if((0,d.dispatch)("divi/history").enableHistoryTracking(),h>0){const e=(0,d.select)("divi/edit-post").getContent();(0,d.dispatch)("divi/history").addLayoutItem({label:(0,n.__)("Extended Attributes","et_builder"),moduleId:t,moduleLabel:"",moduleName:"",state:e,timestamp:(new Date).getTime(),humanTime:(new Date).toLocaleTimeString(),type:"EXTEND_ATTRIBUTES",storeName:"divi/edit-post"})}})).catch((()=>{(0,d.dispatch)("divi/history").enableHistoryTracking()}))}}).catch((()=>{(0,d.dispatch)("divi/history").enableHistoryTracking()}))},ft=({sourceAttr:t,targetModuleId:e,targetAttr:r,targetAttrName:i,targetSubName:o})=>{const s=(0,I.mergeFieldAttrIntoResponsiveAttr)({sourceFieldAttr:t,targetResponsiveAttr:r,targetSubName:o});(0,d.dispatch)("divi/edit-post").editModuleAttribute({id:e,attrName:i,value:s}),(0,d.dispatch)("divi/right-click-options").unset()},vt=({sourceAttr:t,targetModuleId:e,targetAttrName:r,targetSubName:i,targetGroupName:o,targetAttr:s,targetAttrsMaps:a})=>{const n=c({attrName:r,subName:i,groupName:o,attrsMaps:a});ft({sourceAttr:t,targetModuleId:e,targetAttrName:n,targetSubName:i,targetAttr:s})},Mt=(t,e,r)=>{const{id:i,clipboardItemStyle:o,selectedModuleIds:s}=t,n=(0,d.select)("divi/edit-post").getModule(i),l=o?.payload.asMutable({deep:!0});if(!l)return;const p=h({moduleId:i,selectedModuleIds:s});if("fieldAttr"in l)return void p.forEach((t=>{const e=(0,d.select)("divi/edit-post").getModuleName(t),r=(0,I.getComponentAttrsMapsId)({attrsMapsType:"module",moduleName:e}),i=(0,d.select)("divi/clipboard").getComponentAttrsMaps(r)?.getIn(["attrsMaps"]),o=i?.asMutable({deep:!0});vt({sourceAttr:G()(l.fieldAttr),targetModuleId:t,targetAttrName:l.attrName,targetSubName:l.subName,targetGroupName:l.groupName,targetAttr:(0,d.select)("divi/edit-post").getModuleAttr(t,l.attrName),targetAttrsMaps:o})}));let u=G()(l.attrs);if(!D((0,a.get)(l,"moduleId"),n)){const t=u.asMutable({deep:!0});delete t.modulePreset,u=G()(t)}p.forEach((t=>{const i=K(t);if(!i)return;const{targetAttrs:o,targetAttrsMapForNormalization:s}=i,a=q(u,e),n=r?.styleGroup?(0,b.filterAttributeMaps)(a,r.styleGroup):a;mt({sourceAttrsMap:l.attrsMap||{},sourceAttrs:G()(n),targetModuleId:t,targetAttrsMap:s,targetAttrs:o})})),(0,d.dispatch)("divi/right-click-options").unset()};F=Mt;const At=({sourceAttrs:t,sourceAttrsGroupNameMap:e,targetAttrsMap:r,targetAttrsGroupNameMap:i,targetAttrs:o,targetModuleId:s})=>{const a=(0,I.mapAttrsIntoMatchingGroupNameAttrs)({sourceAttrs:t,sourceAttrsGroupNameMap:e,targetAttrsGroupNameMap:i}),n=(0,I.mergeAttrsIntoAttrs)({sourceAttrs:a,targetAttrsMap:r,targetAttrs:o});(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(s,n),(0,d.dispatch)("divi/right-click-options").unset()},_t=({moduleId:t})=>{(0,I.pasteModuleFromClipboard)(t),(0,d.dispatch)("divi/right-click-options").unset()},Ct=({owner:t,saveToDiviCloud:e="off"})=>{const{cursorPosition:r}=(0,d.select)("divi/right-click-options").getState();(0,d.dispatch)("divi/modal-library").open({name:"divi/add-to-library",owner:t,offset:{top:r.y,left:Math.max(0,r.x-200)},attributes:{saveToDiviCloud:e}}),(0,d.dispatch)("divi/right-click-options").unset()},It=t=>{(0,d.dispatch)("divi/edit-post").removeModule(t),(0,d.dispatch)("divi/right-click-options").unset()},kt=(t,e)=>{const{id:r,attrsMaps:i}=t,o=(0,d.select)("divi/edit-post").getModule(r);if(!o)return;const s=["all","design","preset"].includes(e),a="all"===e?"all":"content"===e?"content":"preset"===e?null:"style";if(a){const t=(0,I.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:i?.attrsCategoryMap?.[a],targetAttrsMap:i?.attrsCategoryMap?.[a],targetAttrs:o?.props?.attrs});(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(r,t,"user",!0)}s&&(0,d.dispatch)("divi/edit-post").removeModuleAttributes({id:r,attrNames:["modulePreset","groupPreset"],caller:"user"}),(0,d.dispatch)("divi/right-click-options").unset()},wt=t=>{t.preventDefault(),t.stopPropagation(),(0,d.dispatch)("divi/right-click-options").unset()};var Pt=window.divi.keyboardShortcuts;const Ot=[{name:"closeRightClickOptions",label:(0,n.__)("Close Right Click Options","et_builder"),keys:["Escape"],category:"page",action:()=>{(0,d.dispatch)("divi/right-click-options").unset()}},{name:"selectNextOption",label:(0,n.__)("Select Next Option","et_builder"),keys:["ArrowDown"],category:"page",action:()=>{(0,d.dispatch)("divi/right-click-options").selectNext()}},{name:"selectPrevOption",label:(0,n.__)("Select Previous Option","et_builder"),keys:["ArrowUp"],category:"page",action:()=>{(0,d.dispatch)("divi/right-click-options").selectPrev()}},{name:"selectParentOption",label:(0,n.__)("Select Parent Option","et_builder"),keys:["ArrowLeft"],category:"page",action:()=>{(0,d.dispatch)("divi/right-click-options").selectParent()}},{name:"selectChildOption",label:(0,n.__)("Select Child Option","et_builder"),keys:["ArrowRight"],category:"page",action:()=>{(0,d.dispatch)("divi/right-click-options").selectChild()}},{name:"executeSelectedOption",label:(0,n.__)("Execute Selected Option","et_builder"),keys:["Enter"],category:"page",action:()=>{const t=(0,d.select)("divi/right-click-options").getState(),{selected:e,parent:r}=t,i=(0,a.get)(t,u(r.asMutable(),e));(0,a.isFunction)(i)&&i()}}],Nt=()=>(0,Pt.registerShortcuts)(Ot),Tt=(t,e)=>{(0,d.dispatch)("divi/right-click-options").setSelected({parent:t,selected:e})},Et=()=>(0,Pt.unregisterShortcuts)(Ot.map((t=>t.name))),St=t=>{"undo"===t?(0,d.dispatch)("divi/history").undo():"redo"===t&&(0,d.dispatch)("divi/history").redo(),(0,d.dispatch)("divi/right-click-options").unset()},jt=()=>{const{adminBarHeight:t,appActiveView:e,appWindowWidth:r,builderBarWidth:i,pageBarHeight:s,rightClickOptionsState:n,sidebarLeftWidth:l,sidebarRightWidth:p,topWindowHeight:u,topWindowWidth:c,view:g,zoomScale:b,isUserDefinedAppWindowWidth:m,is100vwVisualView:h}=(0,d.useSelect)((t=>{const e=t("divi/app-ui").getView();return{appActiveView:e,view:t("divi/app-ui").getViewItem(e),appWindowWidth:t("divi/app-ui").getWindow("width","app",0),rightClickOptionsState:t("divi/right-click-options").getState(),topWindowHeight:t("divi/app-ui").getWindow("height","top",0),topWindowWidth:t("divi/app-ui").getWindow("width","top",0),adminBarHeight:t("divi/app-ui").getElementProperty({elementName:"adminBar",propertyName:"height",propertyGroup:"dimension"}),builderBarWidth:t("divi/app-ui").getElementProperty({elementName:"builderBar",propertyGroup:"dimension",propertyName:"width"}),pageBarHeight:t("divi/app-ui").getElementProperty({elementName:"pageBar",propertyGroup:"dimension",propertyName:"height"}),sidebarLeftWidth:t("divi/app-ui").getElementProperty({elementName:"sidebarLeft",propertyGroup:"dimension",propertyName:"width"}),sidebarRightWidth:t("divi/app-ui").getElementProperty({elementName:"sidebarRight",propertyGroup:"dimension",propertyName:"width"}),zoomScale:t("divi/app-ui").getAppFrameZoom({format:"decimal"}),isUserDefinedAppWindowWidth:t("divi/app-ui").isUserDefinedWindowProperty({attr:"width",windowLocation:"app"}),is100vwVisualView:t("divi/app-ui").is100vwVisualView()}})),{cursorPosition:y,options:f,optionType:v,owner:M,windowLocation:A,parent:_,selected:C}=n,I="app"===A,k=(0,a.includes)(["tablet","phone"],e),w=I&&k?170:0,P="fieldsNode"in M?M.fieldsNode:null,O={adminBarHeight:t,builderBarWidth:i,pageBarHeight:s,sidebarLeftWidth:l,cursorPosition:y,fieldsNode:P,options:f.asMutable({deep:!0}),windowHeight:u,windowWidth:c,appWindowOffset:{top:w,left:"100vw"===g.width?0:(0,Q.getAppFrameMarginSides)({builderBarWidth:i,appWindowWidth:r,sidebarLeftWidth:l,sidebarRightWidth:p,topWindowWidth:c,is100vwVisualView:h,zoomScale:b,isUserDefinedAppWindowWidth:m})},selected:C,selectedParent:_.asMutable(),onMount:Nt,onUnmount:Et,onOptionMouseEnter:Tt,onOptionsContextMenu:"pageBarExitMenu"===v?null:wt,onOverlayClick:wt,onOverlayContextMenu:wt,optionType:v,windowLocation:A,zoomScale:b};return(0,o.createElement)(Z,O)};let Gt=t=>crypto.getRandomValues(new Uint8Array(t)),xt=(t,e=21)=>((t,e,r)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*i*e/t.length);return(s=e)=>{let a="";for(;;){let e=r(o),n=o;for(;n--;)if(a+=t[e[n]&i]||"",a.length===s)return a}}})(t,e,Gt);var Lt=window.vendor.wp.hooks;const Ft="divi.rightClickOptions.colorPickerOptions",Rt=t=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(Ft,e,t)}const{color:e,colorId:r,colorPalette:i,targetClassList:o}=t.colorPickerAttrs,{onConvertToPaletteColor:s,onDeletePaletteColor:l,onEditPaletteColor:p,onDetachCurrentColorFromPalette:u,onReplacePaletteColor:c}=t.colorPickerAttrs.actions,g=[];return!o.includes("et-vb-colorpicker-manager__swatches-swatch-overlay-global")||"global"!==i||(0,a.isEmpty)(r)||(0,a.isEmpty)(e)?o.includes("et-vb-colorpicker-manager__swatches-swatch-overlay-saved")&&"saved"===i&&!(0,a.isEmpty)(e)?g.push({name:"make-global-color",label:(0,n.__)("Make Global Color","et_builder"),onClick:()=>{const t=`gcid-${xt("0123456789abcdefghijklmnopqrstuvwxyz",10)()}`;(0,d.dispatch)("divi/global-data").addGlobalColor({color:e,id:t});const r=(0,d.select)("divi/global-data").getRenderableValue(t,e);o.includes("et-vb-colorpicker-manager__current-color-overlay")&&s(r),(0,d.dispatch)("divi/right-click-options").unset()}}):o.includes("et-vb-colorpicker-manager__current-color-overlay-css-variable")?g.push({name:"detach-from-global",label:(0,n.__)("Detach From Global","et_builder"),onClick:()=>{const t=(0,d.select)("divi/global-data").getGlobalColorBasedOnCssVariable(e)?.color;(0,a.isEmpty)(t)||u(t),(0,d.dispatch)("divi/right-click-options").unset()}}):o.includes("et-vb-colorpicker-manager__current-color-overlay")&&!(0,a.isEmpty)(e)&&g.push({name:"convert-to-global",label:(0,n.__)("Convert To Global","et_builder"),onClick:()=>{const t=`gcid-${xt("0123456789abcdefghijklmnopqrstuvwxyz",10)()}`;(0,d.dispatch)("divi/global-data").addGlobalColor({color:e,id:t});const r=(0,d.select)("divi/global-data").getRenderableValue(t,e);s(r),(0,d.dispatch)("divi/right-click-options").unset()}}):(g.push({name:"edit-global-color",label:(0,n.__)("Edit Global Color","et_builder"),onClick:()=>{p(i,r,e),(0,d.dispatch)("divi/right-click-options").unset()}}),(0,d.select)("divi/global-data").isGlobalColorRemovable(r)&&(g.push({name:"replace-global-color",label:(0,n.__)("Replace Global Color","et_builder"),onClick:()=>{c(r,e),(0,d.dispatch)("divi/right-click-options").unset()}}),g.push({name:"delete-global-color",label:(0,n.__)("Delete Global Color","et_builder"),onClick:()=>{l({colorId:r}),(0,d.dispatch)("divi/right-click-options").unset()}}))),(0,Lt.applyFilters)(Ft,g,t)},Dt="divi.rightClickOptions.gradientStopOptions",$t=t=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(Dt,e,t)}const{removeStop:e}=t,r=[];return r.push({name:"delete-gradient-stop",label:(0,n.__)("Delete Gradient","et_builder"),onClick:()=>{e(),(0,d.dispatch)("divi/right-click-options").unset()}}),(0,Lt.applyFilters)(Dt,r,t)},Wt=t=>{const e=t.id,r=[],i=p(e);r.push({name:"draggable-list-item-copy",label:(0,n.__)("Copy Item Styles","et_builder"),onClick:()=>at({moduleId:e,moduleLabel:i.name,attrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","style"]),attrs:(0,I.extractAttrsByGroupAttrsMap)({attrs:(0,d.select)("divi/edit-post").getModuleAttrs(e).asMutable({deep:!0}),attrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","style"])})})});return"moduleAttributes"===(0,a.get)(t,["clipboardItemStyle","clipboardType"])&&r.push({name:"paste-module-style-to-module",label:(0,n.__)("Paste Item Style","et_builder"),onClick:()=>{const r=(0,a.get)(t,["clipboardItemStyle"]),i=(0,a.get)(t,["attrsMaps","attrsCategoryMap","style"]),o=r?.payload;mt({sourceAttrsMap:"attrsMap"in o?o.attrsMap:{},sourceAttrs:"attrs"in o?o.attrs:G()({}),targetModuleId:e,targetAttrsMap:i,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(e)})}}),(0,Lt.applyFilters)("divi.rightClickOptions.draggableListOptions",r,t)},Bt="divi.rightClickOptions.modalFieldOptions",Vt=(t,e)=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(Bt,e,t)}const{modalName:r,fieldLabel:i,fieldName:o,fieldOptions:s,attrName:l,subName:p,id:u}=t,c=t.clipboardItem,g=[],m=(0,d.select)("divi/global-data").isActivePreset(),h=(0,d.select)("divi/global-data").getOptionGroupPresetEditMode(),y=h?.isPresetActive&&(0,d.select)("divi/modal-library").isGroupOpen(h?.groupId);if("divi/module"===r){const r=(0,a.get)(c,["payload","fieldName"]),h=(0,a.get)(c,["payload","fieldOptions"]);e&&(0,a.includes)(e,"copy")||g.push({name:"copy-field",label:(0,n.sprintf)((0,n.__)("Copy %1$s Attributes","et_builder"),i),onClick:()=>et({attrName:t.attrName,subName:t.subName,moduleId:t.id,modalName:t.modalName,modalTab:t.modalTab,fieldName:t.fieldName,fieldOptions:t.fieldOptions,fieldLabel:t.fieldLabel,groupName:t.groupName,moduleObject:(0,d.select)("divi/edit-post").getModule(t.id),attributeType:(0,I.getCopyType)(t.modalTab,t.groupName)}),enable:!(m||y)});const v=(0,d.select)("divi/edit-post").getModuleAttrs(u),M=l?l.split("."):[],A=p?p.split("."):[],_=[...M,"desktop","value",...A];let C=v.getIn(_,null);if(null===C&&"divi/checkboxes"===o){const t=v.getIn([...M],null);if(t&&"object"==typeof t){Object.values(t).some((t=>{if(t&&"object"==typeof t&&"value"in t){const{value:e}=t;return"on"===e||"1"===e||1===e||!0===e}return!1}))&&(C=t)}}const k=!(null===C||(0,a.isUndefined)(C)||""===C||Array.isArray(C)&&0===C.length);g.push({name:"extend-field-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),i),onClick:()=>{const e=(0,b.getAttributeCategorizationKey)(l),r=[...l?l.split("."):[],"desktop","value",...p?p.split("."):[]].join(".");(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:t.id,attributes:{defaultAttributeType:"content"===t.modalTab&&"Background"!==t.groupName?"content":"design",defaultOptionGroup:e,defaultModifiedField:r},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()},enable:k&&!(m||y)}),f({fieldName:o,clipboardItemFieldName:r,fieldOptions:s,clipboardItemFieldOptions:h})&&g.push({name:"paste-field-to-field",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),(0,a.get)(c,["payload","fieldLabel"])),onClick:()=>ft({sourceAttr:(0,a.get)(c,["payload","fieldAttr"]),targetModuleId:u,targetAttrName:l,targetSubName:p,targetAttr:(0,d.select)("divi/edit-post").getModuleAttr(u,l)}),enable:!(m||y)});let w="";w=Array.isArray(C)?[]:C&&"object"==typeof C?{}:"";const P=()=>{const t=v.setIn(_,w);(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(u,t,"user",!0),(0,d.dispatch)("divi/right-click-options").unset()};g.push({name:"reset-modal-field",label:(0,n.sprintf)((0,n.__)("Reset %1$s Attributes","et_builder"),i),onClick:P,enable:k&&!(m||y)}),g.push({name:"find-replace",label:(0,n.__)("Find & Replace","et_builder"),onClick:()=>{const e=(0,d.select)("divi/edit-post").getModule(t.id),r=e?(0,d.select)("divi/module-library").getModule(e.name):null;let i=null;if(e&&t.attrName){const r=t.attrName.split(".");let o=e.attrs;r.forEach((t=>{o&&"object"==typeof o&&(o=o[t])})),i=o}let o,s={name:"divi/text",props:{}};t.features?.dynamicContent&&"object"==typeof t.features.dynamicContent&&(o=t.features.dynamicContent.type),r&&t.attrName&&t.fieldComponent&&t.fieldComponent.name&&(s=t.fieldComponent),(0,d.dispatch)("divi/modal-library").open({name:"divi/find-and-replace",owner:t.id,attributes:{sourceModuleId:t.id,attrName:t.attrName,subName:t.subName,fieldLabel:t.fieldLabel,fieldComponent:s,dynamicContentType:o,features:t.features,fieldValue:i},dimension:{width:320,height:600}}),(0,d.dispatch)("divi/right-click-options").unset()},enable:k&&!(m||y)})}return(0,Lt.applyFilters)(Bt,g,t)},zt="divi.rightClickOptions.modalGroupOptions",Ht=t=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(zt,e,t)}const{modalName:e,modalTab:r,modalGroupLabel:i,moduleId:o,attrsMaps:s,groupId:l}=t,p=[],u="content"===r&&"Background"!==i?(0,n.__)("Content","et_builder"):(0,n.__)("Style","et_builder"),c=(0,d.select)("divi/edit-post").getModuleAttrs(o),g=c.getIn(["groupPreset"]),m=Boolean(g?.[l]),{isModulePresetEditMode:h,isOptionGroupPresetEditMode:y,isPresetEditingMode:f,presetEditMode:A}=(()=>{const t=(0,d.select)("divi/global-data").isActivePreset(),e=(0,d.select)("divi/global-data").getOptionGroupPresetEditMode(),r=e?.isPresetActive&&(0,d.select)("divi/modal-library").isGroupOpen(e?.groupId);return{isModulePresetEditMode:t,isOptionGroupPresetEditMode:r,isPresetEditingMode:t||r,presetEditMode:e}})(),C=f?(0,d.select)("divi/global-data").getGroupPreset({groupName:A?.groupName??"",id:(0,d.select)("divi/edit-post").getSelectedOptionGroupPreset(o,l)?.presetId,useDefaultFallback:!0}):null,k=()=>{const e=(0,d.select)("divi/edit-post").getModuleName(o),r=(0,d.select)("divi/edit-post").getModuleAttrs(o),i=(0,b.maybeConvertPresetModuleName)(e,r),s=(0,d.select)("divi/edit-post").getSelectedModulePreset(o),a=(0,d.select)("divi/global-data").getModulePreset({moduleName:i,id:s});return{presetModuleName:i,selectedModulePreset:s,attrs:(0,I.extractAttrsByGroupAttrsMap)({attrs:a?.attrs?a.attrs.asMutable({deep:!0}):{},attrsMap:t?.attrsMaps?.attrsCategoryMap?.all})}},w=()=>{const{presetModuleName:t,selectedModulePreset:e,attrs:r}=k();Object.keys(r).forEach((r=>{(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:r,attrValue:null,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))},P=(()=>{const e=(0,I.extractAttrsByGroupAttrsMap)({attrs:c.asMutable({deep:!0}),attrsMap:t?.attrsMaps?.attrsCategoryMap?.all});if(h){const{attrs:t}=k();return Object.keys(t).length>0}return y?Boolean(C?.attrs&&Object.keys(C.attrs).length>0):Object.keys(e).length>0})(),N=()=>{if(h)w();else if(y)(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:{},updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]});else{const e=(0,I.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:t?.attrsMaps?.attrsCategoryMap?.all,targetAttrsMap:t?.attrsMaps?.attrsCategoryMap?.all,targetAttrs:c});(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(o,e,"user",!0)}(0,d.dispatch)("divi/right-click-options").unset()},T=()=>{const t=c.setIn(["groupPreset"],g.without(l));(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(o,t,"user",!0),(0,d.dispatch)("divi/right-click-options").unset()},E=()=>{if(h)w();else if(y)(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:{},updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]});else{let e=(0,I.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:t?.attrsMaps?.attrsCategoryMap?.all,targetAttrsMap:t?.attrsMaps?.attrsCategoryMap?.all,targetAttrs:c});g&&(e=e.setIn(["groupPreset"],g.without(l))),(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(o,e,"user",!0)}(0,d.dispatch)("divi/right-click-options").unset()};if("divi/module"===e&&(p.push({name:"copy-group",label:(0,n.sprintf)((0,n.__)("Copy %1$s Attributes","et_builder"),i),onClick:()=>{let e;if(h){const{attrs:t}=k();e=t}else e=y?C?.attrs?C.attrs.asMutable({deep:!0}):{}:(0,I.extractAttrsByGroupAttrsMap)({attrs:(0,d.select)("divi/edit-post").getModuleAttrs(t.moduleId).asMutable({deep:!0}),attrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"])});rt({origin:t.id,moduleId:t.moduleId,modalName:t.modalName,modalTab:t.modalTab,groupId:t.groupId,groupLabel:i,groupName:t.groupName,attrsGroupNameMap:(0,a.get)(t,["attrsMaps","attrsGroupNameMap"]),attrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"]),attrs:e})}}),p.push({name:"extend-group-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),i),onClick:()=>{let e="all";t.groupId&&(e=O(t.groupId)),(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:o,attributes:{defaultAttributeType:"content"===r&&"Background"!==i?"content":"design",defaultOptionGroup:e,defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()},enable:P||m}),p.push({name:"reset-modal-group",label:(0,n.sprintf)((0,n.__)("Reset %1$s Attributes","et_builder"),i),onClick:()=>{E()},enable:m||P,..."content"!==u&&(m||P)?{children:[{name:"reset-modal-group-attrs-and-preset-option",label:(0,n.__)("Reset All Attributes","et_builder"),onClick:E,enable:m&&!f||P,bottomSeparator:!0},{name:"reset-modal-group-attrs-option",label:(0,n.sprintf)((0,n.__)("Reset %1$s %2$s Attributes","et_builder"),i,u),onClick:N,enable:P},{name:"reset-modal-group-preset-option",label:(0,n.sprintf)((0,n.__)("Reset %1$s Preset","et_builder"),i),onClick:T,enable:m&&!f}]}:{}}),(0,a.isObject)(t.clipboardItem))){const{clipboardType:r}=t.clipboardItem;if("moduleGroupAttributes"===r){const{clipboardItem:r}=t,i=(0,a.get)(r,["payload","groupLabel"]),c=(0,a.get)(r,["payload","attrsGroupNameMap"]),g=c?c.asMutable({deep:!0}):{},b=(0,a.get)(t,["attrsMaps","attrsGroupNameMap"]),m=(0,d.select)("divi/edit-post").getModule(o),v={...s,attrsCategoryMap:{...s.attrsCategoryMap}};M(t)?p.push({name:"paste-group-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),i),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:e}=k(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(y){const e=(0,a.get)(r,["payload","attrs"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:e,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Mt({optionType:"module",id:o,attrsMaps:v,clipboardItemStyle:r},"all")},enable:_((0,a.get)(r,"moduleId"),m,"all",r.payload),..."content"!==(0,a.get)(r,["payload","attributeType"])&&{children:[{name:"paste-group-to-group-design-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Design Attributes","et_builder"),i),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:e}=k(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(y){const e=(0,a.get)(r,["payload","attrs"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:e,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Mt({optionType:"module",id:o,attrsMaps:v,clipboardItemStyle:r},"design")},enable:_((0,a.get)(r,"moduleId"),m,"design",r.payload),bottomSeparator:!0},{name:"paste-group-to-group-style-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Style Attributes","et_builder"),i),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:e}=k(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(y){const e=(0,a.get)(r,["payload","attrs"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:e,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Mt({optionType:"module",id:o,attrsMaps:v,clipboardItemStyle:r},"style")},enable:_((0,a.get)(r,"moduleId"),m,"style",r.payload)},{name:"paste-group-to-group-presets",label:(0,n.sprintf)((0,n.__)("Paste %1$s Presets","et_builder"),i),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:e}=k(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(y){const e=(0,a.get)(r,["payload","attrs"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:e,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else Mt({optionType:"module",id:o,attrsMaps:v,clipboardItemStyle:r,modalName:e},"preset")},enable:_((0,a.get)(r,"moduleId"),m,"preset",r.payload)}]}}):(0,I.hasOverlappingGroupNames)(g,b)&&p.push({name:"paste-group-to-nested-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s %2$s Attributes","et_builder"),i,u),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:e}=k(),i=(0,a.get)(r,["payload","attrs"]);Object.keys(i).forEach((r=>{const o=i[r];(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:r,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(y){const e=(0,a.get)(r,["payload","attrs"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:e,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else At({sourceAttrsGroupNameMap:g,sourceAttrs:(0,a.get)(r,["payload","attrs"]),targetAttrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"]),targetAttrsGroupNameMap:b,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(o),targetModuleId:o})},enable:!f})}else if("moduleGroupTabAttributes"===r){const{clipboardItem:e}=t,r=(0,n.sprintf)((0,n.__)("%1$s Attributes","et_builder"),(0,a.get)(e,["payload","groupTabLabel"])),i=(0,a.get)(e,["payload","attrsMap"]),s=(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"]);(0,I.hasOverlappingAttrNames)(i,s)&&p.push({name:"paste-group-tab-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s %2$s Attributes","et_builder"),r,u),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:r}=k(),i=(0,a.get)(e,["payload","attrs"]);Object.keys(i).forEach((e=>{const o=i[e];(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:r,attrName:e,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}))}else if(y){const r=(0,a.get)(e,["payload","attrs"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:"",attrValue:r,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else mt({sourceAttrsMap:i,sourceAttrs:(0,a.get)(e,["payload","attrs"]),targetModuleId:o,targetAttrsMap:s,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(o)})},enable:!f})}else if("moduleFieldAttribute"===r){const{clipboardItem:e}=t,r=(0,a.get)(e,["payload"]);v({clipboardItem:e,attrsMaps:t.attrsMaps})&&p.push({name:"paste-field-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s %2$s Attributes","et_builder"),(0,a.get)(r,["fieldLabel"]),u),onClick:()=>{if(h){const{presetModuleName:t,selectedModulePreset:e}=k(),i=(0,a.get)(r,["attrName"]),o=(0,a.get)(r,["fieldAttr"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"module",presetSubType:t,presetId:e,attrName:i,attrValue:o,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else if(y){const e=(0,a.get)(r,["attrName"]),i=(0,a.get)(r,["fieldAttr"]);(0,d.dispatch)("divi/global-data").editPresetAttribute({presetType:"group",presetSubType:t.groupName,presetId:(0,d.select)("divi/edit-post").getGroupPresetAttr(o,l)?.presetId,attrName:e,attrValue:i,updated:Date.now(),attrsGroup:["attrs","renderAttrs","styleAttrs"]})}else vt({targetModuleId:o,targetAttrName:(0,a.get)(r,["attrName"]),targetSubName:(0,a.get)(r,["subName"]),targetGroupName:(0,a.get)(r,["groupName"]),targetAttr:(0,d.select)("divi/edit-post").getModuleAttr(o,(0,a.get)(r,["attrName"])),targetAttrsMaps:s,sourceAttr:(0,a.get)(r,["fieldAttr"])})},enable:!f})}}return(0,Lt.applyFilters)(zt,p,t)},Ut="divi.rightClickOptions.modalGroupTabOptions",Kt=t=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(Ut,e,t)}const{modalName:e,groupTabLabel:r}=t,i=[],o=(0,d.select)("divi/global-data").isActivePreset(),s=(0,d.select)("divi/global-data").getOptionGroupPresetEditMode(),l=s?.isPresetActive&&(0,d.select)("divi/modal-library").isGroupOpen(s?.groupId);if("divi/module"===e){const e=(0,d.select)("divi/edit-post").getModuleAttrs(t.moduleId),s=Object.keys((0,I.extractAttrsByGroupAttrsMap)({attrs:e.asMutable({deep:!0}),attrsMap:t?.attrsMaps?.attrsCategoryMap?.all})).length>0;if(i.push({name:"copy-modal-group-tab",label:(0,n.sprintf)((0,n.__)("Copy %1$s Attributes","et_builder"),r),onClick:()=>it({origin:t.groupId,moduleId:t.moduleId,modalName:t.modalName,groupId:t.groupId,groupTabLabel:t.groupTabName,groupTabName:t.groupTabName,attrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"]),attrsGroupNameMap:(0,a.get)(t,["attrsMaps","attrsGroupNameMap"]),attrs:(0,I.extractAttrsByGroupAttrsMap)({attrs:(0,d.select)("divi/edit-post").getModuleAttrs(t.moduleId).asMutable({deep:!0}),attrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"])})}),enable:!(o||l)}),i.push({name:"extend-group-tab-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Attributes","et_builder"),r),onClick:()=>{let e="all";t.groupId&&(e=O(t.groupId)),(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:t.moduleId,attributes:{defaultOptionGroup:e},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()},enable:s}),(0,a.isObject)(t.clipboardItem))if("moduleFieldAttribute"===t.clipboardItem.clipboardType){const{clipboardItem:e,moduleId:r}=t,s=(0,a.get)(e,["payload"]);v({clipboardItem:e,attrsMaps:t.attrsMaps})&&i.push({name:"paste-field-to-group",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),(0,a.get)(s,["fieldLabel"])),onClick:()=>vt({sourceAttr:(0,a.get)(s,["fieldAttr"]),targetModuleId:r,targetAttrName:(0,a.get)(s,["attrName"]),targetSubName:(0,a.get)(s,["subName"]),targetGroupName:(0,a.get)(s,["groupName"]),targetAttr:(0,d.select)("divi/edit-post").getModuleAttr(r,(0,a.get)(s,["attrName"])),targetAttrsMaps:t.attrsMaps}),enable:!(o||l)})}else if((0,a.includes)(["moduleGroupTabAttributes","moduleGroupAttributes"],t.clipboardItem.clipboardType)){const{clipboardItem:e,moduleId:r}=t,s="moduleGroupTabAttributes"===t.clipboardItem.clipboardType?(0,a.get)(e,["payload","groupTabLabel"]):(0,a.get)(e,["payload","groupLabel"]),p=(0,a.get)(e,["payload","attrsGroupNameMap"]).asMutable({deep:!0}),u=(0,a.get)(t,["attrsMaps","attrsGroupNameMap"]);(0,I.hasOverlappingGroupNames)(p,u)&&i.push({name:"paste-group-tab-to-group-tab",label:(0,n.sprintf)((0,n.__)("Paste %1$s Attributes","et_builder"),s),onClick:()=>At({sourceAttrsGroupNameMap:p,sourceAttrs:(0,a.get)(e,["payload","attrs"]),targetAttrsMap:(0,a.get)(t,["attrsMaps","attrsCategoryMap","all"]),targetAttrsGroupNameMap:u,targetAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(r),targetModuleId:r}),enable:!(o||l)})}const p=()=>{const r=(0,I.resetTargetAttrsBasedOnOverlapppingAttrsMaps)({sourceAttrsMap:t?.attrsMaps?.attrsCategoryMap?.all,targetAttrsMap:t?.attrsMaps?.attrsCategoryMap?.all,targetAttrs:e});(0,d.dispatch)("divi/edit-post").replaceModuleAttributes(t.moduleId,r,"user",!0),(0,d.dispatch)("divi/right-click-options").unset()};i.push({name:"reset-modal-group-tab",label:(0,n.sprintf)((0,n.__)("Reset %1$s Attributes","et_builder"),r),onClick:p,enable:s&&!(o||l)})}return(0,Lt.applyFilters)(Ut,i,t)},qt="divi.rightClickOptions.modalTabOptions",Xt=t=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(qt,e,t)}const{modalName:e}=t;return(0,Lt.applyFilters)(qt,[],t)},Yt="divi.rightClickOptions.moduleOptions",Jt=t=>{if(!(0,a.isObject)(t)){const e=[];return(0,Lt.applyFilters)(Yt,e,t)}const e=(0,d.select)("divi/settings").checkRolePermission("edit_global_library"),r=(0,d.select)("divi/settings").checkRolePermission("divi_library")&&(0,d.select)("divi/settings").checkRolePermission("save_library"),{selectedModuleIds:i,clipboardItem:o,clipboardItemStyle:s}=t,l=t.id,u=t?.modalName,c=t?.moduleType,f=(0,d.select)("divi/settings").getSetting(["themeBuilder","layout"]),v=(0,d.select)("divi/edit-post").getModule(l),M=v?.name,A=(0,d.select)("divi/module-library").getModule(M)?.appearance,I=(0,d.select)("divi/module").getModuleCount(),k=(0,d.select)("divi/modal-library").isLayersViewFilterActive(),w=(0,d.select)("divi/edit-post").getModule("root")?.children||[],P=(0,d.select)("divi/edit-post").isCloneable({moduleName:M,moduleAppearance:A,themeBuilderLayout:f,moduleCount:I}),O=P&&(0,d.select)("divi/app-ui").hasModulesPermission(c,"add"),N=(0,d.select)("divi/app-ui").hasModulesPermission(c,"delete"),T=(0,d.select)("divi/settings").checkRolePermission("divi_ai"),E=["column","column-inner"].includes(c),j=p(l),x=(0,a.get)(o,"clipboardType"),L=(0,a.get)(o,["payload","moduleType"]),F="divi/layers"===u,D=(0,Q.isAppleOS)();let $=!E&&O;if(E){const t=(0,d.select)("divi/edit-post").getModule(v?.parent),e=(0,d.select)("divi/edit-post").getModule(t?.parent),r=t&&"divi/row-inner"===t?.getIn(["name"]),i=t&&e&&"2_3"===e?.getIn(["props","attrs","module","advanced","type","desktop","value"]),o=r?i?4:3:6;$=t?.children?.length<o&&F&&O||!E&&O}const W=[];W.push({name:"undo",label:(0,n.__)("Undo","et_builder"),onClick:()=>St("undo"),enable:(0,d.select)("divi/history").hasUndo(),shortcut:D?["⌘","z"]:["⌃","z"]}),W.push({name:"redo",label:(0,n.__)("Redo","et_builder"),onClick:()=>St("redo"),enable:(0,d.select)("divi/history").hasRedo(),shortcut:D?["⌘","y"]:["⌃","y"]}),$&&W.push({name:"clone-module",label:(0,n.sprintf)((0,n.__)("Duplicate %1$s","et_builder"),j.name),onClick:()=>tt(l,v.name,E),shortcut:D?["⌘","d"]:["⌃","d"]}),!E&&N&&W.push({name:"remove-module",label:(0,n.sprintf)((0,n.__)("Delete %1$s","et_builder"),j.name),onClick:()=>It(l),shortcut:D?["⌘","⌫"]:["⌃","⌫"]});const B=(0,d.select)("divi/edit-post").getModuleAttrs(l).asMutable({deep:!0}),V=(0,a.get)(B,"globalModule",""),z=(0,a.get)(B,"globalParent",""),H=V||z;H&&e&&W.push({name:"disable-global",label:(0,n.__)("Disable Global","et_builder"),onClick:()=>pt({moduleId:l})});const K=h({moduleId:l,selectedModuleIds:i}),q=y({isCloneable:P,selectedModuleIds:K});if(!E&&q){const t=1<K.length?j.structures:j.structure;W.push({name:"copy-module",label:(0,n.sprintf)((0,n.__)("Copy %1$s","et_builder"),t),onClick:()=>ot({moduleId:l}),shortcut:D?["⌘","c"]:["⌃","c"],topSeparator:!0})}const X=m({ownerParentModuleType:(0,d.select)("divi/edit-post").getParentModuleType(l),ownerModuleType:(0,a.get)(t,"moduleType"),clipboardModuleType:L});if(o&&X&&(!H||e)&&O){const t=o?.payload,e="moduleId"in t?t.moduleId:"",r="moduleIds"in t?t.moduleIds?.asMutable({deep:!0}):[],i=(0,a.isEmpty)(r)?e:r[0],s=g({clipboardType:x,moduleId:e,moduleIds:r,moduleName:t?.moduleObjects?.[i]?.name??""});W.push({name:"paste-module",label:(0,n.sprintf)((0,n.__)("Paste %1$s","et_builder"),s),onClick:()=>_t({moduleId:l}),shortcut:D?["⌘","v"]:["⌃","v"]})}W.push({name:"copy-attributes",label:(0,n.__)("Copy Attributes","et_builder"),onClick:()=>st(t),shortcut:D?["⇧","⌘","c"]:["⇧","⌃","c"],topSeparator:!0}),W.push({name:"extend-attributes",label:(0,n.__)("Extend Attributes","et_builder"),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:l,attributes:{defaultOptionGroup:"all",defaultAttributeType:"design",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()},children:[{name:"extend-all-attributes",label:(0,n.sprintf)((0,n.__)("Extend All %1$s Attributes","et_builder"),j.name),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:l,attributes:{defaultOptionGroup:"all",defaultAttributeType:"all",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()}},{name:"extend-design-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Design Attributes","et_builder"),j.name),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:l,attributes:{defaultOptionGroup:"all",defaultAttributeType:"design",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()},bottomSeparator:!0},{name:"extend-style-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Style Attributes","et_builder"),j.name),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:l,attributes:{defaultOptionGroup:"all",defaultAttributeType:"style",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()}},{name:"extend-content-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Content Attributes","et_builder"),j.name),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:l,attributes:{defaultOptionGroup:"all",defaultAttributeType:"content",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()}},{name:"extend-preset-attributes",label:(0,n.sprintf)((0,n.__)("Extend %1$s Presets","et_builder"),j.name),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/extend-attributes",owner:l,attributes:{defaultOptionGroup:"all",defaultAttributeType:"preset",defaultModifiedField:"all-modified"},dimension:{width:280,height:542}}),(0,d.dispatch)("divi/right-click-options").unset()},bottomSeparator:!0},U({owner:t,attributeType:"design",label:(0,n.__)("Extend Select Design Attributes","et_builder")}),U({owner:t,attributeType:"style",label:(0,n.__)("Extend Select Style Attributes","et_builder")}),U({owner:t,attributeType:"content",label:(0,n.__)("Extend Select Content Attributes","et_builder")}),U({owner:t,attributeType:"preset",label:(0,n.__)("Extend Select Presets","et_builder")})]});const Y=s?.clipboardType;if("moduleAttributes"===Y||"moduleGroupAttributes"===Y||"moduleFieldAttribute"===Y||"moduleGroupTabAttributes"===Y){const e=s?.payload,r="fieldLabel"in e?e?.fieldLabel:"",i="groupTabLabel"in e?e?.groupTabLabel:"",o="groupLabel"in e?e?.groupLabel:"",l="moduleLabel"in e?e?.moduleLabel:"",d=r||i||o||l;W.push({name:"paste-attributes",label:(0,n.__)("Paste Attributes","et_builder"),onClick:()=>{Mt(t,"all")},children:[{name:"paste-all-attributes",label:(0,n.sprintf)((0,n.__)("Paste All %1$s Attributes","et_builder"),d),onClick:()=>Mt(t,"all"),enable:_((0,a.get)(e,"moduleId"),v,"all",e),shortcut:D?["⇧","⌘","v"]:["⇧","⌃","v"]},{name:"paste-design-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Design Attributes","et_builder"),d),onClick:()=>Mt(t,"design"),enable:_((0,a.get)(e,"moduleId"),v,"design",e),shortcut:["⇧","⌥","v"],bottomSeparator:!0},{name:"paste-style-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Style Attributes","et_builder"),d),onClick:()=>Mt(t,"style"),enable:_((0,a.get)(e,"moduleId"),v,"style",e),shortcut:D?["⌥","⌘","v"]:["⌥","⌃","v"]},{name:"paste-content-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Content Attributes","et_builder"),d),onClick:()=>Mt(t,"content"),enable:_((0,a.get)(e,"moduleId"),v,"content",e)},{name:"paste-preset-attributes",label:(0,n.sprintf)((0,n.__)("Paste %1$s Presets","et_builder"),d),onClick:()=>Mt(t,"preset"),enable:_((0,a.get)(e,"moduleId"),v,"preset",e),bottomSeparator:!0},R({owner:t,clipboardPayload:e&&"function"==typeof e.getIn?e:G()(e),attributeType:"design",label:(0,n.__)("Paste Select Design Attributes","et_builder")}),R({owner:t,clipboardPayload:e&&"function"==typeof e.getIn?e:G()(e),attributeType:"style",label:(0,n.__)("Paste Select Style Attributes","et_builder")}),R({owner:t,clipboardPayload:e&&"function"==typeof e.getIn?e:G()(e),attributeType:"content",label:(0,n.__)("Paste Select Content Attributes","et_builder")}),R({owner:t,clipboardPayload:e&&"function"==typeof e.getIn?e:G()(e),attributeType:"preset",label:(0,n.__)("Paste Select Presets","et_builder")})]})}if(W.push({name:"reset-module",label:(0,n.__)("Reset Attributes","et_builder"),onClick:()=>{kt(t,"all")},enable:C(t.id,["style","content","preset"],t),children:[{name:"reset-all-attributes",label:(0,n.__)("Reset All Attributes","et_builder"),onClick:()=>kt(t,"all"),shortcut:D?["⇧","⌘","r"]:["⇧","⌃","r"],enable:C(t.id,["style","content","preset"],t)},{name:"reset-design-attributes",label:(0,n.__)("Reset Design Attributes","et_builder"),onClick:()=>kt(t,"design"),shortcut:["⇧","⌥","r"],enable:C(t.id,["style"],t),bottomSeparator:!0},{name:"reset-style-attributes",label:(0,n.__)("Reset Style Attributes","et_builder"),onClick:()=>kt(t,"style"),shortcut:D?["⌥","⌘","r"]:["⌥","⌃","r"],enable:C(t.id,["style"],t)},{name:"reset-content-attributes",label:(0,n.__)("Reset Content Attributes","et_builder"),onClick:()=>kt(t,"content"),enable:C(t.id,["content"],t)},{name:"reset-presets",label:(0,n.__)("Reset Presets","et_builder"),onClick:()=>kt(t,"preset"),enable:C(t.id,["preset"],t),bottomSeparator:!0},S({moduleId:l,moduleAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(l),attrsMaps:{attrsCategoryMap:{all:t.attrsMaps.attrsCategoryMap?.style||{}}},type:"design",resetPreset:!0,label:(0,n.__)("Reset Select Design Attributes","et_builder")}),S({moduleId:l,moduleAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(l),attrsMaps:{attrsCategoryMap:{all:t.attrsMaps.attrsCategoryMap?.style||{}}},type:"style",resetPreset:!1,label:(0,n.__)("Reset Select Style Attributes","et_builder")}),S({moduleId:l,moduleAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(l),attrsMaps:{attrsCategoryMap:{all:t.attrsMaps.attrsCategoryMap?.content||{}}},type:"content",resetPreset:!1,label:(0,n.__)("Reset Select Content Attributes","et_builder")}),S({moduleId:l,moduleAttrs:(0,d.select)("divi/edit-post").getModuleAttrs(l),attrsMaps:{attrsCategoryMap:{all:t.attrsMaps.attrsCategoryMap?.style||{}}},type:"preset",resetPreset:!0,label:(0,n.__)("Reset Select Presets","et_builder")})]}),r&&(W.push({name:"save-to-library",label:(0,n.__)("Save To Library","et_builder"),onClick:()=>Ct({owner:l}),topSeparator:!0}),W.push({name:"save-to-cloud",label:(0,n.__)("Save To Divi Cloud","et_builder"),onClick:()=>Ct({owner:l,saveToDiviCloud:"on"})})),("divi/layers"!==u||k&&F)&&W.push({name:"go-to-layer",label:(0,n.__)("Go To Layer","et_builder"),onClick:()=>{(0,d.dispatch)("divi/modal-library").open({name:"divi/layers"}),(0,d.dispatch)("divi/right-click-options").unset(),k&&F&&(0,d.dispatch)("divi/modal-library").setLayersViewFilter({filterKeyword:"",isFilterActive:!1,moduleIds:w}),(0,d.dispatch)("divi/modal-library").setLayersViewExpandAll({expandAll:!0,moduleIds:w}),(0,d.dispatch)("divi/modal-library").setLayersViewActiveModuleId(l),(0,b.scrollToModule)(l),(0,d.dispatch)("divi/modal-library").open({owner:l,name:"divi/module"})},shortcut:D?["⌥","⌘","l"]:["⌥","⌃","l"]}),T){const t=[],e=e=>{const r=(0,d.select)("divi/module-library").getModuleContentSettings(e.name);t.push({moduleName:e.name,groups:r,moduleId:e.id})},r=(0,d.select)("divi/edit-post").getContent(),i=r[l],o=t=>{const i=r[t];i?.children&&!(0,a.isEmpty)(i.children)?(0,a.forEach)(i.children,(t=>{o(t)})):e(i)};i?.children&&!(0,a.isEmpty)(i.children)?(0,a.forEach)(i.children,(t=>{o(t)})):e(i);const s={moduleData:t,moduleId:l,isSingleModule:!1};W.push({name:"generate-content-with-ai",label:(0,n.__)("Generate Content With AI","et_builder"),onClick:()=>{(0,b.handleAIButton)(s),(0,d.dispatch)("divi/right-click-options").unset()}})}return(0,Lt.applyFilters)(Yt,W,t)},Zt={modalField:Vt,modalGroup:Ht,modalGroupTab:Kt,modalTab:Xt,modalHeader:Jt,module:Jt,modalDraggableChildModuleList:Wt,colorPicker:Rt,gradientStop:$t,sidebarRowNav:t=>{const e="navItem"===t.trigger,r=[{name:"close-tab",label:e?(0,n.__)("Close Tab","et_builder"):(0,n.__)("Close Active Tab","et_builder"),onClick:()=>{(0,d.dispatch)("divi/modal-library").close({name:t.modalName}),(0,d.dispatch)("divi/right-click-options").unset()}},{name:"close-tab-group",label:(0,n.__)("Close Tab Group","et_builder"),onClick:()=>{(0,d.select)("divi/app-ui").getSidebarRow(t.id)?.modalIds?.forEach((t=>{(0,d.dispatch)("divi/modal-library").close({name:t})})),(0,d.dispatch)("divi/right-click-options").unset()}},{name:"undock-tab",label:e?(0,n.__)("Undock Tab","et_builder"):(0,n.__)("Undock Active Tab","et_builder"),onClick:()=>{(0,d.dispatch)("divi/app-ui").undockModalFromSidebarRow({modalName:t?.modalName,sidebarRowId:t?.id}),(0,d.dispatch)("divi/right-click-options").unset()}}];return(0,Lt.applyFilters)("divi.rightClickOptions.sidebarRowNavOptions",r,t)}},Qt=(t,e)=>{const r=(0,Lt.applyFilters)("divi.rightClickOptions.optionsMap",Zt),i=(0,a.get)(r,t);return(0,a.isFunction)(i)?i(e):[]},te=()=>({type:"SELECT_CHILD"}),ee=()=>({type:"SELECT_NEXT"}),re=()=>({type:"SELECT_PARENT"}),ie=()=>({type:"SELECT_PREV"}),oe=({cursorPosition:t,windowLocation:e,optionType:r,owner:i})=>({type:"SET",cursorPosition:t,options:Qt(r,i),optionType:r,owner:i,windowLocation:e}),se=({name:t,value:e})=>({type:"SET_OWNER_DATA",name:t,value:e}),ae=({selected:t,parent:e})=>({type:"SET_SELECTED",parent:e,selected:t}),ne=()=>({type:"UNSET"}),le=(t,e)=>{switch(e.type){case"SET":return t.setIn(["active"],!0).setIn(["cursorPosition"],e.cursorPosition).setIn(["options"],e.options).setIn(["length"],e.options.length).setIn(["optionType"],e.optionType).setIn(["selected"],-1).setIn(["owner"],e.owner).setIn(["windowLocation"],e.windowLocation);case"SET_OWNER_DATA":return t.setIn(["owner",e.name],e.value);case"SELECT_PREV":{const e=t.selected<1?t.selected:t.selected-1;return t.setIn(["selected"],e)}case"SELECT_NEXT":{const e=t.selected>=t.length-1?t.selected:t.selected+1;return t.setIn(["selected"],e)}case"SELECT_PARENT":{if(1>=t.getIn(["parent"]).length)return t;const e=t.getIn(["parent"]).asMutable(),r=e[e.length-1],i=[].concat(e).splice(0,e.length-1),o=()=>{if((0,a.isEqual)([0],i))return t.getIn(["options"]).length;const e=[].concat(i).splice(1).join("-children-").split("-"),r=["options"].concat(e).concat(["children"]);return(t.getIn(r)||[]).length};return t.setIn(["parent"],i).setIn(["selected"],r).setIn(["length"],o())}case"SELECT_CHILD":{const e=(()=>{if((0,a.isEqual)([0],t.parent))return[String(t.getIn(["selected"]))];return[].concat(t.getIn(["parent"]).asMutable()).splice(1).concat([t.getIn(["selected"])]).join("-children-").split("-")})(),r=(0,a.concat)(["options"],e,["children"]);if(!t.getIn(r))return t;const i=t.getIn(r)||[];return t.setIn(["parent"],(0,a.concat)(t.getIn(["parent"]).asMutable(),[t.getIn(["selected"])])).setIn(["selected"],0).setIn(["length"],i.length)}case"SET_SELECTED":{const r=()=>{if((0,a.isEqual)(t.getIn(["parent"]).asMutable(),e.parent))return t.getIn(["length"]);if((0,a.isEqual)([0],e.parent))return t.getIn(["options"]).length;const r=[].concat(e.parent).splice(1).join("-children-").split("-"),i=["options"].concat(r).concat(["children"]);return(t.getIn(i)||[]).length};return t.setIn(["parent"],e.parent).setIn(["selected"],e.selected).setIn(["length"],r())}case"UNSET":return t.setIn(["active"],!1).setIn(["cursorPosition"],{x:0,y:0}).setIn(["optionType"],"module").setIn(["parent"],[0]).setIn(["selected"],-1).setIn(["options"],[]).setIn(["length"],0).setIn(["owner"],{}).setIn(["windowLocation"],"app");default:return t}},de=t=>t.getIn(["active"]),pe=t=>t;function ue(t,e="expected a function, instead received "+typeof t){if("function"!=typeof t)throw new TypeError(e)}var ce=t=>Array.isArray(t)?t:[t];function ge(t){const e=Array.isArray(t[0])?t[0]:t;return function(t,e="expected all items to be functions, instead received the following types: "){if(!t.every((t=>"function"==typeof t))){const r=t.map((t=>"function"==typeof t?`function ${t.name||"unnamed"}()`:typeof t)).join(", ");throw new TypeError(`${e}[${r}]`)}}(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function be(t,e){const r=[],{length:i}=t;for(let o=0;o<i;o++)r.push(t[o].apply(null,e));return r}Symbol(),Object.getPrototypeOf({});var me="undefined"!=typeof WeakRef?WeakRef:class{constructor(t){this.value=t}deref(){return this.value}};function he(t,e={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=e;let o,s=0;function a(){let e=r;const{length:a}=arguments;for(let t=0,r=a;t<r;t++){const r=arguments[t];if("function"==typeof r||"object"==typeof r&&null!==r){let t=e.o;null===t&&(e.o=t=new WeakMap);const i=t.get(r);void 0===i?(e={s:0,v:void 0,o:null,p:null},t.set(r,e)):e=i}else{let t=e.p;null===t&&(e.p=t=new Map);const i=t.get(r);void 0===i?(e={s:0,v:void 0,o:null,p:null},t.set(r,e)):e=i}}const n=e;let l;if(1===e.s?l=e.v:(l=t.apply(null,arguments),s++),n.s=1,i){const t=o?.deref?.()??o;null!=t&&i(t,l)&&(l=t,0!==s&&s--);o="object"==typeof l&&null!==l||"function"==typeof l?new me(l):l}return n.v=l,l}return a.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function ye(t,...e){const r="function"==typeof t?{memoize:t,memoizeOptions:e}:t,i=(...t)=>{let e,i=0,o=0,s={},a=t.pop();"object"==typeof a&&(s=a,a=t.pop()),ue(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const n={...r,...s},{memoize:l,memoizeOptions:d=[],argsMemoize:p=he,argsMemoizeOptions:u=[],devModeChecks:c={}}=n,g=ce(d),b=ce(u),m=ge(t),h=l((function(){return i++,a.apply(null,arguments)}),...g);const y=p((function(){o++;const t=be(m,arguments);return e=h.apply(null,t),e}),...b);return Object.assign(y,{resultFunc:a,memoizedResultFunc:h,dependencies:m,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>e,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:l,argsMemoize:p})};return Object.assign(i,{withTypes:()=>i}),i}var fe=ye(he),ve=Object.assign(((t,e=fe)=>{!function(t,e="expected an object, instead received "+typeof t){if("object"!=typeof t)throw new TypeError(e)}(t,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);const r=Object.keys(t);return e(r.map((e=>t[e])),((...t)=>t.reduce(((t,e,i)=>(t[r[i]]=e,t)),{})))}),{withTypes:()=>ve});const Me=fe([t=>t?.getIn(["owner","id"],""),(t,e)=>e],((t,e)=>!!t&&t===e)),Ae=fe([t=>t,(t,e)=>e],((t,e)=>{const r=t?.getIn(["owner","source"],""),i=t?.getIn(["owner","fieldLabel"],"");return"rightMenu"===r&&i===e})),_e=G()({active:!1,cursorPosition:{x:0,y:0},windowLocation:"app",options:[],optionType:"module",parent:[0],selected:-1,length:0,owner:null}),Ce=()=>{(0,d.select)("divi/right-click-options")||(0,d.registerStore)("divi/right-click-options",{actions:t,reducer:le,selectors:e,initialState:_e})}}(),(window.divi=window.divi||{}).rightClickOptions=i}();
!function(){var t={33042:function(t,e,r){var n;!function(){"use strict";var o=function t(e){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function a(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function s(t,e,r){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:r})}function i(t,e){s(t,e,(function(){throw new g("The "+e+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(r=e)||Array.isArray(r)||null===r||void 0!==e.use_static&&(o.use_static=Boolean(e.use_static));var c="__immutable_invariants_hold";function u(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,c)))}function p(t,e){return t===e||t!=t&&e!=e}function l(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}var d=["setPrototypeOf"],f=d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),y=d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function g(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function h(t,e){for(var r in s(t,c,!0),e)e.hasOwnProperty(r)&&i(t,e[r]);return Object.freeze(t),t}function b(t,e){var r=t[e];s(t,e,(function(){return W(r.apply(t,arguments))}))}function M(t,e,r){var n=r&&r.deep;if(t in this&&(n&&this[t]!==e&&l(e)&&l(this[t])&&(e=W.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var o=S.call(this);return o[t]=W(e),I(o)}g.prototype=new Error,g.prototype.constructor=Error;var v=W([]);function A(t,e,r){var n=t[0];if(1===t.length)return M.call(this,n,e,r);var o,a=t.slice(1),s=this[n];if("object"==typeof s&&null!==s)o=W.setIn(s,a,e);else{var i=a[0];o=""!==i&&isFinite(i)?A.call(v,a,e):R.call(L,a,e)}if(n in this&&s===o)return this;var c=S.call(this);return c[n]=o,I(c)}function I(t){for(var e in m){if(m.hasOwnProperty(e))b(t,m[e])}o.use_static||(s(t,"flatMap",T),s(t,"asObject",E),s(t,"asMutable",S),s(t,"set",M),s(t,"setIn",A),s(t,"update",$),s(t,"updateIn",F),s(t,"getIn",B));for(var r=0,n=t.length;r<n;r++)t[r]=W(t[r]);return h(t,f)}function w(){return new Date(this.getTime())}function T(t){if(0===arguments.length)return this;var e,r=[],n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return I(r)}function C(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,r){"number"==typeof t&&(r[e]=t.toString())})),t=function(t,r){return-1!==e.indexOf(r)}}var r=a(this);for(var n in this)this.hasOwnProperty(n)&&!1===t(this[n],n)&&(r[n]=this[n]);return V(r)}function S(t){var e,r,n=[];if(t&&t.deep)for(e=0,r=this.length;e<r;e++)n.push(O(this[e]));else for(e=0,r=this.length;e<r;e++)n.push(this[e]);return n}function E(t){"function"!=typeof t&&(t=function(t){return t});var e,r={},n=this.length;for(e=0;e<n;e++){var o=t(this[e],e,this),a=o[0],s=o[1];r[a]=s}return V(r)}function O(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,c)||t instanceof Date?t:W.asMutable(t,{deep:!0})}function P(t,e){for(var r in t)Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r]);return e}function N(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var r,n,o=Array.isArray(t),s=e&&e.deep,i=e&&e.mode||"merge",c=e&&e.merger;function u(t,n,o){var i,u=W(n[o]),d=c&&c(t[o],u,e),f=t[o];void 0===r&&void 0===d&&t.hasOwnProperty(o)&&p(u,f)||(p(f,i=void 0!==d?d:s&&l(f)&&l(u)?W.merge(f,u,e):u)&&t.hasOwnProperty(o)||(void 0===r&&(r=P(t,a(t))),r[o]=i))}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(void 0===r&&(r=P(t,a(t))),delete r[n])}if(o)for(var f=0,m=t.length;f<m;f++){var y=t[f];for(n in y)y.hasOwnProperty(n)&&u(void 0!==r?r:this,y,n)}else{for(n in t)Object.getOwnPropertyDescriptor(t,n)&&u(this,t,n);"replace"===i&&d(this,t)}return void 0===r?this:V(r)}function j(t,e){var r=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return W.merge(this,t,{deep:r,mode:"replace"})}var _,k,D,L=W({});function R(t,e,r){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=t[0];if(1===t.length)return G.call(this,n,e,r);var o,s=t.slice(1),i=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof i&&null!==i?W.setIn(i,s,e):R.call(L,s,e),this.hasOwnProperty(n)&&i===o)return this;var c=P(this,a(this));return c[n]=o,V(c)}function G(t,e,r){var n=r&&r.deep;if(this.hasOwnProperty(t)&&(n&&this[t]!==e&&l(e)&&l(this[t])&&(e=W.merge(this[t],e,{deep:!0,mode:"replace"})),p(this[t],e)))return this;var o=P(this,a(this));return o[t]=W(e),V(o)}function $(t,e){var r=Array.prototype.slice.call(arguments,2),n=this[t];return W.set(this,t,e.apply(n,[n].concat(r)))}function x(t,e){for(var r=0,n=e.length;null!=t&&r<n;r++)t=t[e[r]];return r&&r==n?t:void 0}function F(t,e){var r=Array.prototype.slice.call(arguments,2),n=x(this,t);return W.setIn(this,t,e.apply(n,[n].concat(r)))}function B(t,e){var r=x(this,t);return void 0===r?e:r}function U(t){var e,r=a(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(r[e]=O(this[e]));else for(e in this)this.hasOwnProperty(e)&&(r[e]=this[e]);return r}function z(){return{}}function V(t){return o.use_static||(s(t,"merge",N),s(t,"replace",j),s(t,"without",C),s(t,"asMutable",U),s(t,"set",G),s(t,"setIn",R),s(t,"update",$),s(t,"updateIn",F),s(t,"getIn",B)),h(t,d)}function W(t,e,r){if(u(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===n)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(W);if(Array.isArray(t))return I(t.slice());if(t instanceof Date)return a=new Date(t.getTime()),o.use_static||s(a,"asMutable",w),h(a,y);var a,i=e&&e.prototype,c=(i&&i!==Object.prototype?function(){return Object.create(i)}:z)();if(null==r&&(r=64),r<=0)throw new g("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var p in r-=1,t)Object.getOwnPropertyDescriptor(t,p)&&(c[p]=W(t[p],void 0,r));return V(c)}function Y(t){return function(){var e=[].slice.call(arguments),r=e.shift();return t.apply(r,e)}}function H(t,e){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?e.apply(n,r):t.apply(n,r)}}return W.from=W,W.isImmutable=u,W.ImmutableError=g,W.merge=Y(N),W.replace=Y(j),W.without=Y(C),W.asMutable=(_=U,k=S,D=w,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?k.apply(e,t):e instanceof Date?D.apply(e,t):_.apply(e,t)}),W.set=H(G,M),W.setIn=H(R,A),W.update=Y($),W.updateIn=Y(F),W.getIn=Y(B),W.flatMap=Y(T),W.asObject=Y(E),o.use_static||(W.static=t({use_static:!0})),Object.freeze(W),W}();void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};!function(){"use strict";r.r(n),r.d(n,{ClipboardAttrsMapsParser:function(){return l},ClipboardAttrsMapsParserContainer:function(){return f},addComponentAttrsMaps:function(){return y},addItem:function(){return g},buildFieldLabelsMap:function(){return C},cacheState:function(){return h},convertGroupPreset:function(){return O},copyModuleToClipboard:function(){return E},effects:function(){return I},extractAttrsByGroupAttrsMap:function(){return P},getActiveComponentAttrsMaps:function(){return it},getAttrsMaps:function(){return T},getComponentAttrsMaps:function(){return ct},getComponentAttrsMapsId:function(){return w},getCopyType:function(){return _},getDataFromIndexedDB:function(){return Y},getFullAttrPath:function(){return k},getItems:function(){return ut},getLastItem:function(){return lt},getLastSync:function(){return pt},getOrWaitForAttrsMaps:function(){return j},hasOverlappingAttrNames:function(){return D},hasOverlappingGroupNames:function(){return L},insertSourceIntoTargetAttrs:function(){return R},mapAttrsIntoMatchingGroupNameAttrs:function(){return G},mergeAttrsIntoAttrs:function(){return F},mergeFieldAttrIntoResponsiveAttr:function(){return U},mergeGroupPresets:function(){return J},newAttribute:function(){return B},pasteModuleFromClipboard:function(){return z},registerClipboardStore:function(){return dt},resetState:function(){return b},resetTargetAttrsBasedOnOverlapppingAttrs:function(){return x},resetTargetAttrsBasedOnOverlapppingAttrsMaps:function(){return V},saveToIndexedDB:function(){return H},setComponentAttrsMapsValue:function(){return A},setLastSync:function(){return v},syncState:function(){return M},waitUntilAttrsMapsReady:function(){return N}});var t={};r.r(t),r.d(t,{addComponentAttrsMaps:function(){return y},addItem:function(){return g},cacheState:function(){return h},resetState:function(){return b},setComponentAttrsMapsValue:function(){return A},setLastSync:function(){return v},syncState:function(){return M}});var e={};r.r(e),r.d(e,{getActiveComponentAttrsMaps:function(){return it},getComponentAttrsMaps:function(){return ct},getItems:function(){return ut},getLastItem:function(){return lt},getLastSync:function(){return pt}});var o=window.vendor.React,a=r.n(o),s=window.lodash,i=r(33042),c=r.n(i),u=window.divi.contextLibrary;let p=c()({});const l=t=>{const{attrsMapsType:e,attrsMapsCallback:r,children:n,id:i,setComponentAttrsMapsValue:c}=t;(0,o.useEffect)((()=>{c({id:i,attrsMaps:p?.asMutable({deep:!0}),resetActiveComponent:!0}),(0,s.isFunction)(r)&&r(p?.asMutable({deep:!0}))}),[]);const l={optionType:e,isParsingAttrsMaps:!0};return a().createElement(u.clipboardAttrsMapsParserContext.Provider,{value:l},a().createElement(u.fieldContext.Provider,{value:{onContainerComponentMount:t=>{const{attrName:e,subName:r,groupName:n,clipboardCategory:o,label:a}=t,i=e.split("."),c=["attrsStructureMap"].concat(i);if(e){if(a&&"string"==typeof a){const t=r?`${e}.${r}`:e;p.getIn(["fieldLabelsMap"])||(p=p.setIn(["fieldLabelsMap"],{})),p=p.setIn(["fieldLabelsMap",t],a)}if(r){const t=r.split(".");if(p=p.setIn(c.concat(t),""),p=p.setIn(["attrsCategoryMap","all",e,r],""),p=p.setIn(["attrsCategoryMap",o,e,r],""),n){const t=(0,s.get)(p,["attrsGroupNameMap",n,r]),o=t?t.length:0;p.getIn(["attrsGroupNameMap",n,r])||(p=p.setIn(["attrsGroupNameMap",n,r],[])),p=p.setIn(["attrsGroupNameMap",n,r,o],e)}}else p=p.setIn(c,""),p=p.setIn(["attrsCategoryMap","all",e],""),p=p.setIn(["attrsCategoryMap",o,e],"")}},onContainerComponentUnMount:t=>{const{attrName:e,subName:r,groupName:n,clipboardCategory:o}=t;if(!e)return;const a=e.split("."),i=(0,s.head)(a),c=["attrsStructureMap"].concat(a);if(r){const t=r.split("."),a=(0,s.head)(t),i=p.getIn(c);if(i&&!(0,s.isFunction)(i)&&(p=p.setIn(c,i?.without(a))),""===p.getIn(["attrsCategoryMap","all",e,r])){const t=p.getIn(["attrsCategoryMap","all",e]);p=p.setIn(["attrsCategoryMap","all",e],t?.without(r)),p=p.setIn(["attrsCategoryMap",o,e],t?.without(r))}n&&(p=p.setIn(["attrsGroupNameMap",n,r],(0,s.without)(p.getIn(["attrsGroupNameMap",n,r])?.asMutable(),e)),(0,s.isEmpty)((0,s.get)(p,["attrsGroupNameMap",n,r]))&&(p=p.setIn(["attrsGroupNameMap",n],p.getIn(["attrsGroupNameMap",n])?.without(r))),(0,s.isEmpty)((0,s.get)(p,["attrsGroupNameMap",n]))&&(p=p.setIn(["attrsGroupNameMap"],p.getIn(["attrsGroupNameMap"])?.without(n))),(0,s.isEmpty)((0,s.get)(p,["attrsGroupNameMap"]))&&(p=p?.without("attrsGroupNameMap")))}else p=p.setIn(["attrsStructureMap"],p.getIn(["attrsStructureMap",i])),""===p.getIn(["attrsCategoryMap","all",e])&&(p=p.setIn(["attrsCategoryMap","all"],p.getIn(["attrsCategoryMap","all"])?.without(e)),p=p.setIn(["attrsCategoryMap","all"],p.getIn(["attrsCategoryMap",o])?.without(e)));const u=[].concat(c);for(let t=0;t<c.length;t++){if(!(0,s.isEmpty)(u)&&(0,s.isEmpty)((0,s.get)(p,u))){(0,s.unset)(p,u);const t=(0,s.take)(u,u.length-1),e=(0,s.last)(u);if(p.getIn(t)){const r=p.getIn(t);p=p.setIn(t,r?.without(e))}}u.splice(-1)}(0,s.isEmpty)(p.getIn(["attrsCategoryMap","all",e]))&&(p=p.setIn(["attrsCategoryMap","all"],p.getIn(["attrsCategoryMap","all"])?.without(e)),p=p.setIn(["attrsCategoryMap",o],p.getIn(["attrsCategoryMap",o])?.without(e)))},containerRenderer:()=>null}},a().createElement("div",{className:"et-vb-clipboard-attrs-maps-parser"},n)))};var d=window.divi.data;const f=()=>{const{id:t,attrsMapsType:e,children:r,attrsMapsCallback:n,setComponentAttrsMapsValue:a}=(0,d.useSelect)((t=>{const e=t("divi/clipboard").getActiveComponentAttrsMaps(),r=t("divi/clipboard").getComponentAttrsMaps(e);return{id:r?.id,attrsMapsType:r?.attrsMapsType,children:r?.component,attrsMapsCallback:r?.callback,setComponentAttrsMapsValue:(0,d.dispatch)("divi/clipboard").setComponentAttrsMapsValue}}));return(0,o.createElement)(l,{id:t,attrsMapsType:e,attrsMapsCallback:n,setComponentAttrsMapsValue:a},r)};var m=window.divi.middleware;const y=t=>({...t,type:"ADD_COMPONENT_ATTRS_MAPS"}),g=t=>({...t,type:"ADD_ITEM"}),h=()=>({type:"CACHE_STATE"}),b=()=>({type:"RESET_STATE"}),M=()=>({type:"SYNC_STATE"}),v=t=>({type:"SYNC_DATE",payload:t}),A=t=>({...t,type:"SET_COMPONENT_ATTRS_MAPS_VALUE"}),I={ADD_ITEM:[()=>{(0,d.dispatch)("divi/clipboard").cacheState()}],SET_COMPONENT_ATTRS_MAPS_VALUE:[t=>{const{attrsMaps:e}=t,r=(0,d.select)("divi/right-click-options").getState().asMutable({deep:!0}),{active:n}=r;if(n){const t=(0,s.pick)(r,["cursorPosition","optionType","owner","windowLocation"]);(0,s.set)(t,["owner","attrsMaps"],e),(0,d.dispatch)("divi/right-click-options").set(t)}}]},w=({attrsMapsType:t,name:e,moduleName:r,groupName:n,groupTabName:o,groupId:a})=>{switch(t){case"group":return`${t}-${r}-${n}-${a}`;case"groupTab":return`${t}-${r}-${n}-${o}`;case"module":return`${t}-${r}`;default:return`${t}-${e}`}},T=({attrsMapsType:t,moduleName:e,groupName:r,groupTabName:n})=>{const o=w({attrsMapsType:t,moduleName:e,groupName:r,groupTabName:n}),a=(0,d.select)("divi/clipboard").getComponentAttrsMaps(o);return a?a.getIn(["attrsMaps"]).asMutable({deep:!0}):null},C=t=>{const e={};if(t?.name){const r=T({attrsMapsType:"module",moduleName:t.name});r?.fieldLabelsMap&&Object.assign(e,r.fieldLabelsMap)}return e};var S=window.divi.moduleUtils;const E=t=>{if(!t)return;const e=(0,d.select)("divi/events").getSelectedModules().asMutable({deep:!0}).map((t=>t.id)),r=(0,s.uniq)(e.concat(t)),n=(0,s.flatten)(r.map((t=>(0,d.select)("divi/edit-post").getModuleStructureIds(t)))),o=(0,d.select)("divi/edit-post").getModulesByIds(n);if(r.length>1){const e=(0,d.select)("divi/edit-post").getModulesByIds(r),n=(0,S.extractModuleTypes)(e,{"fullwidth-section":"section","specialty-section":"section"});1===n.length&&(0,d.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"modules",payload:{moduleType:n[0],moduleIds:r,moduleObjects:o}})}else{const e=(0,s.get)(o,[t,"props","attrs"])?(0,s.get)(o,[t,"props","attrs"]).asMutable({deep:!0}):{};(0,d.dispatch)("divi/clipboard").addItem({origin:t,clipboardType:"module",payload:{moduleId:t,moduleType:(0,S.getModuleType)((0,s.get)(o,[t,"name"]),e),moduleObjects:c()(o)}})}},O=t=>{const{payload:e}=t.clipboardItem;if(!e)return null;const r=e.groupPreset||e.attrs?.groupPreset;if(!r)return null;const n=(0,d.select)("divi/edit-post").getModuleName(t.targetModuleId),o={};Object.values(r).forEach((t=>{const e="divi/button"===t.groupName?"button":(0,S.optionGroupPresetResolverGroupId)(t.groupName,n);e&&(o[e]={presetId:t.presetId??null,groupName:t.groupName})}));return{...e,groupPreset:c()(o)}},P=({attrs:t,attrsMap:e})=>{if((0,s.isEmpty)(t))return t;const r=(0,s.keys)(e);return(0,s.pick)(t,r)},N=async({id:t,attrsMapsType:e,name:r,component:n,callback:o,waitForCaching:a=!1})=>{const s=(0,d.select)("divi/clipboard").getComponentAttrsMaps(t);if(s){const t=s.getIn(["attrsMaps"]);o(t?t.asMutable({deep:!0}):{})}else if(a){const a=await((t,e,r,n)=>new Promise((o=>{(0,d.dispatch)("divi/clipboard").addComponentAttrsMaps({payload:{id:t,attrsMapsType:e,name:r,component:n,callback:t=>{o(t)}}})})))(t,e,r,n);o(a)}else(0,d.dispatch)("divi/clipboard").addComponentAttrsMaps({payload:{id:t,attrsMapsType:e,name:r,component:n,callback:o}})},j=async({moduleIds:t,processModule:e,onComplete:r})=>{if(0===t.length)return void r?.();const n=[];t.forEach((t=>{const e=(0,d.select)("divi/edit-post").getModuleName(t);if(!e)return;const r=w({attrsMapsType:"module",moduleName:e}),o=(0,S.getSettingsComponent)(e);o&&n.push({moduleId:t,moduleName:e,attrsMapsId:r,component:o})})),0!==n.length?(await n.reduce((async(t,{moduleId:r,moduleName:n,attrsMapsId:o,component:a})=>{await t;try{await N({id:o,attrsMapsType:"module",name:n,component:a,callback:()=>{e(r)},waitForCaching:!0})}catch(t){}}),Promise.resolve()),r?.()):r?.()};function _(t,e){return"content"===t&&"divi/background"!==e?.toLowerCase()?"content":"style"}const k=({attrNamePath:t,breakpoint:e,state:r,subNamePath:n})=>t.concat([e,r]).concat(n),D=(t,e)=>{const r=(0,s.keys)(t),n=(0,s.keys)(e);return(0,s.intersection)(r,n).length>0},L=(t,e)=>{const r=(0,s.keys)(t),n=(0,s.keys)(e);return(0,s.intersection)(r,n).length>0},R=({sourceAttrs:t,targetAttrsMap:e,targetAttrs:r})=>{let n=r;if(t.groupPreset){const e=t.groupPreset.asMutable({deep:!0});Object.entries(e).forEach((([t,e])=>{n=n.setIn(["groupPreset",t],e)}))}return t.modulePreset&&(n=n.setIn(["modulePreset"],t.modulePreset)),(0,s.forEach)(e,((e,r)=>{if("groupPreset"===r||"modulePreset"===r)return;const o=t.getIn(r.split("."));o&&((0,s.isObject)(e)&&!(0,s.isEmpty)(e)?(0,s.forEach)(o,((t,o)=>{(0,s.forEach)(t,((t,a)=>{(0,s.forEach)(e,((e,i)=>{const c=i.split("."),u=t.getIn(c);if(!(0,s.isUndefined)(u)){const t=k({attrNamePath:r.split("."),breakpoint:o,state:a,subNamePath:c});n=n.setIn(t,u)}}))}))})):n=n.setIn(r.split("."),o))})),n},G=({sourceAttrs:t,sourceAttrsGroupNameMap:e,targetAttrsGroupNameMap:r})=>{const n={};return(0,s.forEach)(e,((e,o)=>{(0,s.forEach)(e,((e,a)=>{const i=e[0],c=(0,s.get)(t,i);(0,s.isObject)(c)&&(0,s.forEach)(c,((t,e)=>{(0,s.forEach)(t,((t,i)=>{const c=(0,s.get)(t,a);if(c){const t=(0,s.get)(r,[o,a,0]);if(t){const r=[].concat(t.split(".")).concat([e,i]).concat(a.split("."));(0,s.set)(n,r,c)}}}))}))}))})),c()(n)};var $=window.divi.seamlessImmutableExtension;const x=({sourceAttrs:t,targetAttrs:e})=>{let r=e;const n=t.asMutable({deep:!0}),o=(t,e,n=[])=>{t&&e&&Object.keys(t).forEach((a=>{const i=[...n,a],c=t[a],u=e[a];if("groupPreset"!==a&&"modulePreset"!==a)if(c&&u&&"object"==typeof c&&"object"==typeof u)o(c,u,i);else if(null!==c&&null!==u){const t=r.getIn(i);(0,s.isObject)(t)?(0,s.forEach)(t,((t,e)=>{(0,s.forEach)(t,((t,n)=>{const o=k({attrNamePath:i,breakpoint:e,state:n,subNamePath:[]});r=(0,$.removeEmptyProperties)((0,$.deepWithout)(r,o))}))})):r=(0,$.removeEmptyProperties)((0,$.deepWithout)(r,i))}}))};return o(n,e.asMutable({deep:!0})),r},F=({sourceAttrs:t,targetAttrsMap:e,targetAttrs:r})=>{const n=x({sourceAttrs:t,targetAttrs:r});return R({sourceAttrs:t,targetAttrsMap:e,targetAttrs:n})},B=(t,e=S.defaultBreakpointNames)=>{const r=(0,s.zipObject)(e,e.map((()=>(0,s.zipObject)(S.states,S.states.map((()=>""))))));return t?c()(r):r},U=({sourceFieldAttr:t,targetResponsiveAttr:e,targetSubName:r})=>{const n=B(!0).merge(t,{deep:!0});let o=e;return(0,s.forEach)(n,((t,e)=>{(0,s.forEach)(t,((t,n)=>{const a=r?[e,n].concat(r.split(".")):[e,n];if(""===t){const t=a.length-1,r=a.slice(0,t),i=a.slice(t);if(o.getIn(a)){const t=o.getIn(r);o=o.setIn(r,t.without(i.join(".")))}const c=o.getIn([e,n]);if(c&&(0,s.isEmpty)(c)){const t=o?.[e];o=o.setIn([e],t.without(n))}}else o=o.setIn(a,t)}));const n=o.getIn([e]);n&&(0,s.isEmpty)(n)&&(o=o.without(e))})),o},z=t=>{if(!t)return;const e=(0,d.select)("divi/module-library").getModuleAppearanceSettings(),r=(0,d.select)("divi/settings").getSetting(["themeBuilder","layout"]),n=(0,d.select)("divi/module").getModuleCount(),o=(0,d.select)("divi/edit-post").getModule(t),a=(0,S.getModuleType)((0,s.get)(o,"name"),(0,s.get)(o,["props","attrs"],c()({})).asMutable({deep:!0})),i=(0,d.select)("divi/app-ui").hasModulesPermission(a,"add"),u=(0,d.select)("divi/clipboard").getLastItem(["module","modules"]),p=(0,d.select)("divi/edit-post").getParentModuleType(t),l=(0,s.get)(u,"clipboardType"),f=(u.clipboardType,(0,s.get)(u,["payload","moduleType"])),m=(0,S.isValidChild)(p,f)?"after":!!(0,S.isValidChild)(a,f)&&"inside";u&&m&&i&&("modules"===u.clipboardType?((0,d.dispatch)("divi/edit-post").copyModulesFromPayload({payload:{...u.payload,moduleIds:u.payload.moduleIds.asMutable({deep:!0})},position:m,targetId:t,moduleAppearanceSettings:e,themeBuilderLayout:r,moduleCount:n}),(0,d.dispatch)("divi/events").clearSelection()):"module"===l&&(0,d.dispatch)("divi/edit-post").copyModuleFromPayload({payload:u.payload,position:m,targetId:t,moduleAppearanceSettings:e,themeBuilderLayout:r,moduleCount:n},(0,s.get)(o,"name")))},V=({sourceAttrsMap:t,targetAttrsMap:e,targetAttrs:r})=>{let n=r;const o=(0,s.keys)(e);return(0,s.forEach)(t,((t,e)=>{if(!(0,s.includes)(o,e))return;if("groupPreset"===e)return;const a=r.getIn(e.split("."));if(a&&(0,s.isObject)(a))if((0,s.isObject)(t)&&!(0,s.isEmpty)(t)){const r=n.getIn(e.split("."));(0,s.forEach)(r,((r,o)=>{(0,s.forEach)(r,((r,a)=>{(0,s.forEach)(t,((t,i)=>{const c=i.split("."),u=r.getIn(c);if(!(0,s.isUndefined)(u)){const t=k({attrNamePath:e.split("."),breakpoint:o,state:a,subNamePath:c});n=(0,$.removeEmptyProperties)((0,$.deepWithout)(n,t))}}))}))}))}else n=(0,$.removeEmptyProperties)((0,$.deepWithout)(n,e.split(".")))})),n},W=async(t,e)=>{const r=indexedDB.open(t,e);return new Promise(((t,e)=>{r.onupgradeneeded=e=>{const r=e.target.result;r.createObjectStore("clipboard",{autoIncrement:!0}),t(r)},r.onsuccess=e=>{const r=e.target.result;t(r)},r.onerror=t=>{const{error:r}=t.target;e(r)}}))},Y=async t=>{const e=await W("D5Clipboard",1);return new Promise(((r,n)=>{const o=e.transaction("clipboard","readonly").objectStore("clipboard").getAll(t);o.onsuccess=()=>{r(o.result)},o.onerror=()=>{n(o.error)}}))},H=async t=>{const e=(await W("D5Clipboard",1)).transaction("clipboard","readwrite").objectStore("clipboard"),r=new Date;e.put(r,"timestamp"),e.put(JSON.stringify(t),"items")},J=({sourcePresets:t,targetPresets:e})=>t?e?{...e,...t}:t:e,q={CACHE_STATE:[()=>t=>async e=>{const r=(0,d.select)("divi/clipboard").getItems();try{await H(r)}catch(t){}return t(e)}],SYNC_STATE:[()=>t=>async e=>{let r=[];try{const t=await Y("timestamp"),e=(0,d.select)("divi/clipboard").getLastSync(),n=await Y("items");(!e||t?.[0]>e)&&(r=JSON.parse(n),(0,d.dispatch)("divi/clipboard").setLastSync(new Date))}catch(t){}return t({...e,payload:r})}]},K=c()({items:[],componentAttrsMaps:{},componentAttrsMapsActive:"",lastSync:null}),Q=(t,e)=>{switch(e.type){case"ADD_ITEM":{const r=50,n=(0,s.get)(t,["items","length"],0);if(n+1>r){const o=n+1-r;return t.setIn(["items"],t.getIn(["items"],[]).slice(o)).setIn(["items",String(r-1)],{clipboardType:e.clipboardType,origin:e.origin,payload:e.payload})}return t.setIn(["items",String(n)],{clipboardType:e.clipboardType,origin:e.origin,payload:e.payload})}case"ADD_COMPONENT_ATTRS_MAPS":{const{payload:r}=e,{id:n}=r;return t.setIn(["componentAttrsMaps",n],{id:n,...r}).setIn(["componentAttrsMapsActive"],n)}case"RESET_STATE":return K;case"SYNC_STATE":return!e.payload||(0,s.isEmpty)(e.payload)?t:t.setIn(["items"],[...e.payload]);case"CACHE_STATE":default:return t;case"SYNC_DATE":return t.setIn(["lastSync"],e.payload);case"SET_COMPONENT_ATTRS_MAPS_VALUE":return t=t.setIn(["componentAttrsMaps",e.id,"component"],null),e.resetActiveComponent&&(t=t.setIn(["componentAttrsMapsActive"],"")),t.setIn(["componentAttrsMaps",e.id,"attrsMaps"],e.attrsMaps)}};function X(t,e="expected a function, instead received "+typeof t){if("function"!=typeof t)throw new TypeError(e)}var Z=t=>Array.isArray(t)?t:[t];function tt(t){const e=Array.isArray(t[0])?t[0]:t;return function(t,e="expected all items to be functions, instead received the following types: "){if(!t.every((t=>"function"==typeof t))){const r=t.map((t=>"function"==typeof t?`function ${t.name||"unnamed"}()`:typeof t)).join(", ");throw new TypeError(`${e}[${r}]`)}}(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function et(t,e){const r=[],{length:n}=t;for(let o=0;o<n;o++)r.push(t[o].apply(null,e));return r}Symbol(),Object.getPrototypeOf({});var rt="undefined"!=typeof WeakRef?WeakRef:class{constructor(t){this.value=t}deref(){return this.value}};function nt(t,e={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=e;let o,a=0;function s(){let e=r;const{length:s}=arguments;for(let t=0,r=s;t<r;t++){const r=arguments[t];if("function"==typeof r||"object"==typeof r&&null!==r){let t=e.o;null===t&&(e.o=t=new WeakMap);const n=t.get(r);void 0===n?(e={s:0,v:void 0,o:null,p:null},t.set(r,e)):e=n}else{let t=e.p;null===t&&(e.p=t=new Map);const n=t.get(r);void 0===n?(e={s:0,v:void 0,o:null,p:null},t.set(r,e)):e=n}}const i=e;let c;if(1===e.s?c=e.v:(c=t.apply(null,arguments),a++),i.s=1,n){const t=o?.deref?.()??o;null!=t&&n(t,c)&&(c=t,0!==a&&a--);o="object"==typeof c&&null!==c||"function"==typeof c?new rt(c):c}return i.v=c,c}return s.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function ot(t,...e){const r="function"==typeof t?{memoize:t,memoizeOptions:e}:t,n=(...t)=>{let e,n=0,o=0,a={},s=t.pop();"object"==typeof s&&(a=s,s=t.pop()),X(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const i={...r,...a},{memoize:c,memoizeOptions:u=[],argsMemoize:p=nt,argsMemoizeOptions:l=[],devModeChecks:d={}}=i,f=Z(u),m=Z(l),y=tt(t),g=c((function(){return n++,s.apply(null,arguments)}),...f);const h=p((function(){o++;const t=et(y,arguments);return e=g.apply(null,t),e}),...m);return Object.assign(h,{resultFunc:s,memoizedResultFunc:g,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>e,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:c,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var at=ot(nt),st=Object.assign(((t,e=at)=>{!function(t,e="expected an object, instead received "+typeof t){if("object"!=typeof t)throw new TypeError(e)}(t,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);const r=Object.keys(t);return e(r.map((e=>t[e])),((...t)=>t.reduce(((t,e,n)=>(t[r[n]]=e,t)),{})))}),{withTypes:()=>st});const it=at([t=>t],(t=>t.getIn(["componentAttrsMapsActive"]))),ct=at([t=>t,(t,e)=>e],((t,e)=>t.getIn(["componentAttrsMaps",e]))),ut=t=>t.getIn(["items"]),pt=t=>t.getIn(["lastSync"]),lt=at([t=>t,(t,e)=>e],((t,e="all")=>{const r=ut(t);return"all"===e?(0,s.last)(r):(0,s.findLast)(r,(t=>(0,s.isArray)(e)?(0,s.includes)(e,t.clipboardType):t.clipboardType===e))})),dt=()=>{if((0,d.select)("divi/clipboard"))return;const r=(0,d.registerStore)("divi/clipboard",{actions:t,reducer:Q,selectors:e,initialState:K});(0,m.applyMiddlewares)(r,q),(0,m.applyEffects)(r,I),(0,d.dispatch)("divi/clipboard").syncState()}}(),(window.divi=window.divi||{}).clipboard=n}();
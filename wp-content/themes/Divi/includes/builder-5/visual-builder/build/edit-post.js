!function(){var e={53316:function(e){function t(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),s=t.get(i);return void 0===s&&(s=e.call(this,r),t.set(i,s)),s}function n(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function r(e,t,n,r,o){return n.bind(t,e,r,o)}function o(e,o){return r(e,this,1===e.length?t:n,o.cache.create(),o.serializer)}function i(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var a={create:function(){return new s}};e.exports=function(e,t){var n=t&&t.cache?t.cache:a,r=t&&t.serializer?t.serializer:i;return(t&&t.strategy?t.strategy:o)(e,{cache:n,serializer:r})},e.exports.strategies={variadic:function(e,t){return r(e,this,n,t.cache.create(),t.serializer)},monadic:function(e,n){return r(e,this,t,n.cache.create(),n.serializer)}}},33042:function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function a(e,t){s(e,t,(function(){throw new I("The "+t+" method cannot be invoked on an Immutable data structure.")}))}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var u="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,u)))}function c(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],m=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),g=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),f=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function I(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function y(e,t){for(var n in s(e,u,!0),t)t.hasOwnProperty(n)&&a(e,t[n]);return Object.freeze(e),e}function E(e,t){var n=e[t];s(e,t,(function(){return H(n.apply(e,arguments))}))}function h(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var o=T.call(this);return o[e]=H(t),v(o)}I.prototype=new Error,I.prototype.constructor=Error;var M=H([]);function _(e,t,n){var r=e[0];if(1===e.length)return h.call(this,r,t,n);var o,i=e.slice(1),s=this[r];if("object"==typeof s&&null!==s)o=H.setIn(s,i,t);else{var a=i[0];o=""!==a&&isFinite(a)?_.call(M,i,t):k.call(w,i,t)}if(r in this&&s===o)return this;var u=T.call(this);return u[r]=o,v(u)}function v(e){for(var t in g){if(g.hasOwnProperty(t))E(e,g[t])}o.use_static||(s(e,"flatMap",b),s(e,"asObject",L),s(e,"asMutable",T),s(e,"set",h),s(e,"setIn",_),s(e,"update",B),s(e,"updateIn",Y),s(e,"getIn",F));for(var n=0,r=e.length;n<r;n++)e[n]=H(e[n]);return y(e,m)}function O(){return new Date(this.getTime())}function b(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return v(n)}function A(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return z(n)}function T(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(S(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function L(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],s=o[1];n[i]=s}return z(n)}function S(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,u)||e instanceof Date?e:H.asMutable(e,{deep:!0})}function D(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function C(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),s=t&&t.deep,a=t&&t.mode||"merge",u=t&&t.merger;function l(e,r,o){var a,l=H(r[o]),p=u&&u(e[o],l,t),m=e[o];void 0===n&&void 0===p&&e.hasOwnProperty(o)&&c(l,m)||(c(m,a=void 0!==p?p:s&&d(m)&&d(l)?H.merge(m,l,t):l)&&e.hasOwnProperty(o)||(void 0===n&&(n=D(e,i(e))),n[o]=a))}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=D(e,i(e))),delete n[r])}if(o)for(var m=0,g=e.length;m<g;m++){var f=e[m];for(r in f)f.hasOwnProperty(r)&&l(void 0!==n?n:this,f,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&l(this,e,r);"replace"===a&&p(this,e)}return void 0===n?this:z(n)}function R(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return H.merge(this,e,{deep:n,mode:"replace"})}var P,U,N,w=H({});function k(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return G.call(this,r,t,n);var o,s=e.slice(1),a=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof a&&null!==a?H.setIn(a,s,t):k.call(w,s,t),this.hasOwnProperty(r)&&a===o)return this;var u=D(this,i(this));return u[r]=o,z(u)}function G(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=H.merge(this[e],t,{deep:!0,mode:"replace"})),c(this[e],t)))return this;var o=D(this,i(this));return o[e]=H(t),z(o)}function B(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return H.set(this,e,t.apply(r,[r].concat(n)))}function V(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function Y(e,t){var n=Array.prototype.slice.call(arguments,2),r=V(this,e);return H.setIn(this,e,t.apply(r,[r].concat(n)))}function F(e,t){var n=V(this,e);return void 0===n?t:n}function j(e){var t,n=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=S(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function x(){return{}}function z(e){return o.use_static||(s(e,"merge",C),s(e,"replace",R),s(e,"without",A),s(e,"asMutable",j),s(e,"set",G),s(e,"setIn",k),s(e,"update",B),s(e,"updateIn",Y),s(e,"getIn",F)),y(e,p)}function H(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(H);if(Array.isArray(e))return v(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||s(i,"asMutable",O),y(i,f);var i,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:x)();if(null==n&&(n=64),n<=0)throw new I("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var c in n-=1,e)Object.getOwnPropertyDescriptor(e,c)&&(u[c]=H(e[c],void 0,n));return z(u)}function $(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function W(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return H.from=H,H.isImmutable=l,H.ImmutableError=I,H.merge=$(C),H.replace=$(R),H.without=$(A),H.asMutable=(P=j,U=T,N=O,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?U.apply(t,e):t instanceof Date?N.apply(t,e):P.apply(t,e)}),H.set=W(G,h),H.setIn=W(k,_),H.update=$(B),H.updateIn=$(Y),H.getIn=$(F),H.flatMap=$(b),H.asObject=$(L),o.use_static||(H.static=e({use_static:!0})),Object.freeze(H),H}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{__DEPRECATED__getModulesByIds:function(){return kt},addColumnViaDivider:function(){return te},addGrid:function(){return re},addModule:function(){return oe},addModuleGroup:function(){return ie},addRow:function(){return se},addSpecialtySection:function(){return ae},changeColumnStructure:function(){return ue},changeColumnStructureForDragAndDrop:function(){return le},clearLayout:function(){return ce},clearMemoizedFilterModulesByIds:function(){return j},clearRemovedModules:function(){return de},cloneColumn:function(){return pe},cloneModule:function(){return me},conditionalDebouncedHistoryUpdate:function(){return lt},convertSelectedModulesToGroup:function(){return ne},copyModule:function(){return ge},copyModuleFromLibrary:function(){return fe},copyModuleFromPayload:function(){return Ie},copyModulesFromPayload:function(){return ye},createMemoizeFunction:function(){return B},disableGlobalModule:function(){return Ee},editChildren:function(){return he},editGroupPresetAttr:function(){return Je},editModuleAttribute:function(){return Me},editModuleProp:function(){return _e},editUnsyncAttrs:function(){return ve},effects:function(){return dt},extractInlineFontFamilies:function(){return $},filterModulesByIds:function(){return V},getAncestorModules:function(){return Tt},getChildModules:function(){return Xt},getClonedModules:function(){return N},getCloudLayoutMetadata:function(){return Kt},getContent:function(){return Lt},getDescendantModulesByType:function(){return Zt},getGlobalLayoutId:function(){return St},getGlobalLayoutOwners:function(){return Dt},getGroupPresetAttr:function(){return en},getInsertableContent:function(){return w},getModule:function(){return Ct},getModuleAttr:function(){return Pt},getModuleAttrs:function(){return Ut},getModuleLoopData:function(){return ln},getModuleName:function(){return Nt},getModuleStructureIds:function(){return Gt},getModuleType:function(){return Bt},getModuleWithChildren:function(){return Vt},getModulesByIds:function(){return wt},getParentModule:function(){return At},getParentModuleId:function(){return Yt},getParentModuleType:function(){return Ft},getRootModuleIds:function(){return jt},getSelectedModulePreset:function(){return nn},getSelectedOptionGroupPreset:function(){return on},getSiblingModuleIds:function(){return xt},getSpecialtySectionStatus:function(){return zt},getUsedPresets:function(){return Ht},hasAncestorColumnType:function(){return an},hasStickyState:function(){return $t},importContent:function(){return Oe},insertIdIntoIdList:function(){return p},isCloneable:function(){return U},isContentEmpty:function(){return qt},isDisabled:function(){return Wt},isNestedModule:function(){return sn},isSectionOrInsideSection:function(){return Jt},isStickyStateActive:function(){return Qt},longerDebouncedAddHistoryLayoutItem:function(){return ut},memoizedFilterModulesByIds:function(){return F},mergeGlobalModules:function(){return be},moveModule:function(){return Ae},moveModules:function(){return Te},parseSerializedPostIntoFlatModuleObject:function(){return H},performFindReplace:function(){return Ce},quickDebouncedAddHistoryLayoutItem:function(){return at},quickDebouncedMaybeUpdateUsedPresets:function(){return ct},registerEditPostStore:function(){return fn},removeColumn:function(){return Re},removeGlobalModuleAttribute:function(){return Pe},removeGlobalParentAttribute:function(){return Ue},removeGroupPresetAttribute:function(){return we},removeModule:function(){return Ne},removeModuleAttribute:function(){return ke},removeModuleAttributes:function(){return Ge},removeModuleStateProperties:function(){return Be},replaceModuleAttributes:function(){return Ve},revertGlobalModuleEditState:function(){return Ye},setGlobalModuleAttribute:function(){return Fe},setGlobalParentAttribute:function(){return je},setLayoutState:function(){return xe},setModuleLoopData:function(){return Qe},setSpecialtySectionStatus:function(){return ze},syncGlobalLayoutAttributes:function(){return He},syncModuleGlobalColors:function(){return $e},syncModuleInlineFont:function(){return We},updateUsedPresets:function(){return qe}});var e={};n.r(e),n.d(e,{addColumnViaDivider:function(){return te},addGrid:function(){return re},addModule:function(){return oe},addModuleGroup:function(){return ie},addRow:function(){return se},addSpecialtySection:function(){return ae},changeColumnStructure:function(){return ue},changeColumnStructureForDragAndDrop:function(){return le},clearLayout:function(){return ce},clearRemovedModules:function(){return de},cloneColumn:function(){return pe},cloneModule:function(){return me},convertSelectedModulesToGroup:function(){return ne},copyModule:function(){return ge},copyModuleFromLibrary:function(){return fe},copyModuleFromPayload:function(){return Ie},copyModulesFromPayload:function(){return ye},disableGlobalModule:function(){return Ee},editChildren:function(){return he},editGroupPresetAttr:function(){return Je},editModuleAttribute:function(){return Me},editModuleProp:function(){return _e},editUnsyncAttrs:function(){return ve},importContent:function(){return Oe},mergeGlobalModules:function(){return be},moveModule:function(){return Ae},moveModules:function(){return Te},performFindReplace:function(){return Ce},removeColumn:function(){return Re},removeGlobalModuleAttribute:function(){return Pe},removeGlobalParentAttribute:function(){return Ue},removeGroupPresetAttribute:function(){return we},removeModule:function(){return Ne},removeModuleAttribute:function(){return ke},removeModuleAttributes:function(){return Ge},removeModuleStateProperties:function(){return Be},replaceModuleAttributes:function(){return Ve},revertGlobalModuleEditState:function(){return Ye},setGlobalModuleAttribute:function(){return Fe},setGlobalParentAttribute:function(){return je},setLayoutState:function(){return xe},setModuleLoopData:function(){return Qe},setSpecialtySectionStatus:function(){return ze},syncGlobalLayoutAttributes:function(){return He},syncModuleGlobalColors:function(){return $e},syncModuleInlineFont:function(){return We},updateUsedPresets:function(){return qe}});var t={};n.r(t),n.d(t,{__DEPRECATED__getModulesByIds:function(){return kt},getAncestorModules:function(){return Tt},getChildModules:function(){return Xt},getCloudLayoutMetadata:function(){return Kt},getContent:function(){return Lt},getDescendantModulesByType:function(){return Zt},getGlobalLayoutId:function(){return St},getGlobalLayoutOwners:function(){return Dt},getGroupPresetAttr:function(){return en},getModule:function(){return Ct},getModuleAttr:function(){return Pt},getModuleAttrs:function(){return Ut},getModuleLoopData:function(){return ln},getModuleName:function(){return Nt},getModuleStructureIds:function(){return Gt},getModuleType:function(){return Bt},getModuleWithChildren:function(){return Vt},getModulesByIds:function(){return wt},getParentModule:function(){return At},getParentModuleId:function(){return Yt},getParentModuleType:function(){return Ft},getRootModuleIds:function(){return jt},getSelectedModulePreset:function(){return nn},getSelectedOptionGroupPreset:function(){return on},getSiblingModuleIds:function(){return xt},getSpecialtySectionStatus:function(){return zt},getUsedPresets:function(){return Ht},hasAncestorColumnType:function(){return an},hasStickyState:function(){return $t},isCloneable:function(){return U},isContentEmpty:function(){return qt},isDisabled:function(){return Wt},isNestedModule:function(){return sn},isSectionOrInsideSection:function(){return Jt},isStickyStateActive:function(){return Qt}});var o=n(33042),i=n.n(o),s=window.divi.data,a=window.divi.history,u=window.divi.middleware,l=window.divi.module,c=window.divi.moduleLibrary,d=window.divi.conversion;const p=(e,t,n,r="after")=>{const o=[...n],i="after"===r?n.indexOf(t)+1:n.indexOf(t);return o.splice(i,0,e),o};var m,g=window.lodash,f=new Uint8Array(16);function I(){if(!m&&!(m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(f)}var y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var E=function(e){return"string"==typeof e&&y.test(e)},h=[],M=0;M<256;++M)h.push((M+256).toString(16).substr(1));var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!E(n))throw TypeError("Stringified UUID is invalid");return n};var v=function(e,t,n){var r=(e=e||{}).random||(e.rng||I)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return _(r)},O=window.vendor.wp.hooks;function b(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var A=e=>Array.isArray(e)?e:[e];function T(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function L(e,t){const n=[],{length:r}=e;for(let o=0;o<r;o++)n.push(e[o].apply(null,t));return n}Symbol(),Object.getPrototypeOf({});var S="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function D(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let o,i=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const a=t;let u;if(1===t.s?u=t.v:(u=e.apply(null,arguments),i++),a.s=1,r){const e=o?.deref?.()??o;null!=e&&r(e,u)&&(u=e,0!==i&&i--);o="object"==typeof u&&null!==u||"function"==typeof u?new S(u):u}return a.v=u,u}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function C(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,o=0,i={},s=e.pop();"object"==typeof s&&(i=s,s=e.pop()),b(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const a={...n,...i},{memoize:u,memoizeOptions:l=[],argsMemoize:c=D,argsMemoizeOptions:d=[],devModeChecks:p={}}=a,m=A(l),g=A(d),f=T(e),I=u((function(){return r++,s.apply(null,arguments)}),...m);const y=c((function(){o++;const e=L(f,arguments);return t=I.apply(null,e),t}),...g);return Object.assign(y,{resultFunc:s,memoizedResultFunc:I,dependencies:f,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:u,argsMemoize:c})};return Object.assign(r,{withTypes:()=>r}),r}var R=C(D),P=Object.assign(((e,t=R)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>P});const U=R([(e,t)=>t.moduleAppearance,(e,t)=>t.themeBuilderLayout,(e,t)=>{const{moduleAppearance:n,moduleName:r,themeBuilderLayout:o}=t,s=t?.moduleCount??i()({});let a=0;return t.moduleAppearance&&(a+=s.getIn([r,o]),"multipleAliases"in n&&(0,g.forEach)(n.multipleAliases,(e=>{a+=s.getIn([e,o])??0}))),a}],((e,t,n)=>{if(Boolean(e)){if("themeBuilderLayouts"in e&&!(0,g.includes)(e.themeBuilderLayouts,t))return!1;if("multiple"in e){if(!0===e.multiple)return!0;if(n>=("number"==typeof e.multiple?e.multiple:1))return!1}}return!0})),N=(e,t)=>{const{moduleId:n,targetParentId:r="",moduleAppearanceSettings:o={},themeBuilderLayout:s="postContent",moduleCount:a}=t,u=e.getIn(["content"]),l=r||u.getIn([n,"parent"]);let c,d=i()({});const p=(t,n)=>{(0,g.isEmpty)(t)||(0,g.forEach)(t,(t=>{const r=u.getIn([t]),i=v(),m=(0,O.applyFilters)("divi.cloneModule.attrs",r.asMutable({deep:!0})?.props?.attrs,{state:u.asMutable({deep:!0}),name:r?.name,id:i,parentId:l,sourceId:t}),f=o[r?.name];if(!U(e,{moduleName:r?.name,moduleAppearance:f,themeBuilderLayout:s,moduleCount:a}))return;const I={children:[],id:i,name:r?.name,parent:n,props:(0,g.isEmpty)(m)?r?.props:{...r?.props,attrs:m}};d=d.setIn([i],I);const y=d.getIn([n,"children","length"]);(0,g.isNumber)(y)?d=d.setIn([n,"children",`${y}`],i):c=i;const E=r.asMutable({deep:!0})?.children??[];p(E,i)}))};p([n],l);const m=u.getIn([l,"children"],i()([])),f=(0,g.findIndex)(m.asMutable(),(e=>e===n)),I=(0,g.slice)(m,0,f+1),y=(0,g.slice)(m,f+1);return{clonedModuleId:c,clonedParent:l,clonedParentChildren:[].concat(I,[c],y),clonedModules:d}},w=e=>{const t=(0,s.select)("divi/cloud-app").getUseCloudModuleType();return t.isAddRow?e.replace(/wp:divi\/row-inner /g,"wp:divi/row ").replace(/wp:divi\/column-inner /g,"wp:divi/column "):t.isAddRowInner?e.replace(/wp:divi\/row /g,"wp:divi/row-inner ").replace(/wp:divi\/column /g,"wp:divi/column-inner "):e};var k=n(53316),G=n.n(k);const B=e=>{const t=new Map;return{memoizeFunctionStore:t,memoized:G()(e,{cache:{create:()=>({has:e=>t.has(e),get:e=>t.get(e),set(e,n){t.set(e,n)}})},strategy:G().strategies.variadic}),clear:()=>t.clear()}},V=(e,t,n)=>{const r=i().asMutable(t,{deep:!0}),o=(0,g.pickBy)(r,(t=>(0,g.includes)(e,t.id)));return n?o:i()(o)},Y=B(V),F=Y.memoized,j=Y.clear;var x=window.vendor.wp.blockSerializationDefaultParser,z=window.vendor.wp.blocks;const H=(e,t,n=v)=>{const r=t||{children:[],name:"divi/root",id:"root",props:{attrs:{}}},o={[r.id]:{...r}},i=(e,t)=>{if(!e.blockName)return;if("divi/modules-styles"===e.blockName)return;let r,s;if("yes"===(0,g.get)(e,"attrs.nonconvertible")){const t=(0,x.parse)((0,d.maybeConvertContent)(e.innerHTML.trim()))[0];r=t?.blockName,s=t?.attrs??{}}else r=e?.blockName,s=e?.attrs??{};const a=!(0,z.getBlockType)(r)||"divi/shortcode-module"===r,u=a?e?.innerHTML:null,l=n(),c={name:r,props:{attrs:s},id:l,parent:t,children:[]};a&&(c.props.innerHTML=u),o[l]=c,o[t].children.push(l),(0,g.isFunction)((0,g.get)(e,"innerBlocks.map"))&&(0,g.forEach)(e.innerBlocks,(e=>i(e,l)))},s=e.replace(/^(?:<!--\swp:divi\/placeholder\s-->)/g,"").replace(/(?:<!--\s\/wp:divi\/placeholder\s-->)$/g,""),a=(0,x.parse)(s);return(0,g.forEach)(a,(e=>{i(e,r.id)})),o},$=e=>{if(!(0,g.isString)(e)||(0,g.isEmpty)(e))return[];const t=[],n=[(new DOMParser).parseFromString(e,"text/html").body];for(;n.length>0;){const e=n.pop(),{fontFamily:r}=e.style;if(r){const e=r.split(",").map((e=>e.trim().replace(/['"]/g,"")));t.push(...e)}n.push(...Array.from(e.children))}return(0,g.uniq)(t)},W=e=>{const{id:t,position:n,contentState:r}=e,o=r.getIn([t,"children"]);return o?.["first"===n?0:o.length-1]||""},q=e=>{const{action:t,contentState:n}=e,{id:r,position:o}=t,i={},s=n.getIn([r])?.parent,a="inside"===o?r:s;if("string"!=typeof a)return i;const u=n.getIn([a])?.children??[];let l="";switch(o){case"before":l=u?.[u?.indexOf(r)-1];break;case"after":l=u?.[u?.indexOf(r)+1];break;case"inside":l=u?.[u?.length-1]}if(!l)return i;const c=n.getIn([l,"name"]);return(n.getIn([l,"children"])??[]).forEach((e=>{const t=n.getIn([e])?.name;t&&(i[t]||(i[t]={moduleName:t,count:0}),i[t].count+=1)})),i[c]={moduleName:c,count:1},i},J=e=>{const{contentState:t}=e,n={};return(0,g.forEach)(t,(e=>{(0,g.isObject)(e)&&"divi/root"!==e?.name&&"divi/placeholder"!==e?.name&&"divi/global-layout"!==e?.name&&(n[e.name]||(n[e.name]={moduleName:e.name,count:0}),n[e.name].count++)})),n};var Q=window.divi.moduleUtils;const K=e=>{const{id:t,contentState:n}=e,r={},o=(0,Q.populateContentTree)({tree:n,rootId:t});return(0,g.forEach)(o,(e=>{(0,g.isObject)(e)&&"divi/root"!==e?.name&&"divi/placeholder"!==e?.name&&(r[e.name]||(r[e.name]={moduleName:e.name,count:0}),r[e.name].count++)})),r},X=e=>{const{id:t,position:n,contentState:r}=e,o=r.getIn([t,"parent"]),i=r.getIn([o]);if(!i||!(0,g.isObject)(i))return"";const s=i?.children,a=s.indexOf(t),u=s?.["after"===n?a+1:a-1];return u||""},Z={content:"postContent",header:"header",body:"body",footer:"footer"},ee=(e,t)=>{const n=(0,s.select)("divi/settings").getSetting(["themeBuilder","layout"],"postContent"),r=t.getState();switch(e.type){case"ADD_COLUMN_VIA_DIVIDER":{const t=W({id:e?.id,position:"first",contentState:r.getIn(["content"])}),o=r.getIn(["content",t,"name"],"divi/column");(0,s.dispatch)("divi/module").increaseModuleCount({moduleName:o,layout:n});break}case"CONVERT_SELECTED_MODULES_TO_GROUP":(0,s.dispatch)("divi/module").increaseModuleCount({moduleName:"divi/group",layout:n});break;case"ADD_MODULE":(0,s.dispatch)("divi/module").increaseModuleCount({moduleName:e.name,layout:n});break;case"ADD_ROW":case"ADD_SPECIALTY_SECTION":(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:q({action:e,contentState:r.getIn(["content"])})});break;case"CHANGE_COLUMN_STRUCTURE":{const{isStructureSame:t,operation:o,moduleCount:i}=(e=>{const{contentState:t,originStructure:n,targetStructure:r,id:o}=e,i=n.split(","),s=r.split(","),a=0==i.length-s.length;if(a)return{isStructureSame:a,operation:"increase",moduleCount:{}};const u=i.length<s.length?"increase":"decrease",l=Math.abs(i.length-s.length),c=W({id:o,position:"first",contentState:t}),d=t.getIn([c])?.name??"divi/column";return{isStructureSame:a,operation:u,moduleCount:{[d]:{moduleName:d,count:l}}}})({id:e.id,originStructure:e?.columnStructureOrigin??"",targetStructure:e?.columnStructure??"",contentState:r.getIn(["content"])});t||(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:o,modules:i});break}case"CLEAR_LAYOUT":(0,s.dispatch)("divi/module").clearModuleCount({layout:n});break;case"CLONE_MODULE":{const t=X({id:e?.params?.id,position:"after",contentState:r.getIn(["content"])});t&&(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:K({id:t,contentState:r.getIn(["content"])})});break}case"COPY_MODULE":case"COPY_MODULE_FROM_PAYLOAD":{const t=e?.params?.targetId,o="inside"===e?.params?.position?W({id:t,position:"last",contentState:r.getIn(["content"])}):X({id:t,position:"after",contentState:r.getIn(["content"])});o&&(0,s.dispatch)("divi/module").setModuleCount({layout:e?.params?.themeBuilderLayout??n,operation:"increase",modules:K({id:o,contentState:r.getIn(["content"])})});break}case"COPY_MODULES_FROM_PAYLOAD":default:break;case"COPY_MODULE_FROM_LIBRARY":{const t=e?.targetId,o="inside"===e?.position?W({id:t,position:"last",contentState:r.getIn(["content"])}):X({id:t,position:"after",contentState:r.getIn(["content"])});o&&(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:K({id:o,contentState:r.getIn(["content"])})});break}case"IMPORT_CONTENT":"on"===e?.importOptionsValues?.replaceLayout?(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"set",modules:J({contentState:r.getIn(["content"])})}):(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:J({contentState:H((0,d.maybeConvertContent)(e?.content))})});break;case"MERGE_GLOBAL_MODULES":(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"increase",modules:J({contentState:e?.content})});break;case"REMOVE_MODULE":case"REMOVE_COLUMN":(0,s.dispatch)("divi/module").setModuleCount({layout:n,operation:"decrease",modules:K({id:e?.id,contentState:r.getIn(["content"])})});break;case"SET_LAYOUT_STATE":(0,s.dispatch)("divi/module").setModuleCount({layout:(o=e.location,Z[o]??o),operation:"set",modules:J({contentState:r.getIn(["content"])})})}var o},te=(e,t,n="user")=>({type:"ADD_COLUMN_VIA_DIVIDER",id:e,dividerPosition:t,caller:n}),ne=e=>({type:"CONVERT_SELECTED_MODULES_TO_GROUP",selectedModuleIds:e}),re=({id:e,position:t,template:n,isAddSection:r})=>({type:"ADD_GRID",id:e,position:t,template:n,isAddSection:r}),oe=(e,t,n={},r="inside",o="",i="user")=>({type:"ADD_MODULE",id:e,name:t,props:n,position:r,newId:o,caller:i}),ie=e=>({type:"ADD_MODULE_GROUP",id:e}),se=(e,t,n,r=!1,o="user")=>({type:"ADD_ROW",id:e,position:t,columnStructure:n,inner:r,caller:o}),ae=(e,t,n,r)=>({type:"ADD_SPECIALTY_SECTION",id:e,position:t,columnStructure:n,innerPosition:r}),ue=(e,t,n="user")=>({type:"CHANGE_COLUMN_STRUCTURE",id:e,columnStructure:t,caller:n}),le=(e,t,n="user")=>({type:"CHANGE_COLUMN_STRUCTURE_FOR_DRAG_AND_DROP",sourceId:e,targetId:t,caller:n}),ce=()=>({type:"CLEAR_LAYOUT"}),de=e=>({type:"CLEAR_REMOVED_MODULES",params:e}),pe=e=>({type:"CLONE_COLUMN",params:e}),me=(e,t)=>({type:"CLONE_MODULE",params:e,name:t}),ge=e=>({type:"COPY_MODULE",params:e}),fe=(e,t,n,r="user")=>({type:"COPY_MODULE_FROM_LIBRARY",payload:e,position:t,targetId:n,caller:r}),Ie=(e,t)=>({type:"COPY_MODULE_FROM_PAYLOAD",params:e,name:t}),ye=e=>({type:"COPY_MODULES_FROM_PAYLOAD",params:e}),Ee=e=>({type:"DISABLE_GLOBAL_MODULE",id:e}),he=(e,t)=>({type:"EDIT_CHILDREN",id:e,children:t}),Me=({id:e,attrName:t,value:n,caller:r="user"})=>({type:"EDIT_MODULE_ATTRIBUTE",id:e,attrName:t,value:n,caller:r}),_e=(e,t,n)=>({type:"EDIT_MODULE_PROP",id:e,propName:t,propValue:n}),ve=(e,t,n,r="user")=>({type:"EDIT_UNSYNC_ATTRS",id:e,attribute:t,isSynced:n,caller:r}),Oe=({content:e,presetIdsToReplace:t,defaultPresetAttrs:n,importOptionsValues:r,defaultImportedModulePresetIds:o,defaultImportedGroupPresetIds:i})=>({type:"IMPORT_CONTENT",content:e,presetIdsToReplace:t,defaultPresetAttrs:n,importOptionsValues:r,defaultImportedModulePresetIds:o,defaultImportedGroupPresetIds:i}),be=(e,t)=>({type:"MERGE_GLOBAL_MODULES",content:e,owner:t}),Ae=(e,t,n,r="user")=>({type:"MOVE_MODULE",id:e,position:t,targetId:n,caller:r}),Te=(e,t,n)=>({type:"MOVE_MODULES",ids:e,position:t,targetId:n});var Le=window.divi.clipboard;const Se=(e,t,n)=>{if((0,g.isEqual)(e,t))return!0;if(n&&(0,Q.isTransformScaleField)(n.fieldComponent.name,n.attrName,n.subName)){const n=(0,Q.processPercentageValue)(e,Q.convertPercentageToDecimal),r=(0,Q.processPercentageValue)(t,Q.convertPercentageToDecimal);return(0,g.isEqual)(n,r)}return!1},De=(e,t,n,r={})=>{const o=n&&(0,Q.isTransformScaleField)(n.fieldComponent.name,n.attrName,n.subName)?(0,Q.processPercentageValue)(t,Q.formatAsPercentageString):t,s=(0,Q.ensureImmutable)(o);function a(t){if(null==t)return t;if(r.restrictToPath&&r.onlyExactPaths)return(0,Q.isImmutableObject)(t)&&"setIn"in t?function(t){const{restrictToPath:o}=r;if(!o)return t;const{attrName:i,subName:a,breakpoints:u,states:l}=o,c=i.split(".");let d=t,p=!1;return u.forEach((t=>{l.forEach((r=>{const o=(0,Le.getFullAttrPath)({attrNamePath:c,breakpoint:t,state:r,subNamePath:a?a.split("."):[]}),i=(0,Q.safeGetIn)(d,o);null!==i&&Se(i,e,n)&&(d=d.setIn(o,s),p=!0)}))})),p?d:t}(t):t;if(Se(t,e,n)){const e=((e,t,n)=>t&&n&&(!e||""===e||"string"==typeof e&&""===e.trim())?null:e)(o,n,t);if(null===e)return null;return(0,Q.ensureImmutable)(e)}return function(e){if("object"!=typeof e)return e;if((0,Q.isImmutableObject)(e)){const t=e.asMutable({deep:!0}),n=a(t);return n===t?e:n?i()(n):null}if(Array.isArray(e)){const t=[];let n=!1;return e.forEach(((e,r)=>{if((0,Q.isValidModuleAttr)(e)){const o=a(e);null!==o?(t[r]=o,o!==e&&(n=!0)):n=!0}else t[r]=e})),n?t:e}if((0,Q.isPlainObject)(e)){const t={};let n=!1;return Object.keys(e).forEach((r=>{const o=e[r],i=a(o);null!==i?(t[r]=i,i!==o&&(n=!0)):n=!0})),n?t:e}return e}(t)}return a},Ce=e=>{const{sourceFieldInfo:t,selectedScope:n,selectedModuleTypes:r,findValue:o,replaceValue:i,onlyReplaceIdenticalFields:a,selectedSourceModule:u}=e;if(!t)return{type:"PERFORM_FIND_REPLACE_FAILED",error:"No source field"};if(!o&&0!==o&&!1!==o)return{type:"PERFORM_FIND_REPLACE_FAILED",error:"No find value"};const l=(0,s.select)("divi/settings").getEnabledBreakpointNames(),c=Q.states,d=(0,Q.getModulesInScope)(u,n,[],r,!0);if(0===d.length)return{type:"PERFORM_FIND_REPLACE_FAILED",error:"No modules found"};const{attrName:p,subName:m}=t,g=De(o,i,t,a?{restrictToPath:{attrName:p,subName:m,breakpoints:l,states:c},onlyExactPaths:!0}:{});let f=0;return d.forEach((e=>{try{const t=(0,s.select)("divi/edit-post").getModuleAttrs(e);if(!t)return;const n=g(t);n&&(0,Q.isImmutableObject)(n)&&"setIn"in n&&n!==t&&((0,s.dispatch)("divi/edit-post").replaceModuleAttributes(e,n,"user",!0),f++)}catch(e){}})),{type:"PERFORM_FIND_REPLACE_SUCCESS",changesCount:f}},Re=(e,t="user")=>({type:"REMOVE_COLUMN",id:e,caller:t}),Pe=e=>({type:"REMOVE_GLOBAL_MODULE_ATTRIBUTE",id:e}),Ue=e=>({type:"REMOVE_GLOBAL_PARENT_ATTRIBUTE",id:e}),Ne=(e,t="user")=>({type:"REMOVE_MODULE",id:e,caller:t}),we=(e,t,n,r="user")=>({type:"REMOVE_GROUP_PRESET_ATTRIBUTE",id:e,attrName:t,groupId:n,caller:r}),ke=(e,t,n="user")=>({type:"REMOVE_MODULE_ATTRIBUTE",id:e,attrName:t,caller:n}),Ge=({id:e,attrNames:t,caller:n="user"})=>({type:"REMOVE_MODULE_ATTRIBUTES",id:e,attrNames:t,caller:n}),Be=e=>({type:"REMOVE_MODULE_STATE_PROPERTIES",params:e}),Ve=(e,t,n="user",r=!1)=>({type:"REPLACE_MODULE_ATTRIBUTES",id:e,attrs:t,caller:n,replaceAllAttrs:r}),Ye=({id:e,owner:t,caller:n="user"})=>({type:"REVERT_GLOBAL_MODULE_EDIT_STATE",id:e,owner:t,caller:n}),Fe=(e,t)=>({type:"SET_GLOBAL_MODULE_ATTRIBUTE",id:e,value:t}),je=(e,t)=>({type:"SET_GLOBAL_PARENT_ATTRIBUTE",id:e,value:t}),xe=({location:e,layoutState:t})=>({type:"SET_LAYOUT_STATE",location:e,layoutState:t}),ze=e=>({type:"SET_SPECIALITY_SECTION_STATUS",status:e}),He=(e,t,n)=>({type:"SYNC_GLOBAL_LAYOUT_ATTRIBUTES",id:e,attrs:t,unsyncAttrs:n}),$e=e=>({type:"SYNC_MODULE_GLOBAL_COLORS",globalColors:e}),We=()=>({type:"SYNC_MODULE_INLINE_FONT"}),qe=({presetType:e,presets:t})=>({type:"UPDATE_USED_PRESETS",presetType:e,presets:t}),Je=({id:e,attrName:t,value:n})=>({type:"EDIT_GROUP_PRESET_ATTR",id:e,attrName:t,value:n}),Qe=(e,t)=>({type:"SET_MODULE_LOOP_DATA",id:e,loopData:t});var Ke=window.vendor.wp.i18n;const Xe=(e,t)=>{const n={ADD_COLUMN_VIA_DIVIDER:(0,Ke.__)("Added Column","et_builder"),ADD_MODULE:(0,Ke.__)("Added %s","et_builder"),ADD_ROW:(0,Ke.__)("Added Row","et_builder"),ADD_SPECIALTY_SECTION:(0,Ke.__)("Added Specialty Section","et_builder"),CHANGE_COLUMN_STRUCTURE:(0,Ke.__)("Changed Column Structure","et_builder"),CLEAR_LAYOUT:(0,Ke.__)("Cleared Layout","et_builder"),CLONE_MODULE:(0,Ke.__)("Cloned %s","et_builder"),CLONE_COLUMN:(0,Ke.__)("Cloned Column","et_builder"),CONVERT_SELECTED_MODULES_TO_GROUP:(0,Ke.__)("Created Group","et_builder"),COPY_MODULE_FROM_PAYLOAD:(0,Ke.__)("Copied %s","et_builder"),COPY_MODULES_FROM_PAYLOAD:(0,Ke.__)("Copied Modules","et_builder"),EDIT_CHILDREN:(0,Ke.__)("Edited %s Child Modules","et_builder"),EDIT_MODULE_ATTRIBUTE:(0,Ke.__)("Edited %s","et_builder"),EDIT_UNSYNC_ATTRS:(0,Ke.__)("Edited Unsynced Attributes","et_builder"),IMPORT_CONTENT:(0,Ke.__)("Imported Content","et_builder"),MOVE_MODULE:(0,Ke.__)("Moved %s","et_builder"),MOVE_MODULES:(0,Ke.__)("Moved Modules","et_builder"),REMOVE_COLUMN:(0,Ke.__)("Removed Column","et_builder"),REMOVE_MODULE:(0,Ke.__)("Removed %s","et_builder"),REMOVE_MODULE_ATTRIBUTE:(0,Ke.__)("Removed Module Attribute","et_builder"),REPLACE_MODULE_ATTRIBUTES:(0,Ke.__)("Replaced Module Attributes","et_builder")},r=t.getState()?.getIn(["content"]),o=e?.type??"",i="id"in e?e.id:"",a="name"in e?e.name:r?.[i]?.name??"",u=(0,s.select)("divi/module-library").getModule(a)?.title??"";let l=n?.[o];l?.includes("%s")&&(l=(0,Ke.sprintf)(l,u));const c=new Date,d=c.getTime(),p=c.toLocaleTimeString();(0,s.dispatch)("divi/history").addLayoutItem({label:l,moduleId:i,moduleLabel:u,moduleName:a,state:r,timestamp:d,humanTime:p,type:o,storeName:"divi/edit-post"})},Ze=(e,t)=>{let n=(0,g.get)(e,"id");const r={label:(0,g.get)(t.getState(),["content",n,"name"]),details:""};if("EDIT_MODULE_ATTRIBUTE"===e.type){const t=(0,g.isString)(e.value)?e.value:JSON.stringify(e.value);r.details=`${e.attrName}: ${t}`}"CONVERT_SELECTED_MODULES_TO_GROUP"===e.type&&(r.label="divi/group",n=(0,g.get)(t.getState(),["content",e.selectedModuleIds[0],"parent"],"")),(0,s.dispatch)("divi/history").add("edit-post",e.type,n,r)},et=e=>{const t=(0,s.select)("divi/edit-post").getModuleWithChildren(e.id),n=Object.values(t).find((e=>!!(0,s.select)("divi/modal-library").isModuleEdited(e.id))),r=e.id===n?.id,o=!r&&void 0!==n,i=(0,s.select)("divi/edit-post").getParentModuleId(e.id);if(r||o){const e="divi/shortcode-module"===(0,s.select)("divi/edit-post").getModuleName(i)?"divi/module-shortcode":"divi/module";"root"===i?(0,s.dispatch)("divi/modal-library").open({name:"divi/page-settings"}):(0,s.dispatch)("divi/modal-library").open({name:e,owner:i})}},tt=e=>{if("caller"in e&&"global-layout"===e.caller)return;const t=[];let n="";const r=e=>(0,s.select)("divi/edit-post").getGlobalLayoutId(e),o=(0,s.select)("divi/module").getModuleCount();switch(e.type){case"ADD_COLUMN_VIA_DIVIDER":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"ADD_MODULE":{const{id:o,name:i}=e;if("root"===o)return;const a=(0,s.select)("divi/edit-post").getParentModule(o).id,u=(0,s.select)("divi/module-library").isChildModule(i)?(0,s.select)("divi/edit-post").getParentModule(a).id:(0,s.select)("divi/edit-post").getParentModule(o).id;r(u)&&!(0,s.select)("divi/module-library").isChildModule(i)&&(n=u,t.push(r(u)));break}case"ADD_ROW":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"CHANGE_COLUMN_STRUCTURE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"CLONE_MODULE":{const{id:o}=e.params;r(o)&&(n=o,t.push(r(o)));break}case"COPY_MODULE_FROM_PAYLOAD":{const{targetId:o}=e.params;r(o)&&(n=o,t.push(r(o)));break}case"COPY_MODULES_FROM_PAYLOAD":{const{targetId:o}=e.params;r(o)&&(n=o,t.push(r(o)));break}case"EDIT_MODULE_ATTRIBUTE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"EDIT_UNSYNC_ATTRS":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"MOVE_MODULE":{const{id:o,targetId:i}=e;r(o)&&(n=o,t.push(r(o))),r(i)&&(n=i,t.push(r(i)));break}case"MOVE_MODULES":{const{ids:o,targetId:i}=e;o.forEach((e=>{r(e)&&(n=e,t.push(r(e)))})),r(i)&&(n=i,t.push(r(i)));break}case"REMOVE_COLUMN":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"REMOVE_MODULE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"REMOVE_MODULE_ATTRIBUTE":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}case"REPLACE_MODULE_ATTRIBUTES":{const{id:o}=e;r(o)&&(n=o,t.push(r(o)));break}default:return}(0,g.forEach)(t,(t=>{const i=[];let a="",u="",l="",c="";const d={addColumnViaDivider:()=>"ADD_COLUMN_VIA_DIVIDER"===e.type&&(0,s.dispatch)("divi/edit-post").addColumnViaDivider(c,e.dividerPosition,"global-layout"),addModule:()=>"ADD_MODULE"===e.type&&(0,s.dispatch)("divi/edit-post").addModule(c,e.name,e.props,e.position,e.newId,"global-layout"),addRow:()=>"ADD_ROW"===e.type&&(0,s.dispatch)("divi/edit-post").addRow(c,e.position,e.columnStructure,e.inner,"global-layout"),changeColumnStructure:()=>"CHANGE_COLUMN_STRUCTURE"===e.type&&(0,s.dispatch)("divi/edit-post").changeColumnStructure(c,e.columnStructure,"global-layout"),cloneModule:()=>"CLONE_MODULE"===e.type&&(0,s.dispatch)("divi/edit-post").cloneModule({id:c,caller:"global-layout",moduleCount:o}),copyModuleFromPayload:()=>"COPY_MODULE_FROM_PAYLOAD"===e.type&&(0,s.dispatch)("divi/edit-post").copyModuleFromPayload({payload:e.params.payload,position:e.params.position,targetId:c,caller:"global-layout",moduleCount:o}),copyModulesFromPayload:()=>"COPY_MODULES_FROM_PAYLOAD"===e.type&&(0,s.dispatch)("divi/edit-post").copyModulesFromPayload({payload:e.params.payload,position:e.params.position,targetId:c,caller:"global-layout",moduleCount:o}),editModuleAttribute:()=>{if("EDIT_MODULE_ATTRIBUTE"===e.type){const t=(0,s.select)("divi/edit-post").getModuleAttr(a,"unsyncAttrs");!(!("attrName"in e)||!Array.isArray(t))&&t.some((t=>t.attrName===e.attrName))||(0,s.dispatch)("divi/edit-post").editModuleAttribute({id:c,attrName:e.attrName,value:e.value,caller:"global-layout"})}},moveModule:()=>"MOVE_MODULE"===e.type&&(0,s.dispatch)("divi/edit-post").moveModule(u,e.position,l,"global-layout"),removeColumn:()=>"REMOVE_COLUMN"===e.type&&(0,s.dispatch)("divi/edit-post").removeColumn(c,"global-layout"),removeModule:()=>"REMOVE_MODULE"===e.type&&(0,s.dispatch)("divi/edit-post").removeModule(c,"global-layout"),removeModuleAttribute:()=>"REMOVE_MODULE_ATTRIBUTE"===e.type&&(0,s.dispatch)("divi/edit-post").removeModuleAttribute(c,e.attrName,"global-layout"),replaceModuleAttributes:()=>"REPLACE_MODULE_ATTRIBUTES"===e.type&&(0,s.dispatch)("divi/edit-post").replaceModuleAttributes(c,e.attrs,"global-layout"),editUnsyncAttrs:()=>{if("EDIT_UNSYNC_ATTRS"===e.type&&!1===e.isSynced){const e=(0,s.select)("divi/edit-post").getModuleAttrs(a),t=(0,s.select)("divi/edit-post").getModuleAttr(c,"unsyncAttrs")||[];(0,s.dispatch)("divi/edit-post").syncGlobalLayoutAttributes(c,e,t)}}},p=(0,g.camelCase)(e.type),m="EDIT_MODULE_ATTRIBUTE"!==e.type,f=(0,s.select)("divi/edit-post").getGlobalLayoutOwners(t);(0,g.forEach)(f,(e=>{(0,s.select)("divi/modal-library").isModuleEdited(e)||((e,t)=>{let n=!1;const r=(e,t)=>{const o=(0,s.select)("divi/edit-post").getParentModule(t).id;o&&o===e?n=!0:o&&"root"!==o&&r(e,o)};return r(e,t),n})(e,n)||e===n?a=e:i.push(e)}));const I=(0,s.select)("divi/global-layouts").getGlobalLayoutMap(t),y=(n,i,f=!1)=>{if("moveModule"!==p&&(!["cloneModule","removeModule","addRow","copyModuleFromPayload","copyModulesFromPayload"].includes(p)||!f)&&("id"in e&&n===e.id||"targetId"in e&&n===e.targetId)){c=i,d[p]();const n=(0,s.select)("divi/edit-post").getModuleAttr(a,"unsyncAttrs");if(!(!(!("attrName"in e)||!Array.isArray(n))&&n.some((t=>t.attrName===e.attrName)))){const e=(0,s.select)("divi/edit-post").getModuleWithChildren(a);(0,s.dispatch)("divi/global-layouts").setLayoutContent(t,e,a,m)}return}const E=I.filter((e=>n in e))?.[0]?.[n]?.children;Array.isArray(E)&&E.length&&(0,g.forEach)(E,((t,n)=>{const a=I.filter((e=>i in e))[0];if(!a)return;const c=a[i]?.children;if("MOVE_MODULE"===e.type){if(t===e.id&&(u=c[n]),t===e.targetId&&(l=c[n],!r(e.id)))return void(0,s.dispatch)("divi/edit-post").copyModule({id:e.id,position:e.position,targetId:l,moduleCount:o});if(!f&&""!==u&&""!==l)return void d[p]()}y(t,c[n],!1)}))};(0,g.forEach)(i,(e=>{y(a,e,!0)}));const E=(0,s.select)("divi/edit-post").getModuleAttr(a,"unsyncAttrs");if(!(!(!("attrName"in e)||!Array.isArray(E))&&E.some((t=>t.attrName===e.attrName)))){const e=(0,s.select)("divi/edit-post").getModuleWithChildren(a);(0,s.dispatch)("divi/global-layouts").setLayoutContent(t,e,a,m)}}))},nt=(e,t)=>{const n=(0,g.get)(t.getState()?.asMutable({deep:!0}),"content"),r=(0,Q.populateUsedGroupPresets)(n);(0,s.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:r})},rt=(e,t)=>{if("EDIT_MODULE_ATTRIBUTE"===e.type&&"modulePreset"!==e?.attrName)return;const n=(0,g.get)(t.getState()?.asMutable({deep:!0}),"content"),r=(0,Q.populateUsedPresets)(n),o=(0,Q.populateUsedGroupPresets)(n);(0,s.dispatch)("divi/edit-post").updateUsedPresets({presetType:"module",presets:r}),(0,s.dispatch)("divi/edit-post").updateUsedPresets({presetType:"group",presets:o})};var ot=window.jQuery,it=n.n(ot);const st=(e,t="")=>{let n=0;const r=setInterval((()=>{const o="wireframe"===(0,s.select)("divi/app-ui").getView(),i=it()(`${o?".et-vb-wireframe":"divi/section"===t?".et_pb_section":"divi/row"===t||"divi/row-inner"===t?".et_pb_row":"divi/column"===t||"divi/column-inner"===t?".et_pb_column":"divi/group"===t?".et_pb_group":".et_pb_module"}[data-id="${e}"] .et-vb-add-module`);(i.length||n>1e3)&&(clearInterval(r),(0,Q.openAddModuleModal)(i,e,!0)),n+=5}),5)},at=(0,g.debounce)(Xe,300),ut=(0,g.debounce)(Xe,500),lt=(e,t)=>{!("caller"in e)||"history"!==e.caller&&"global-layout"!==e.caller?ut(e,t):Xe(e,t)},ct=(0,g.debounce)(rt,300),dt={ADD_COLUMN_VIA_DIVIDER:[tt,ct,ee,Ze,Xe],ADD_MODULE:[(e,t)=>{const n=(0,g.get)(e,"name"),r=(0,g.get)(e,"position");if("divi/section"===n&&"after"===r){const r=(0,g.get)(e,"id"),o=(0,g.get)(t.getState(),"content").getIn(["root","children"]),i=o.indexOf(r),s=o[i+1];st(s,n)}},(e,t)=>{const n=(0,g.get)(e,"name"),r=(0,s.select)("divi/module-library").getModuleCategory(n);if(!(0,g.includes)(["module","fullwidth-module"],r))return;const o=(0,s.select)("divi/module-library").getChildModules({moduleName:n});if((0,g.isEmpty)(o))return;const i=(0,s.select)("divi/app-preferences").get(["module","dummyContent"]),a=(0,g.get)(t.getState(),"content"),u=(0,g.get)(e,"id"),l=(0,g.get)(e,"position"),c="inside"===l?u:(0,g.get)(a,[u,"parent"]),d=a.getIn([c,"children"],[]).asMutable(),p="inside"===l?(0,g.last)(d):d[d.indexOf(u)+("before"===l?-1:1)],m=(0,s.select)("divi/module-library").getModule(n);m.template&&m.template.forEach((e=>{const t=e[0],r=(0,g.isString)(e[1])?{}:e[1],o=(0,s.select)("divi/module-library").getModule(t),a=(0,s.select)("divi/settings").getSetting(["builderVersion"]),u=i&&o?.placeholderContent?o?.placeholderContent:{};if((0,g.includes)(o.parentsName,n)){const e={attrs:(0,g.merge)({},u,r,{builderVersion:a})};(0,s.dispatch)("divi/edit-post").addModule(p,t,e,"inside")}}))},tt,rt,nt,ee,Ze,at],ADD_MODULE_GROUP:[e=>{st(e.id,"divi/group")}],ADD_ROW:[(e,t)=>{const n=(0,g.get)(t.getState(),"content"),r=(0,g.get)(e,"id"),o=(0,g.get)(e,"position"),i="inside"===o?r:(0,g.get)(n,[r,"parent"]),s=n.getIn([i,"children"],[]).asMutable(),a="inside"===o?(0,g.last)(s):s[s.indexOf(r)+("before"===o?-1:1)],u=(0,g.get)(n,a),l=(0,g.head)((0,g.get)(u,"children")),c="divi/row-inner"===(0,g.get)(n,[a,"name"])?"divi/column-inner":"divi/column";st(l,c)},tt,ct,ee,Ze,Xe],ADD_GRID:[(e,t)=>{const{id:n,position:r,isAddSection:o}=e,i=(0,g.get)(t.getState(),"content");if(o&&"after"===r){const e=i.getIn(["root","children"]),t=e[e.indexOf(n)+1],r=(0,g.head)((0,g.get)(i,[t,"children"])),o=(0,g.head)((0,g.get)(i,[r,"children"]));return void(o&&st(o,"divi/column"))}const s="inside"===r?n:(0,g.get)(i,[n,"parent"]),a=i.getIn([s,"children"],[]).asMutable(),u="inside"===r?(0,g.last)(a):a[a.indexOf(n)+("before"===r?-1:1)],l=(0,g.head)((0,g.get)(i,[u,"children"])),c="divi/row-inner"===(0,g.get)(i,[u,"name"])?"divi/column-inner":"divi/column";l&&st(l,c)},tt,ct,ee,Ze,Xe],ADD_SPECIALTY_SECTION:[(e,t)=>{const n=(0,g.get)(e,["innerPosition"]).split(",").indexOf("1"),r=(0,g.get)(e,"id"),o=(0,g.get)(t.getState(),"content"),i=o.getIn(["root","children"]),s=i.indexOf(r),a=i["after"===(0,g.get)(e,"position")?s+1:s-1],u=o.getIn([a,"children"])[n];st(u,"divi/column")},ee,Ze,Xe],CHANGE_COLUMN_STRUCTURE:[tt,ct,ee,Ze,Xe],CLEAR_LAYOUT:[(e,t)=>{const n=(0,g.get)(t.getState(),"content").getIn(["root","children",0]);st(n,"divi/section")},ct,ee,Xe],CLONE_MODULE:[tt,ct,ee,Xe],CLONE_COLUMN:[ee,Ze,Xe],CONVERT_SELECTED_MODULES_TO_GROUP:[(e,t)=>{const n=t.getState().content,{selectedModuleIds:r}=e,o=(0,g.get)(n,[r[0],"parent"],"");(0,s.dispatch)("divi/modal-library").open({name:"divi/module",owner:o})},ee,Ze,at],COPY_MODULE:[tt,ct,ee,Ze],COPY_MODULE_FROM_PAYLOAD:[tt,ct,ee,Ze,Xe],COPY_MODULES_FROM_PAYLOAD:[tt,ct,ee,Ze,Xe],COPY_MODULE_FROM_LIBRARY:[ee],EDIT_CHILDREN:[at],EDIT_MODULE_ATTRIBUTE:[tt,rt,Ze,lt],EDIT_UNSYNC_ATTRS:[tt,ct,Ze,Xe],IMPORT_CONTENT:[ct,ee,Xe],MERGE_GLOBAL_MODULES:[ee],MOVE_MODULE:[tt,ct,Ze,Xe,(e,t)=>{const{draggedModuleParentId:n,targetParentId:r,id:o}=e;if(n===r)return;const i=(0,g.get)(t.getState(),["content"]),a=i.getIn([o,"name"]);if("divi/column"!==a&&"divi/column-inner"!==a)return;if((i.getIn([r,"props","attrs","module","advanced","columnStructure","desktop","value"],"").split(",").length??0)>={"divi/column":6,"divi/column-inner":3}[a])return u=(0,Ke.__)("This number of columns cannot be used on this row.","et_builder"),void(0,g.get)(window,"alert",g.noop)(u);var u;(0,s.dispatch)("divi/edit-post").changeColumnStructureForDragAndDrop(n,r)}],MOVE_MODULES:[tt,ct,Ze,Xe],REMOVE_COLUMN:[tt,ct,Ze,et,ee,Xe],REMOVE_MODULE:[tt,ct,Ze,et,ee,Xe],REMOVE_MODULE_ATTRIBUTE:[tt,ct,Ze,Xe],REMOVE_GROUP_PRESET_ATTRIBUTE:[nt],REPLACE_MODULE_ATTRIBUTES:[tt,ct,Ze,Xe],SET_LAYOUT_STATE:[ee],SYNC_GLOBAL_MODULE_ATTRIBUTES:[Ze],SYNC_MODULE_GLOBAL_COLORS:[(e,t)=>{const n=t.getState().content,r=JSON.stringify({...n}),o=new RegExp('"var[(]--(?:gcid-([0-9a-z-]*))[)]"',"gi"),i=(0,g.uniq)(Array.from(r.matchAll(o)).map((e=>e[1])));if(i.length>0){const e=Number((0,s.select)("divi/settings").getSetting(["post","id"]));e&&(0,s.dispatch)("divi/global-data").updateGlobalColorsUsedInPosts(e,i)}},Ze],EDIT_GROUP_PRESET_ATTR:[nt]},pt=()=>e=>t=>{const n=(0,s.select)("divi/modal-library").getModalOwner("divi/module"),r=(0,s.select)("divi/edit-post").getGlobalLayoutId(n),o=(0,s.select)("divi/global-layouts").getLayout(r)?.preEditContent;if(!!r&&!!o)return(0,s.dispatch)("divi/global-layouts").openConfirmationPopup({id:r}),null;return e(t)},mt=()=>e=>t=>{if(["CLEAR_LAYOUT","ADD_ROW","MOVE_MODULES"].includes(t.type)){const e=(0,s.select)("divi/settings").getSetting(["builderVersion"]);t={...t,builderVersion:e}}return e(t)},gt={ADD_COLUMN_VIA_DIVIDER:[pt],ADD_MODULE:[pt],ADD_ROW:[pt,mt],ADD_SPECIALTY_SECTION:[pt],CHANGE_COLUMN_STRUCTURE:[()=>e=>t=>{const n=(0,s.select)("divi/edit-post").getContent().getIn([t.id])?.props?.attrs?.module?.advanced?.columnStructure?.desktop?.value??"";t.columnStructureOrigin=n;return e(t)},pt],CLEAR_LAYOUT:[pt,mt],CLONE_MODULE:[pt],CLONE_COLUMN:[pt],COPY_MODULE:[pt],COPY_MODULE_FROM_LIBRARY:[pt],COPY_MODULE_FROM_PAYLOAD:[pt],COPY_MODULES_FROM_PAYLOAD:[pt],DISABLE_GLOBAL_MODULE:[pt],EDIT_MODULE_ATTRIBUTE:[()=>e=>t=>{if((0,s.select)("divi/global-data").isActivePreset()||"modulePreset"===t.attrName){return e(t)}const n=t.id,r=(0,s.select)("divi/edit-post").getGlobalLayoutId(n);if(!!!r){return e(t)}const o=t.attrName,i=(0,s.select)("divi/global-layouts").getLayout(r)?.preEditContent,a=!!i,u=(0,s.select)("divi/edit-post").getModuleAttrs(n),l=(0,s.select)("divi/edit-post").getModuleAttr(n,o),c=(0,g.isEqual)((0,g.cloneDeep)(t.value),(0,g.cloneDeep)(l));a||c||((0,s.dispatch)("divi/history").disableHistoryTracking(),(0,s.dispatch)("divi/global-layouts").setPreEditContent({id:r,content:u}));return e(t)},()=>e=>t=>{(0,s.select)("divi/global-data").isActivePreset()&&(0,s.dispatch)("divi/global-data").closePresetModal();return e(t)}],IMPORT_CONTENT:[pt],MOVE_MODULE:[pt,()=>e=>t=>{const n=(0,s.select)("divi/edit-post").getContent(),r=n.getIn([t.id,"parent"]),o="inside"===t.position?t.targetId:n.getIn([t.targetId,"parent"]);t.draggedModuleParentId=r,t.targetParentId=o;return e(t)}],MOVE_MODULES:[pt,mt],REMOVE_MODULE:[pt],REMOVE_COLUMN:[pt],REVERT_GLOBAL_MODULE_EDIT_STATE:[()=>e=>t=>{const{owner:n}=t,r=t.id,o=(0,s.select)("divi/global-layouts").getLayout(r)?.preEditContent?.asMutable(),i=(0,g.omit)(o,["globalModule","unsyncAttrs","modulePreset"]);(0,g.forEach)(i,((e,t)=>{(0,s.dispatch)("divi/edit-post").editModuleAttribute({id:n,attrName:t,value:e})})),(0,s.dispatch)("divi/global-layouts").deletePreEditContent({id:r}),(0,s.dispatch)("divi/history").enableHistoryTracking();return e(t)}]},ft=(e,t,n,r,o="after",i="")=>{const s=e.getIn([t,"parent"],""),a="inside"===o?t:s,u=i||v(),l=e.getIn([s,"props","attrs","globalModule"],!1),c=e.getIn([s,"props","attrs","globalParent"],!1),d=l||c||!1,m=(0,O.applyFilters)("divi.addModule.attrs",r?.attrs,{state:e.asMutable({deep:!0}),name:n,id:u,parentId:a}),f={id:u,children:[],name:n,parent:a,props:(0,g.isEmpty)(m)?r:{...r,attrs:{...m}}},I=e.getIn([a,"children"],[]),y="inside"===o?(0,g.isArray)(I)?[...I,f.id]:[f.id]:p(f.id,t,I.asMutable(),o);return e=e.merge({[f.id]:f}).setIn([a,"children"],y),d?e.setIn([f.id,"props","attrs","globalParent"],d):e},It=(e,t,n="postContent")=>{const r=e.getIn(["content"]),o=r.getIn([t],{});if((0,g.isEmpty)(o))return e;const i=o.getIn(["parent"]),s=r.getIn([i,"children"],[]).asMutable(),a=s.indexOf(t);if(a<0)return e;const u=[...s];if(u.splice(a,1),"root"===i&&0===u.length){const t=v(),n=r.setIn([i,"children"],[t]).setIn([t],{id:t,name:"divi/section",children:[],parent:"root",props:{attrs:{}}});return e.setIn(["content"],n)}const l=r.setIn([i,"children"],u);return e.setIn(["content"],l).setIn(["layouts",n,"removedModules",t],{id:t,timestamp:Date.now()})},yt=(e,t,n)=>{let r=e.getIn(["content"]);const o=r.getIn([t,"children"],[]),i=n.split(","),s=(0,g.isArray)(o)?o.length:0,a=i.length,u="divi/row-inner"===r.getIn([t,"name"])?"divi/column-inner":"divi/column";if(r=r.setIn([t,"props","attrs","module","advanced","columnStructure","desktop","value"],n),s>a){const t=s-a,n=o.slice(0-t),i=o[a-1];(0,g.forEach)(n,(t=>{const n=r.getIn([t,"children"],[]),o=r.getIn([i,"children"],[]).concat(n);(0,g.forEach)(n,(e=>{r=r.setIn([e,"parent"],i)})),r=r.setIn([i,"children"],o),r=r.setIn([t,"children"],[]),r=It(e.setIn(["content"],r),t).getIn(["content"])}))}else if(s<a){const e=a-s;(0,g.forEach)(i.slice(0-e),(e=>{r=ft(r,t,u,{attrs:{module:{advanced:{type:{desktop:{value:e}}}}}},"inside")}))}return(0,g.forEach)(o,((e,t)=>{r=i[t]?r.setIn([e,"props","attrs","module","advanced","type","desktop","value"],i[t]):r.without(e)})),e.setIn(["content"],r)},Et=(e,t,n,r)=>{if(!e.getIn([t]))return e;const o=(0,Q.getPremadeGrid)(r);if(!o)return e;const i=o?.template,s="inside"===n?t:e.getIn([t]).parent,a=e.getIn([s])?.children,u=v(),l={id:u,name:"divi/row",children:[],parent:s,props:{attrs:o.flexWrapRow?{module:{advanced:{flexColumnStructure:{desktop:{value:r}}},decoration:{layout:{desktop:{value:{display:"flex",flexWrap:"wrap"}}}}}}:{module:{advanced:{flexColumnStructure:{desktop:{value:r}}}}}}},c="inside"===n?(0,g.isArray)(a)?[...a,u]:[u]:p(u,t,a.asMutable(),n);return e=e.merge({[u]:l}).setIn([s,"children"],c),i.forEach((t=>{switch(t.type){case"column":{const n=v(),r={id:n,name:"divi/column",parent:u,props:{attrs:{module:{advanced:{flexType:{desktop:{value:t.columnClass}}}}}},children:[]},o=e.getIn([u,"children"]),i=(0,g.isArray)(o)?[...o,n]:[n];e=e.merge({[n]:r}).setIn([u,"children"],i),t.children&&t.children.forEach((t=>{e=Et(e,n,"inside",t.columnStructure)}));break}}})),e},ht=(e,{id:t,position:n,template:r,isAddSection:o})=>!0===o?((e,t,n,r)=>{if(!e.getIn([t]))return e;const o=e.getIn(["root","children"]),s=v(),a=i()({id:s,name:"divi/section",parent:"root",children:[],props:{attrs:{}}}),u=p(s,t,o.asMutable(),n);return e=e.merge({[s]:a}).setIn(["root","children"],u),Et(e,s,"inside",r)})(e,t,n,r):Et(e,t,n,r),Mt=(e,t,n,r,o,i=!1,s="")=>{const a=e.getIn([t]).parent,u="inside"===n?t:a,l=e.getIn([u])?.children,c=i?"divi/row-inner":"divi/row",d=e.getIn([u,"props","attrs","globalModule"],!1),m=e.getIn([u,"props","attrs","globalParent"],!1),f=d||m||!1,I=s||v(),y={id:I,name:c,children:[],parent:u,props:{attrs:{builderVersion:o,module:{advanced:{columnStructure:{desktop:{value:r}}}},...f&&{globalParent:f}}}},E="inside"===n?(0,g.isArray)(l)?[...l,I]:[I]:p(I,t,l.asMutable(),n);e=e.merge({[I]:y}).setIn([u,"children"],E);const h=r.split(","),M=h.length,_={};for(let e=0;e<M;e++){const t=v();_[t]={id:t,name:i?"divi/column-inner":"divi/column",parent:I,props:{attrs:{builderVersion:o,module:{advanced:{type:{desktop:{value:h[e]}}}}}},children:[]}}return f&&(e=e.setIn([y.id,"props","attrs","globalParent"],f)),e.merge(_).setIn([I,"children"],(0,g.keys)(_))};var _t=window.divi.constantLibrary;const vt=(e,t)=>{const n=e.getIn(["content"]),{id:r}=t,o=n.getIn([r]);if((0,g.isEmpty)(o))return e;const i=o.getIn(["parent"]),s=n.getIn([i,"children"],[]).asMutable().filter((e=>e!==r));let a=n.setIn([i,"children"],s);const u=(0,Q.populateContentTree)({tree:n,rootId:r});return(0,g.forEach)(u,((e,t)=>{a=a.without(t)})),e.setIn(["content"],a)},Ot=(e,t,n,r,o="user")=>{const s=e.getIn([t,"props","attrs"],i()({})),a=n.split("."),u=a.length>1,l=u?a[0]:n,c=u?s.getIn([l],i()({})).setIn((0,g.tail)(a),r):r,d=e.getIn([t,"props","attrs","unsyncAttrs"])?.asMutable();if("global-layout"===o){if(Array.isArray(d)&&d.some((e=>e?.attrName===n)))return e}return e.setIn([t,"props","attrs",l],c)},bt=(e,t,n)=>{const{root:r,...o}=t,i=e.getIn([n,"parent"]),s=e.getIn([i,"children"],[]).reduce(((e,t)=>t===n?e.concat(r.children):e.concat(t)),[]),a=o[t.root.children[0]].props.attrs,u=e.getIn([n,"props","attrs","unsyncAttrs"]).asMutable(),l={globalModule:e.getIn([n,"props","attrs","globalModule"])},c={...a,...u,...l},d=(e=>{const t=[],n=(e,r)=>{(0,g.forEach)(e,((e,o)=>{const i=[...r,o];"desktop"===o?t.push(r):(0,g.isObject)(e)&&n(e,i)}))};return n(e,[]),t})(u).map((e=>({attrName:e.join(".")})));return e.merge(o).setIn([i,"children"],s).without(n).setIn([t?.root?.children[0],"parent"],i).setIn([t?.root?.children[0],"props","attrs"],c).setIn([t?.root?.children[0],"props","attrs","unsyncAttrs"],d)},At=(e,t)=>{const n=e.getIn(["content",t]);return e.getIn(["content",(0,g.get)(n,"parent")])},Tt=R([G()(((e,t)=>{const n=[],r=t=>{const o=At(e,t);"divi/root"!==o?.name?o?.id&&(n.push({id:o.id,name:o.name}),r(o.id)):n.push({id:o.id,name:(0,Ke.__)("Page","et_builder")})};return r(t),n})),(e,t,n)=>n||"top-to-bottom"],G()(((e,t)=>("top-to-bottom"===t&&e.reverse(),e)))),Lt=R([e=>e],(e=>e.getIn(["content"]))),St=(e,t)=>{const n=e.getIn(["content",t,"props","attrs","globalModule"],i()({})),r=e.getIn(["content",t,"props","attrs","globalParent"],i()({}));return"string"==typeof n?String(n):"string"==typeof r?String(r):null},Dt=(e,t)=>{const n=e.getIn(["content"]),r=[];return Object.keys(n).forEach((n=>{const o=e.getIn(["content",n,"props","attrs"],i()({}))?.globalModule;o===t&&r.push(n)})),i()(r)},Ct=R([e=>e,(e,t)=>t],((e,t)=>e.getIn(["content",t]))),Rt=i()({}),Pt=R([(e,t)=>e.getIn(["content",t,"props","attrs"],Rt),(e,t,n)=>n],((e,t)=>{const n=t.split(".");return e.getIn(n,Rt)})),Ut=R([e=>e,(e,t)=>t,(e,t,n)=>n],((e,t,n=i()({}))=>e.getIn(["content",t,"props","attrs"])||n)),Nt=R([(e,t)=>e.getIn(["content",t])],(e=>e?.getIn(["name"])??"")),wt=R([(e,t)=>t,e=>e.getIn(["content"])],G()(((e,t)=>(0,g.pickBy)(t,(t=>(0,g.includes)(e,t.id)))))),kt=(e,t,n)=>F(t,e.getIn(["content"]),n),Gt=(e,t)=>{const n=[t],r=e.getIn(["content"]),o=e=>{(0,g.forEach)((0,g.get)(e,"children",{}),(e=>{n.push(e),o(r.getIn([e]))}))};return o(r.getIn([t])),n},Bt=(e,t)=>{const n=e.getIn(["content",t,"name"]),r=e?.content[t]?.props?.attrs?.asMutable({deep:!0});return(0,Q.getModuleType)(n,r)},Vt=(e,t)=>{const n=e.getIn(["content",t]),r=e.getIn(["content",t,"children"]);let o={[t]:n,root:{...e.getIn(["content","root"]),children:[t]}};const i=t=>{t.forEach((t=>{o={...o,[t]:e.getIn(["content",t])};const n=e.getIn(["content",t,"children"]);n.length>0&&i(n)}))};return i(r),o},Yt=R([(e,t)=>e.getIn(["content",t])],(e=>e?.getIn(["parent"]))),Ft=(e,t)=>{const n=At(e,t),r=(0,g.get)(n,"name"),o=(0,g.get)(n,["props","attrs"],i()({})).asMutable({deep:!0});return(0,Q.getModuleType)(r,o)},jt=R([e=>e.getIn(["content","root"])],(e=>e.getIn(["children"])?.asMutable()??[])),xt=(e,t)=>{const n=e.getIn(["content",t]),r=e.getIn(["content",n?.parent,"children"])?.asMutable();return r||[]},zt=e=>e.getIn(["specialtySection"]),Ht=e=>e.getIn(["presets"]),$t=(e,t,n)=>{const r=(0,l.isStickyModule)(t,e?.content),o=(0,l.isInsideStickyModule)(t,e?.content);return n?o:r||o},Wt=(e,t)=>{const n=e=>{const t=(0,s.select)("divi/edit-post").getModule(e);if(!t)return!1;const r="on"===(0,g.get)(t.props.attrs,["module","decoration","disabledOn","desktopAbove","value"],"off"),o="on"===(0,g.get)(t.props.attrs,["module","decoration","disabledOn","tabletOnly","value"],"off"),i="on"===(0,g.get)(t.props.attrs,["module","decoration","disabledOn","phone","value"],"off"),a=r&&o&&i;return a||"divi/root"===t.name?a:n(t.parent)};return n(t)},qt=e=>{if(1<e.getIn(["content","root","children"]).length)return!1;const t=e.getIn(["content","root","children",0]);if(t){const n=e.getIn(["content",t,"props","attrs"]);if(!(0,g.isEmpty)(n))return!1}const n=[],r=t=>{t&&t.children&&t.children.forEach((t=>{if(t){const o=e.getIn(["content",t]);o&&(-1===n.indexOf(t)&&n.push(t),r(o))}}))};return r(e.getIn(["content","root"])),!(1<n.length)},Jt=R([(e,t)=>{let n={},r=0;const o=t=>{r++;const i=At(e,t);"divi/section"!==i?.name?"divi/root"!==i?.name&&(r>25||i?.id&&o(i.id)):n=i?.asMutable({deep:!0})},i=e.getIn(["content"]).getIn([t?.moduleId]);"divi/section"===i?.name?n=i?.asMutable({deep:!0}):o(t.moduleId);const s=n?.props?.attrs?.module?.advanced?.type?.desktop?.value;return["specialty","fullwidth"].includes(s)?s:"regular"},(e,t)=>t?.type],((e,t)=>e===t)),Qt=R([e=>e,(e,t)=>t],((e,t)=>{if("sticky"!==t?.state)return!1;if(!1===t?.modal?.isActive)return!1;if(t?.id===t?.modal?.owner)return!0;const n=Tt(e,t?.modal?.owner);return!!Object.values(n).find((e=>e?.id===t?.id))&&(0,l.isStickyModule)(t?.id,e?.content?.asMutable({deep:!0}))})),Kt=(e,t,n)=>{const r=e.getIn(["content",t]),{name:o}=r,i=(0,Q.getModuleType)(r?.name,r?.attrs).replace(/fullwidth-|specialty-|-inner/gi,""),s=(0,g.capitalize)(o.replace(/divi\//,""));return{...n,layout_name:n.layout_name.replace("%module%",s),layout_type:i,module_width:o.includes("divi/fullwidth")?"fullwidth":"regular"}},Xt=R([e=>e,(e,t)=>t],((e,t)=>{let n={};const r=e.getIn(["content",t,"children"])||[];return r.forEach((t=>{n={...n,[t]:e.getIn(["content",t])}})),n})),Zt=R([(e,t)=>Gt(e,t),e=>e.getIn(["content"]),(e,t,n)=>n,(e,t,n,r)=>r,(e,t)=>t],((e,t,n,r,o)=>e.filter((e=>{if(e===o&&!r)return!1;const i=t.getIn([e])?.getIn(["name"],"");return i&&((e,t)=>{if(!e||!t)return!1;const n=t.split(",").map((e=>e.trim().toLowerCase())),r=e.replace("divi/","").toLowerCase();return n.includes("all")||n.includes(r)})(i,n)})))),en=R([(e,t)=>e.getIn(["content",t,"props","attrs","groupPreset"],null),(e,t,n)=>n],((e,t)=>e?.getIn([t],null))),tn=i()({}),nn=R([(e,t)=>e.getIn(["content",t,"props","attrs"],tn)],(e=>e.getIn(["modulePreset"]))),rn=i()({}),on=R([(e,t)=>e.getIn(["content",t,"props","attrs"],rn),(e,t,n)=>n],((e,t)=>e.getIn(["groupPreset",t]))),sn=R([(e,t)=>Nt(e,t.moduleId),(e,t)=>{const n=Nt(e,t.moduleId);if(!t?.moduleId)return!1;if("divi/row"===n){const n=At(e,t.moduleId)?.name;return"divi/section"!==n}if("divi/column"===n){const n=At(e,t.moduleId),r=At(e,n?.id)?.name;return"divi/section"!==r}return Tt(e,t.moduleId)}],((e,t)=>(0,g.isBoolean)(t)?t:t.some((t=>t?.name===e)))),an=R([(e,{moduleId:t})=>Tt(e,t),(e,{types:t})=>t,e=>e],((e,t,n)=>e.filter((e=>"divi/column"===e.name)).some((e=>{const r=String(Pt(n,e.id,"module.advanced.type.desktop.value"));return Array.isArray(t)?t.includes(r):r===t})))),un={queryItems:[]},ln=R([e=>e,(e,t)=>t],((e,t)=>{const n=e.getIn(["loopData",t]);if(n)return n.asMutable({deep:!0});const r=e.getIn(["content",t]);if(!r)return un;const o=t=>{const n=e.getIn(["content",t]);if(!n)return un;const r=e.getIn(["loopData",t]);if(r){const e=r.asMutable({deep:!0});if(e.queryItems&&e.queryItems.length>0)return e}const i=e.getIn(["content",t,"props","attrs","module","advanced","loop"]);return"on"===(0,g.get)(i,"enable.desktop.value","off")?un:n.parent?o(n.parent):un};return r.parent?o(r.parent):un})),cn=(e,t,n,r)=>{if(!(0,O.applyFilters)("divi.editPost.moveModule.enable",!0,e,t,n,r))return e;const o=e,i=e.getIn(["content",t,"parent"]),a=e.getIn(["content",i,"children"]).filter((e=>e!==t)),u=(0,g.get)(e,["content",t,"name"],"");e=e.setIn(["content",i,"children"],a);const l="inside"===n?r:e.getIn(["content",r,"parent"]);if("divi/column"===u||"divi/column-inner"===u){if((e.getIn(["content",l,"children"])?.length??0)>={"divi/column":6,"divi/column-inner":3}[u])return o}const c=(0,g.get)(e,["content",l,"name"],""),d=(0,g.get)(e,["content",l,"props","attrs"])||{};if(!(0,s.select)("divi/module-library").isValidChild(c,d,u))return o;if("divi/row"===u&&"divi/column"===c){if(!Jt(e,{moduleId:l,type:"regular"}))return o}const m=e.getIn(["content",l,"children"],[])?.asMutable(),f="inside"===n?m.concat([t]):p(t,r,m,n);return e.setIn(["content",t,"parent"],l).setIn(["content",l,"children"],f)},dn=(e,t,n)=>{const r=n.split("."),o=r[0],i=r.length>1,s=e.getIn([t,"props","attrs"]);if(i){const n=(0,g.last)(r),i=(0,g.slice)(r,0,r.length-1),a=s.getIn(i);if(a){const r=(e=e.setIn([t,"props","attrs"].concat(i),a.without(n))).getIn([t,"props","attrs"]),s=r.getIn([o]),u=(0,Q.removeEmptyObjectRecursive)(s?.asMutable({deep:!0}));(0,g.isEmpty)(u)?e=e.setIn([t,"props","attrs"],r.without(o)):(0,g.isEqual)(u,s?.asMutable({deep:!0}))||(e=e.setIn([t,"props","attrs",o],u))}return e}return e.setIn([t,"props","attrs"],s.without(n))},pn=(e,t)=>{switch(t.type){case"ADD_COLUMN_VIA_DIVIDER":return j(),((e,t,n)=>{let r=e.getIn(["content"]);const o=r.getIn([t],{}),i=o.getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],"4_4").split(","),s=o.getIn(["children"],[]).asMutable(),a="divi/row-inner"===(0,g.get)(o,"name"),u=i.length+1,l=(0,g.times)(u,(()=>`1_${u}`)).join(","),c=a?"divi/column-inner":"divi/column",d=0===n?0:n-1,p=(0,g.nth)(s,d);r=ft(r,p,c,{},0===n?"before":"after");const m=e.setIn(["content"],r);return yt(m,t,l)})(e,t.id,t.dividerPosition);case"ADD_GRID":return j(),e.set("content",ht(e.getIn(["content"]),{id:t.id,position:t.position,template:t.template,isAddSection:t.isAddSection}));case"ADD_MODULE":return j(),e.set("content",ft(e.getIn(["content"]),t.id,t.name,t.props,t.position,t.newId));case"ADD_ROW":return j(),e.set("content",Mt(e.getIn(["content"]),t.id,t.position,t.columnStructure,t.builderVersion,t.inner));case"ADD_SPECIALTY_SECTION":return j(),e.set("content",((e,t,n,r,o)=>{if(!e.getIn([t]))return e;const s=(0,g.filter)(_t.columnSpecialty,(e=>e.structure===r));if((0,g.size)(s)<1)return e;const a=(0,g.filter)(s,(e=>e.position===o));if((0,g.size)(a)<1)return e;const u=e.getIn(["root","children"]),l=v(),c=i()({id:l,name:"divi/section",parent:"root",children:[],props:{attrs:{module:{advanced:{type:{desktop:{value:"specialty"}}}}}}}),d=p(l,t,u.asMutable(),n);e=e.merge({[l]:c}).setIn(["root","children"],d);const m=r.split(","),f=m.length,I={},y=o.split(",");for(let e=0;e<f;e++){const t=v();I[t]={id:t,name:"divi/column",parent:l,props:{attrs:{module:{advanced:{type:{desktop:{value:m[e]}}}}}},children:[]},"1"===y[e]&&(I[t].props.attrs.module.advanced.specialtyColumns={desktop:{value:"2_3"===m[e]?"4":"3"}})}return e.merge(i()(I)).setIn([l,"children"],(0,g.keys)(I))})(e.getIn(["content"]),t.id,t.position,t.columnStructure,t.innerPosition));case"CHANGE_COLUMN_STRUCTURE":return j(),yt(e,t.id,t.columnStructure);case"CHANGE_COLUMN_STRUCTURE_FOR_DRAG_AND_DROP":return j(),((e,t,n)=>{let r=e.getIn(["content"]);const o=r.getIn([t,"props","attrs","module","advanced","columnStructure","desktop","value"],""),i=r.getIn([n,"props","attrs","module","advanced","columnStructure","desktop","value"],""),s=o.split(",").length??0,a=i.split(",").length??0,u=e=>e>=2&&e<=6?Array(e).fill(`1_${e}`).join(","):"4_4",l=u(s-1),c=u(a+1);r=r.setIn([t,"props","attrs","module","advanced","columnStructure","desktop","value"],l).setIn([n,"props","attrs","module","advanced","columnStructure","desktop","value"],c);const d=r.getIn([n,"children"],[]),p=c.split(",")[0];d.forEach((e=>{r=r.setIn([e,"props","attrs","module","advanced","type","desktop","value"],p)}));const m=r.getIn([t,"children"],[]),g=l.split(",")[0];return m.forEach((e=>{r=r.setIn([e,"props","attrs","module","advanced","type","desktop","value"],g)})),e.setIn(["content"],r)})(e,t.sourceId,t.targetId);case"CLEAR_LAYOUT":return j(),e.set("content",(e=>{const t=v(),n={root:{id:"root",name:"divi/root",children:[t],props:{attrs:{}}},[t]:{id:t,name:"divi/section",children:[],parent:"root",props:{attrs:{builderVersion:e}}}};return i()(n)})(t.builderVersion));case"CLEAR_REMOVED_MODULES":return((e,t)=>{const n=t?.params?.layout??"postContent",r=e.getIn(["layouts",n,"removedModules"]);let o=e;return(0,g.forEach)(r,(r=>{const i=r?.id,s=(0,g.isObject)(e.getIn(["content",i])),a=e.getIn(["content",i,"parent"]),u=e.getIn(["content",a,"children"],[]),l=(0,g.includes)(u,i);s&&!l&&(o=vt(o,{id:i,caller:t?.params?.caller})),o=o.setIn(["layouts",n,"removedModules"],e.getIn(["layouts",n,"removedModules"]).without(i))})),o})(e,t);case"CLONE_MODULE":return j(),e.set("content",((e,t)=>{const{id:n,moduleAppearanceSettings:r,themeBuilderLayout:o,moduleCount:i}=t,{clonedParent:s,clonedParentChildren:a,clonedModules:u}=N(e,{moduleId:n,targetParentId:"",moduleAppearanceSettings:r,themeBuilderLayout:o,moduleCount:i});return e.getIn(["content"]).merge(u).setIn([s,"children"],a)})(e,t.params));case"CLONE_COLUMN":return j(),((e,t)=>{const n=e.getIn(["content"]),{id:r,moduleAppearanceSettings:o={},themeBuilderLayout:i="postContent",moduleCount:s}=t,a=n.getIn([r],{}).getIn(["name"],"");if("divi/column"!==a&&"divi/column-inner"!==a)return e;const{clonedParent:u,clonedParentChildren:l,clonedModules:c}=N(e,{moduleId:r,moduleAppearanceSettings:o,themeBuilderLayout:i,moduleCount:s}),d=n.getIn([u],{}).getIn(["props","attrs","module","advanced","columnStructure","desktop","value"],"4_4").split(",").length+1,p=(0,g.times)(d,(()=>`1_${d}`)).join(","),m=n.merge(c).setIn([u,"children"],l),f=e.setIn(["content"],m);return yt(f,u,p)})(e,t.params);case"CONVERT_SELECTED_MODULES_TO_GROUP":return j(),e.set("content",((e,t)=>{const n=t[0],r=e.getIn([n,"parent"],""),o=v(),i=e.getIn([r,"props","attrs","globalModule"],!1),s=e.getIn([r,"props","attrs","globalParent"],!1),a=i||s||!1,u={id:o,children:[...t],name:"divi/group",parent:r,props:{}},l=e.getIn([r,"children"],[]),c=p(u.id,n,l.asMutable(),"after");return e=e.merge({[u.id]:u}).setIn([r,"children"],c),a?e.setIn([u.id,"props","attrs","globalParent"],a):(t.forEach((t=>{const n=e.getIn([t,"parent"]),r=e.getIn([n,"children"],[]);e=(e=e.setIn([n,"children"],r.asMutable().filter((e=>e!==t)))).setIn([t,"parent"],u.id)})),e)})(e.getIn(["content"]),t.selectedModuleIds));case"COPY_MODULE":return j(),e.set("content",((e,t)=>{const n=e.getIn(["content"]),{id:r,position:o,targetId:i,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}=t,l="inside"===o?i:n.getIn([i,"parent"]),c=n.getIn([i,"props","attrs","globalParent"]),{clonedModuleId:d,clonedModules:m}=N(e,{moduleId:r,targetParentId:l,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}),g=n.getIn([l,"children"],[]),f="inside"===o?g.concat([d]):p(d,i,g.asMutable(),o);return c?n.merge(m).setIn([l,"children"],f).setIn([d,"props","attrs","globalParent"],c):n.merge(m).setIn([l,"children"],f)})(e,t.params));case"COPY_MODULE_FROM_LIBRARY":return j(),e.set("content",((e,t,n,r)=>{const o="inside"===n?r:e.getIn([r,"parent"]),s=e.getIn([o]).asMutable({deep:!0}),a=(0,Q.maybeUnwrapPlaceholderBlock)(t.getIn(["content"],"")),u=w((0,d.maybeConvertContent)(a));let l=i()(H(u,{...s,children:[]}));if("inside"!==n){const t=e.getIn([o,"children"],[]),i=l.getIn([o,"children"]),s=t.reduce(((e,t)=>t===r?"before"===n?e.concat([...i.asMutable(),t]):e.concat([t,...i.asMutable()]):e.concat(t)),[]);l=l.setIn([o,"children"],s)}if("global"===t.is_global){const e=l.getIn([o,"children"],[]);Object.keys(l.without(o)).forEach((n=>{l=e.includes(n)?l.setIn([n,"props","attrs","globalModule"],String(t.ID)):l.setIn([n,"props","attrs","globalParent"],String(t.ID))}))}return e.merge(l)})(e.getIn(["content"]),t.payload,t.position,t.targetId));case"COPY_MODULE_FROM_PAYLOAD":return j(),e.set("content",((e,t)=>{const n=e.getIn(["content"]),{payload:r,position:o,targetId:i,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}=t,l=r.moduleObjects.getIn([r.moduleId,"parent"]),c=n.getIn([l]),d="inside"===o?i:n.getIn([i,"parent"]),m=n.getIn([d]),g=n.getIn([i,"props","attrs","globalParent"]),f=r.moduleObjects.setIn([l],c).setIn([d],m),I=e.setIn(["content"],f),{clonedModuleId:y,clonedModules:E}=N(I,{moduleId:r.moduleId,targetParentId:d,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}),h=n.getIn([d,"children"],[]),M="inside"===o?h.concat([y]):p(y,i,h.asMutable(),o);return g?n.merge(E).setIn([d,"children"],M).setIn([y,"props","attrs","globalParent"],g):n.merge(E).setIn([d,"children"],M)})(e,t.params));case"COPY_MODULES_FROM_PAYLOAD":return j(),e.set("content",((e,t)=>{const{payload:n,position:r,targetId:o,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}=t;let l=o,c=r,d=e.getIn(["content"]);return(0,g.forEach)(n.moduleIds,(t=>{const r=n.moduleObjects.getIn([t,"parent"]),m=d.getIn([r]),g="inside"===c?l:d.getIn([l,"parent"]),f=d.getIn([g]),I=d.getIn([o,"props","attrs","globalParent"]),y=n.moduleObjects.setIn([r],m).setIn([g],f),E=e.setIn(["content"],y),{clonedModuleId:h,clonedModules:M}=N(E,{moduleId:t,targetParentId:g,moduleAppearanceSettings:s,themeBuilderLayout:a,moduleCount:u}),_=d.getIn([g,"children"],i()([])),v="inside"===c?_.concat([h]):p(h,l,_.asMutable(),c);l=h,c="after",I&&(d=d.merge(M).setIn([g,"children"],v).setIn([h,"props","attrs","globalParent"],I)),d=d.merge(M).setIn([g,"children"],v)})),d})(e,t.params));case"DISABLE_GLOBAL_MODULE":return j(),e.set("content",((e,t)=>{let n=e;const r=t=>{const o=e.getIn([t,"props","attrs"]).without("globalModule").without("globalParent");n=n.setIn([t,"props","attrs"],o);const i=e.getIn([t,"children"]);(0,g.isEmpty)(i)||(0,g.forEach)(i,(e=>{r(e)}))};return r(t),n})(e.getIn(["content"]),t.id));case"EDIT_CHILDREN":return j(),e.set("content",((e,t,n)=>e.setIn([t,"children"],n))(e.getIn(["content"]),t.id,t.children));case"IMPORT_CONTENT":return j(),e.set("content",(({state:e,content:t,presetIdsToReplace:n,defaultPresetAttrs:r,importOptionsValues:a,defaultImportedModulePresetIds:u,defaultImportedGroupPresetIds:l})=>{const c=(0,s.select)("divi/settings").getSetting(["conditionalTags","is_tb"]),{replaceLayout:p,removeGlobalScope:m}=a;let f=(0,d.maybeConvertContent)(t);"on"===m&&(f=f.replace(/,"globalModule":"\d+"/g,"").replace(/,"globalParent":"\d+"/g,"")),c||(f=f.replace(/<!-- wp:divi\/post-content.*?-->/g,""));const I=H(f),y=(0,g.filter)(I,["name","divi/section"]);let E=i()(I);if((0,g.forEach)(n,((e,t)=>{Object.values(I).filter((({name:e})=>e===t)).map((({id:e})=>e)).forEach((t=>{const n=E.getIn([t,"props","attrs","modulePreset"]);e[n]&&(E=E.setIn([t,"props","attrs","modulePreset"],e[n]))}))})),(0,g.forEach)(r,((e,t)=>{Object.values(I).filter((({name:e})=>e===t)).map((({id:e})=>e)).forEach((t=>{"default"===E.getIn([t,"props","attrs","modulePreset"])&&(E=E.setIn([t,"props","attrs"],(0,g.merge)({},e,E.getIn([t,"props","attrs"]).asMutable({deep:!0}))))}))})),(0,g.isEmpty)(u)||(0,g.forEach)(u,(({moduleName:e,presetId:t})=>{(0,g.forEach)(I,(({props:n,name:r,id:o})=>{e===r&&"divi/root"!==r&&((0,g.get)(n,["attrs","modulePreset"])||(E=E.setIn([o,"props","attrs","modulePreset"],t)))}))})),(0,g.isEmpty)(l)||(0,g.forEach)(I,(({props:e,name:t,id:n})=>{if("divi/root"===t)return;const r=(0,s.select)("divi/module-library").getModule(t),i=(0,g.isUndefined)(r)?{}:(0,Q.getGroupPresetDefaultAttr)((0,o.asMutable)(r,{deep:!0})),a=(0,g.get)(e,["attrs","groupPreset"],{}),u=(0,g.merge)({},i,a);if(!u)return;const c=E.getIn([n,"props","attrs","groupPreset"])?.asMutable({deep:!0});let d=c??{};(0,g.forEach)(l,(e=>{const t=Object.fromEntries(Object.entries(u).filter((([t,n])=>n.groupName===e.groupName))),n=Object.keys(u).find((t=>u[t].groupName===e.groupName)),r=!(!n||!u[n]),o=u[n]?.presetId,i=e.groupName,s=e.presetId;(0,g.forEach)(t,((t,n)=>{t.groupName===e.groupName&&(0,g.isEmpty)(t.presetId)&&(d={...d,[n]:{presetId:s,groupName:i}})})),(0,g.isEmpty)(c)&&r?d={...d,[e.groupId]:{presetId:s,groupName:i}}:!(0,g.isEmpty)(c)&&r&&(0,g.isEmpty)(o)&&(d={...d,[e.groupId]:{...d[e.groupId],presetId:s,groupName:i}})})),(0,g.isEmpty)(d)||(E=E.setIn([n,"props","attrs","groupPreset"],d))})),"on"===p)return E.setIn(["root","children"],(0,g.values)((0,g.map)(y,"id")));const h=[...e.getIn(["root","children"]).asMutable(),...(0,g.map)(y,"id")];return e.merge(E).setIn(["root","children"],(0,g.values)(h))})({state:e.getIn(["content"]),content:t.content,presetIdsToReplace:t.presetIdsToReplace,defaultPresetAttrs:t.defaultPresetAttrs,importOptionsValues:t.importOptionsValues,defaultImportedModulePresetIds:t.defaultImportedModulePresetIds,defaultImportedGroupPresetIds:t.defaultImportedGroupPresetIds}));case"MERGE_GLOBAL_MODULES":return j(),e.set("content",bt(e.getIn(["content"]),t.content,t.owner));case"MOVE_MODULE":return j(),cn(e,t.id,t.position,t.targetId);case"MOVE_MODULES":return j(),((e,t,n,r,o)=>{const s=F(t,e.getIn(["content"]),!0),a=(0,g.map)((0,g.values)(s),(e=>(0,Q.getModuleType)(e.name,e.props.attrs))),u=(0,g.uniq)(a);if(u.length>1){const a=(0,Q.extractLowestModuleType)(u),l=(0,Q.getParentType)(a),c=l&&(0,g.isString)(l)?(0,Q.getChildType)(l):"",d=(0,g.mapValues)(Q.moduleTypeRanks,(()=>null)),p=(0,g.sortBy)((0,g.values)(s),(e=>Q.moduleTypeRanks[(0,Q.getModuleType)(e.name,e.props.attrs)]+t.indexOf(e.id)/100)),m=t=>{(0,g.forEach)(t,(t=>{const n=(0,Q.getModuleType)(t.name,t.props.attrs);if((0,g.isNull)(d[n])){d[n]=t;const r=F(t.children,e.getIn(["content"]),!0);m((0,g.values)(r))}}))};m(p);let f=!(0,g.isNull)(d.section);const I=!(0,g.isNull)(d["specialty-section"]),y=!(0,g.isNull)(d["fullwidth-section"]),E=!(0,g.isNull)(d["fullwidth-module"]),h=!(0,g.isNull)(d.row),M=!(0,g.isNull)(d.column),_=!(0,g.isNull)(d.module);if(!f&&_&&y&&!I){const t=v(),n={attrs:{}};e=e.setIn(["content"],ft(e.getIn(["content"]),r,"divi/section",n,"after",t)),d.section=e?.content?.[t]?.asMutable({deep:!0}),f=!0}if(f&&_){const t=!(0,g.isNull)(d.row),n=!(0,g.isNull)(d.column);if(!t){const t=v(),n=(e=e.setIn(["content"],Mt(e.getIn(["content"]),d.section.id,"inside","4_4",o,!1,t))).getIn(["content",t,"children",0]);d.row=e?.content?.[t]?.asMutable({deep:!0}),d.column=e?.content?.[n]?.asMutable({deep:!0})}if(t&&!n){const t=(0,g.get)(d,["row","id"]),n=v(),r={attrs:{module:{advanced:{type:{desktop:{value:"4_4"}}}}}};e=(e=e.setIn(["content"],Ot(e.getIn(["content"]),t,"module.advanced.columnStructure",i()({desktop:{value:"4_4"}})))).setIn(["content"],ft(e.getIn(["content"]),t,"divi/column",r,"inside",n)),d.column=e?.content?.[n]?.asMutable({deep:!0})}}if(!y&&E&&(f||I)){const t=v(),n={attrs:{module:{advanced:{type:{desktop:{value:"fullwidth"}}}}}};e=e.setIn(["content"],ft(e.getIn(["content"]),r,"divi/section",n,"after",t)),d["fullwidth-section"]=e?.content?.[t]?.asMutable({deep:!0})}if(!f&&h&&!M){const t=v();e=(e=e.setIn(["content"],Ot(e.getIn(["content"]),d.row.id,"module.advanced.columnStructure",i()({desktop:{value:"4_4"}})))).setIn(["content"],ft(e.getIn(["content"]),d.row.id,"divi/column",{attrs:{module:{advanced:{type:{desktop:{value:"4_4"}}}}}},"inside",t)),d.column=e?.content?.[t]?.asMutable({deep:!0})}let O=null;(0,g.forEach)(p,(t=>{const o=(0,Q.getModuleType)(t.name,t.props.attrs),i=(0,Q.getParentType)(o);if((0,g.isArray)(c)?(0,g.includes)(c,o):c===o)e=(0,g.isNull)(O)?cn(e,t.id,n,r):cn(e,t.id,"after",O),O=t.id;else if((0,g.isString)(i)&&!(0,g.isEmpty)((0,g.get)(d,[i,"children"]))){const n=(0,g.get)(d,[o,"id"]);e=cn(e,t.id,"inside",(0,g.get)(e,["content",n,"parent"]))}else(0,g.isArray)(i)?(0,g.forEach)(i,(n=>{(0,g.isNull)(d[n])||(e=cn(e,t.id,"inside",(0,g.get)(d,[n,"id"])))})):i&&(0,g.isString)(i)&&!(0,g.isNull)(d[i])&&(e=cn(e,t.id,"inside",(0,g.get)(d,[i,"id"])))}))}else{let o=r;(0,g.forEach)(t,(t=>{e=cn(e,t,n,o),"after"===n&&(o=t)}))}return e})(e,t.ids,t.position,t.targetId,t.builderVersion);case"EDIT_MODULE_ATTRIBUTE":return j(),e.set("content",Ot(e.getIn(["content"]),t.id,t.attrName,t.value,t.caller));case"EDIT_UNSYNC_ATTRS":return j(),e.set("content",((e,t,n,r)=>{const o=e.getIn([t,"props","attrs","unsyncAttrs"])||[];return r?e.setIn([t,"props","attrs","unsyncAttrs"],[...o,n]):(0,g.isEmpty)(o)?e:e.setIn([t,"props","attrs","unsyncAttrs"],o.filter((e=>e?.attrName!==n?.attrName&&e?.subName!==n?.subName)))})(e.getIn(["content"]),t.id,t.attribute,t.isSynced));case"EDIT_MODULE_PROP":return j(),e.set("content",((e,t,n,r)=>e.setIn([t,"props",n],r))(e.getIn(["content"]),t.id,t.propName,t.propValue));case"REMOVE_GROUP_PRESET_ATTRIBUTE":return j(),e.set("content",((e,t,n,r)=>{const o=e.getIn([t,"props","attrs"]);if(!(0,g.isEmpty)(o[n])){const i=o.getIn([n]).without(r),s=o.set(n,i);return e.setIn([t,"props","attrs"],s)}return e})(e.getIn(["content"]),t.id,t.attrName,t.groupId));case"REPLACE_MODULE_ATTRIBUTES":return j(),e.set("content",((e,t,n,r=!1)=>r?e.setIn([t,"props","attrs"],n):((0,g.forEach)(n,((n,r)=>{e=e.setIn([t,"props","attrs",r],n)})),e))(e.getIn(["content"]),t.id,t.attrs,t.replaceAllAttrs));case"REMOVE_GLOBAL_MODULE_ATTRIBUTE":return j(),e.set("content",((e,t)=>{const n=e.getIn([t,"props","attrs"]);return e.setIn([t,"props","attrs"],n.without("globalModule"))})(e.getIn(["content"]),t.id));case"REMOVE_GLOBAL_PARENT_ATTRIBUTE":return j(),e.set("content",((e,t)=>{const n=e.getIn([t,"props","attrs"]);return n?e.setIn([t,"props","attrs"],n.without("globalParent")):e})(e.getIn(["content"]),t.id));case"REMOVE_MODULE":return j(),It(e,t.id);case"REMOVE_MODULE_STATE_PROPERTIES":return vt(e,t.params);case"REMOVE_MODULE_ATTRIBUTE":return j(),e.set("content",dn(e.getIn(["content"]),t.id,t.attrName));case"REMOVE_MODULE_ATTRIBUTES":return j(),e.set("content",(n=e.getIn(["content"]),r=t.id,t.attrNames.forEach((e=>{n=dn(n,r,e)})),n));case"REMOVE_COLUMN":return j(),((e,t,n="postContent")=>{let r=e.getIn(["content"]);const o=r.getIn([t],{}),i=o.getIn(["name"],""),s="divi/column"===i||"divi/column-inner"===i;if((0,g.isEmpty)(o)||!s)return e;const a=o.getIn(["parent"]),u=r.getIn([a,"children"],[]).asMutable(),l=u.indexOf(t);if(l<0)return e;const c=u.length-1,d=(0,g.times)(c,(()=>1===c?"4_4":`1_${c}`)).join(","),p=[...u];p.splice(l,1),r=r.setIn([a,"children"],p);const m=e.setIn(["content"],r).setIn(["layouts",n,"removedModules",t],{id:t,timestamp:Date.now()});return yt(m,a,d)})(e,t.id);case"SET_GLOBAL_MODULE_ATTRIBUTE":return j(),e.set("content",((e,t,n)=>e.setIn([t,"props","attrs","globalModule"],n))(e.getIn(["content"]),t.id,t.value));case"SET_GLOBAL_PARENT_ATTRIBUTE":return j(),e.set("content",((e,t,n)=>e.setIn([t,"props","attrs","globalParent"],n))(e.getIn(["content"]),t.id,t.value));case"SET_LAYOUT_STATE":return j(),e.set(t.location,t.layoutState);case"SET_SPECIALITY_SECTION_STATUS":return j(),e.set("specialtySection",t.status);case"SYNC_GLOBAL_LAYOUT_ATTRIBUTES":return j(),e.set("content",((e,t,n,r)=>{const o=r.map((e=>{const{attrName:t}=e;return t.split(".")})),i=e.asMutable({deep:!0});return e=(e=e.setIn([t,"props","attrs"],n)).setIn([t,"props","attrs","unsyncAttrs"],r),o.forEach((n=>{const r=(0,g.get)(i,[t,"props","attrs",...n]);e=e.setIn([t,"props","attrs",...n],r)})),e})(e.getIn(["content"]),t.id,t.attrs,t.unsyncAttrs));case"SYNC_MODULE_INLINE_FONT":return e.set("content",(e=>{const t={...e},n=(0,g.filter)(t,(e=>{const t=e.getIn(["props","attrs","content","decoration","inlineFont"],[]);return!(0,g.isEmpty)(t)}));return 0===n.length||(0,g.forEach)(n,(t=>{const n=t.getIn(["props","attrs","content","innerContent"],{});(0,g.forEach)(n,((n,r)=>{(0,g.forEach)(n,((n,o)=>{const i=$(n),s=[t.id,"props","attrs","content","decoration","inlineFont",r,o,"families"];e=e.setIn(s,i)}))}))})),e})(e.getIn(["content"])));case"SYNC_MODULE_GLOBAL_COLORS":return e.set("content",((e,t)=>{let n=JSON.stringify({...e});const r=new RegExp(/var[(]--(gcid-([0-9a-z-]*))[)]/,"g"),o=Array.from(n.matchAll(r));if(o.length>0){const e={},r=o.map((e=>e[1]));(0,g.forEach)(t,((t,n)=>{r.includes(n)&&(e[n]=t)})),(0,g.isEmpty)(e)||(0,g.forEach)(e,((e,t)=>{"inactive"===e.status&&(n=n.replace(new RegExp(`var[(]--${t}[)]`,"g"),e.color))}))}try{let t=i()(e);const r=JSON.parse(n);return Object.keys(r).forEach((e=>{t=t.setIn([e],r[e])})),t}catch(e){console.error(e)}return e})(e.getIn(["content"]),t.globalColors));case"UPDATE_USED_PRESETS":return e.set("presets",((e,t)=>e.setIn([t.presetType],t.presets))(e.getIn(["presets"]),{presetType:t.presetType,presets:t.presets}));case"REVERT_GLOBAL_MODULE_EDIT_STATE":return j(),e;case"EDIT_GROUP_PRESET_ATTR":return j(),e.set("content",((e,t,n,r)=>e.setIn([t,"props","attrs","groupPreset",n],r))(e.getIn(["content"]),t.id,t.attrName,t.value));case"SET_MODULE_LOOP_DATA":return j(),e.setIn(["loopData"],((e,t,n)=>(e.getIn(["loopData"])||e.set("loopData",{}).getIn(["loopData"])).set(t,{queryItems:n.queryItems}))(e,t.id,t.loopData));default:return e}var n,r},mn=(e,t)=>t?.path&&!(0,g.isEmpty)(t.path)?e.getIn(t?.path):e,gn={};window?.DiviEditPostData?.debug?.storeStateModal&&(gn.debugState=mn);const fn=n=>{if((0,s.select)("divi/edit-post"))return;(0,s.select)("divi/module")||(0,l.registerModuleStore)(),(0,s.select)("divi/module-library")||(0,c.registerModuleLibraryStore)(),(0,s.select)("divi/history")||(0,a.registerHistoryStore)();const r=n||i()(((e="postContent")=>{const t=(0,s.select)("divi/serialized-post").getState([e,"content"]),n=H(t);return{content:n,specialtySection:!1,layouts:{postContent:{removedModules:{}}},presets:{module:(0,Q.populateUsedPresets)(n),group:(0,Q.populateUsedGroupPresets)(n)}}})("postContent")),o=(0,s.registerStore)("divi/edit-post",{actions:e,reducer:pn,selectors:{...t,...gn},initialState:r});(0,u.applyMiddlewares)(o,gt),(0,u.applyEffects)(o,dt),ee({type:"SET_LAYOUT_STATE",location:"content",layoutState:r?.getIn(["content"])},o)}}(),(window.divi=window.divi||{}).editPost=r}();